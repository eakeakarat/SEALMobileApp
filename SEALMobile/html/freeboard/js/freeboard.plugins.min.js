function cyblion_decrypt(e){var t=parseFloat(e)+10.2;return console.log(typeof e),console.log("plaintext:  "+t),console.log("cipher:  "+e),t}!function(){function n(e,r){var n=this,t=null,i=e,s=0,o=!1;function a(e){t&&clearInterval(t),t=setInterval(function(){n.updateNow()},e)}a(1e3*i.refresh),this.updateNow=function(){if(!(1<s&&!i.use_thingproxy||2<s)){var e=i.url,t=(2==s&&i.use_thingproxy&&(e=("https:"==location.protocol?"https:":"http:")+"//thingproxy.freeboard.io/fetch/"+encodeURI(i.url)),i.body);if(t)try{t=JSON.parse(t)}catch(e){}$.ajax({url:e,dataType:1==s?"JSONP":"JSON",type:i.method||"GET",data:t,beforeSend:function(r){try{_.each(i.headers,function(e){var t=e.name,e=e.value;_.isUndefined(t)||_.isUndefined(e)||r.setRequestHeader(t,e)})}catch(e){}},success:function(e){o=!0,r(e)},error:function(e,t,r){o||(s++,n.updateNow())}})}},this.onDispose=function(){clearInterval(t),t=null},this.onSettingsChanged=function(e){o=!1,s=0,a(1e3*(i=e).refresh),n.updateNow()}}function i(e,t){var r=this,n=null,i=e;function s(e){n&&clearInterval(n),n=setInterval(function(){r.updateNow()},e)}s(1e3*i.refresh),this.updateNow=function(){$.ajax({url:"http://api.openweathermap.org/data/2.5/weather?APPID="+i.api_key+"&q="+encodeURIComponent(i.location)+"&units="+i.units,dataType:"JSONP",success:function(e){e={place_name:e.name,sunrise:new Date(1e3*e.sys.sunrise).toLocaleTimeString(),sunset:new Date(1e3*e.sys.sunset).toLocaleTimeString(),conditions:e.weather[0].description.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),current_temp:e.main.temp,high_temp:e.main.temp_max,low_temp:e.main.temp_min,pressure:e.main.pressure,humidity:e.main.humidity,wind_speed:e.wind.speed,wind_direction:e.wind.deg};t(e)},error:function(e,t,r){}})},this.onDispose=function(){clearInterval(n),n=null},this.onSettingsChanged=function(e){i=e,r.updateNow(),s(1e3*i.refresh)}}function s(e,t){var r=e;function n(e){t(e)}this.updateNow=function(){dweetio.get_latest_dweet_for(r.thing_id,function(e,t){e||n(t[0].content)})},this.onDispose=function(){},this.onSettingsChanged=function(e){dweetio.stop_listening_for(r.thing_id),r=e,dweetio.listen_for(r.thing_id,function(e){n(e.content)})},this.onSettingsChanged(e)}function o(e,t){var r,n=this,i=e,s=[],o=0;function a(){0<s.length?(o<s.length&&(t(s[o]),o++),(o=o>=s.length&&i.loop?0:o)<s.length&&(r=setTimeout(a,1e3*i.refresh))):t({})}function l(){s=[],o=0,r&&(clearTimeout(r),r=null)}this.updateNow=function(){l(),$.ajax({url:i.datafile,dataType:i.is_jsonp?"JSONP":"JSON",success:function(e){s=_.isArray(e)?e:[],o=0,a()},error:function(e,t,r){}})},this.onDispose=function(){l()},this.onSettingsChanged=function(e){i=e,n.updateNow()}}function a(e,t){var r,n=this,i=e;function s(){r&&(clearTimeout(r),r=null)}function o(){s(),r=setInterval(n.updateNow,1e3*i.refresh)}this.updateNow=function(){var e=new Date,e={numeric_value:e.getTime(),full_string_value:e.toLocaleString(),date_string_value:e.toLocaleDateString(),time_string_value:e.toLocaleTimeString(),date_object:e};t(e)},this.onDispose=function(){s()},this.onSettingsChanged=function(e){i=e,o()},o()}freeboard.loadDatasourcePlugin({type_name:"JSON",settings:[{name:"url",display_name:"URL",type:"text"},{name:"use_thingproxy",display_name:"Try thingproxy",description:'A direct JSON connection will be tried first, if that fails, a JSONP connection will be tried. If that fails, you can use thingproxy, which can solve many connection problems to APIs. <a href="https://github.com/Freeboard/thingproxy" target="_blank">More information</a>.',type:"boolean",default_value:!0},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5},{name:"method",display_name:"Method",type:"option",options:[{name:"GET",value:"GET"},{name:"POST",value:"POST"},{name:"PUT",value:"PUT"},{name:"DELETE",value:"DELETE"}]},{name:"body",display_name:"Body",type:"text",description:"The body of the request. Normally only used if method is POST"},{name:"headers",display_name:"Headers",type:"array",settings:[{name:"name",display_name:"Name",type:"text"},{name:"value",display_name:"Value",type:"text"}]}],newInstance:function(e,t,r){t(new n(e,r))}}),freeboard.loadDatasourcePlugin({type_name:"openweathermap",display_name:"Open Weather Map API",settings:[{name:"api_key",display_name:"API Key",type:"text",description:"Your personal API Key from Open Weather Map"},{name:"location",display_name:"Location",type:"text",description:"Example: London, UK"},{name:"units",display_name:"Units",type:"option",default:"imperial",options:[{name:"Imperial",value:"imperial"},{name:"Metric",value:"metric"}]},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5}],newInstance:function(e,t,r){t(new i(e,r))}}),freeboard.loadDatasourcePlugin({type_name:"dweet_io",display_name:"Dweet.io",external_scripts:["http://dweet.io/client/dweet.io.min.js"],settings:[{name:"thing_id",display_name:"Thing Name",description:"Example: salty-dog-1",type:"text"}],newInstance:function(e,t,r){t(new s(e,r))}}),freeboard.loadDatasourcePlugin({type_name:"playback",display_name:"Playback",settings:[{name:"datafile",display_name:"Data File URL",type:"text",description:"A link to a JSON array of data."},{name:"is_jsonp",display_name:"Is JSONP",type:"boolean"},{name:"loop",display_name:"Loop",type:"boolean",description:"Rewind and loop when finished"},{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:5}],newInstance:function(e,t,r){t(new o(e,r))}});freeboard.loadDatasourcePlugin({type_name:"clock",display_name:"Clock",settings:[{name:"refresh",display_name:"Refresh Every",type:"number",suffix:"seconds",default_value:1}],newInstance:function(e,t,r){t(new a(e,r))}}),freeboard.loadDatasourcePlugin({type_name:"meshblu",display_name:"Octoblu",description:"app.octoblu.com",external_scripts:["http://meshblu.octoblu.com/js/meshblu.js"],settings:[{name:"uuid",display_name:"UUID",type:"text",default_value:"device uuid",description:"your device UUID",required:!0},{name:"token",display_name:"Token",type:"text",default_value:"device token",description:"your device TOKEN",required:!0},{name:"server",display_name:"Server",type:"text",default_value:"meshblu.octoblu.com",description:"your server",required:!0},{name:"port",display_name:"Port",type:"number",default_value:80,description:"server port",required:!0}],newInstance:function(e,t,r){t(new l(e,r))}});var l=function(e,r){var n=e;this.onSettingsChanged=function(e){n=e},this.updateNow=function(){var t;(t=skynet.createConnection({uuid:n.uuid,token:n.token,server:n.server,port:n.port})).on("ready",function(e){t.on("message",function(e){r(e)})})},this.onDispose=function(){}}}(),function(){var h=100,u=["#FF9900","#FFFFFF","#B3B4B4","#6B6B6B","#28DE28","#13F7F9","#E6EE18","#C41204","#CA3CB8","#0B1CFB"];function c(r,e,n){function t(e,t){i[t]||(i[t]=[]),i[t].length>=h&&i[t].shift(),i[t].push(Number(e)),(void 0===s||e<s)&&(s=e),(void 0===o||o<e)&&(o=e)}var i=$(r).data().values,s=$(r).data().valueMin,o=$(r).data().valueMax,a=(i||(i=[],o=s=void 0),_.isArray(e)?_.each(e,t):t(e,0),$(r).data().values=i,$(r).data().valueMin=s,$(r).data().valueMax=o,'<span style="color: {{color}}">&#9679;</span> {{y}}'),l=!1;_.each(i,function(e,t){$(r).sparkline(e,{type:"line",composite:l,height:"100%",width:"100%",fillColor:!1,lineColor:u[t%u.length],lineWidth:2,spotRadius:3,spotColor:!1,minSpotColor:"#78AB49",maxSpotColor:"#78AB49",highlightSpotColor:"#9D3926",highlightLineColor:"#9D3926",chartRangeMin:s,chartRangeMax:o,tooltipFormat:n&&n[t]?a+" ("+n[t]+")":a}),l=!0})}function r(e){var l=e,t=$('<div class="tw-display"></div>'),n=$('<h2 class="section-title tw-title tw-td"></h2>'),h=$('<div class="tw-value"></div>'),i=$('<div class="tw-unit"></div>'),u=$('<div class="tw-sparkline tw-td"></div>');function s(){_.isUndefined(l.units)||""==l.units?h.css("max-width","100%"):h.css("max-width",t.innerWidth()-i.outerWidth(!0)+"px")}this.render=function(e){$(e).empty(),$(t).append($('<div class="tw-tr"></div>').append(n)).append($('<div class="tw-tr"></div>').append($('<div class="tw-value-wrapper tw-td"></div>').append(h).append(i))).append($('<div class="tw-tr"></div>').append(u)),$(e).append(t),s()},this.onSettingsChanged=function(e){l=e;var t=!_.isUndefined(e.title)&&""!=e.title,r=!_.isUndefined(e.units)&&""!=e.units,t=(e.sparkline?u.attr("style",null):(delete u.data().values,u.empty(),u.hide()),t?(n.html(_.isUndefined(e.title)?"":e.title),n.attr("style",null)):(n.empty(),n.hide()),r?(i.html(_.isUndefined(e.units)?"":e.units),i.attr("style",null)):(i.empty(),i.hide()),30);"big"==e.size&&(t=75,e.sparkline)&&(t=60),h.css({"font-size":t+"px"}),s()},this.onSizeChanged=function(){s()},this.onCalculatedValueChanged=function(e,t){var r,n,i,s,o,a;"value"==e&&(l.animate?(r=t,n=h,e=500,(a=$(n).text())!=r&&($.isNumeric(r)&&$.isNumeric(a)?(s=0,1<(i=r.toString().split(".")).length&&(s=i[1].length),o=0,1<(i=a.toString().split(".")).length&&(o=i[1].length),jQuery({transitionValue:Number(a),precisionValue:o}).animate({transitionValue:Number(r),precisionValue:s},{duration:e,step:function(){$(n).text(this.transitionValue.toFixed(this.precisionValue))},done:function(){$(n).text(r)}})):$(n).text(r))):h.text(t),l.sparkline)&&c(u,t)},this.onDispose=function(){},this.getHeight=function(){return"big"==l.size||l.sparkline?2:1},this.onSettingsChanged(e)}function n(e){var r,t="gauge-"+p++,n=$('<h2 class="section-title"></h2>'),i=$('<div class="gauge-widget" id="'+t+'"></div>'),s=!1,o=e;function a(){s&&(i.empty(),r=new JustGage({id:t,value:_.isUndefined(o.min_value)?0:o.min_value,min:_.isUndefined(o.min_value)?0:o.min_value,max:_.isUndefined(o.max_value)?0:o.max_value,label:o.units,showInnerShadow:!1,valueFontColor:"#d3d4d4"}))}this.render=function(e){s=!0,$(e).append(n).append($('<div class="gauge-widget-wrapper"></div>').append(i)),a()},this.onSettingsChanged=function(e){e.min_value!=o.min_value||e.max_value!=o.max_value||e.units!=o.units?(o=e,a()):o=e,n.html(e.title)},this.onCalculatedValueChanged=function(e,t){_.isUndefined(r)||r.refresh(Number(t))},this.onDispose=function(){},this.getHeight=function(){return 3},this.onSettingsChanged(e)}function i(e){var a=$('<h2 class="section-title"></h2>'),r=$('<div class="sparkline"></div>'),l=$("<div></div>"),h=e;this.render=function(e){$(e).append(a).append(r).append(l)},this.onSettingsChanged=function(e){if(h=e,a.html(_.isUndefined(e.title)?"":e.title),e.include_legend){for(var t=l,r=e.legend.split(","),n=$("<div class='sparkline-legend'></div>"),i=0;i<r.length;i++){var s=u[i%u.length],o=r[i];n.append("<div class='sparkline-legend-value'><span style='color:"+s+"'>&#9679;</span>"+o+"</div>")}t.empty().append(n),freeboard.addStyle(".sparkline-legend","margin:5px;"),freeboard.addStyle(".sparkline-legend-value","color:white; font:10px arial,san serif; float:left; overflow:hidden; width:50%;"),freeboard.addStyle(".sparkline-legend-value span","font-weight:bold; padding-right:5px;")}},this.onCalculatedValueChanged=function(e,t){h.legend?c(r,t,h.legend.split(",")):c(r,t)},this.onDispose=function(){},this.getHeight=function(){var e,t=0;return h.include_legend&&h.legend&&(4<(e=h.legend.split(",").length)?t=.5*Math.floor((e-1)/4):e&&(t=.5)),2+t},this.onSettingsChanged(e)}function s(e){var n,i,s,o,a=$('<div class="widget-big-text"></div>'),l=$("<div></div>");this.render=function(e){s=$(e).width(),o=$(e).height();var t=Math.min(s,o)/2-6,r=(n=Raphael($(e).get()[0],s,o)).circle(s/2,o/2,t);r.attr("stroke","#FF9900"),r.attr("stroke-width",3),(i=n.path(function(e){if(!e||e.length<2)return[];var t=[];t.push(["m",e[0],e[1]]);for(var r=2;r<e.length;r+=2)t.push(["l",e[r],e[r+1]]);return t.push(["z"]),t}([s/2,o/2-t+3,15,20,-30,0]))).attr("stroke-width",0),i.attr("fill","#fff"),$(e).append($('<div class="pointer-value"></div>').append(a).append(l))},this.onSettingsChanged=function(e){l.html(e.units)},this.onCalculatedValueChanged=function(e,t){"direction"==e?(_.isUndefined(i)||i.animate({transform:"r"+t+","+s/2+","+o/2},250,"bounce"),0):"value_text"==e&&a.html(t)},this.onDispose=function(){},this.getHeight=function(){return 4},this.onSettingsChanged(e)}function o(e){var t,r,n;function i(){r&&(clearInterval(r),r=null)}function s(){var e;t&&n&&(e=n+(-1==n.indexOf("?")?"?":"&")+Date.now(),$(t).css({"background-image":"url("+e+")"}))}this.render=function(e){$(e).css({width:"100%",height:"100%","background-size":"cover","background-position":"center"}),t=e},this.onSettingsChanged=function(e){i(),e.refresh&&0<e.refresh&&(r=setInterval(s,1e3*Number(e.refresh)))},this.onCalculatedValueChanged=function(e,t){"src"==e&&(n=t),s()},this.onDispose=function(){i()},this.getHeight=function(){return 4},this.onSettingsChanged(e)}function a(e){var r,n,t=$('<h2 class="section-title"></h2>'),i=$('<div class="indicator-text"></div>'),s=$('<div class="indicator-light"></div>'),o=e,a=!1;function l(){s.toggleClass("on",a),a?i.text(_.isUndefined(r)?_.isUndefined(o.on_text)?"":o.on_text:r):i.text(_.isUndefined(n)?_.isUndefined(o.off_text)?"":o.off_text:n)}this.render=function(e){$(e).append(t).append(s).append(i)},this.onSettingsChanged=function(e){o=e,t.html(_.isUndefined(e.title)?"":e.title),l()},this.onCalculatedValueChanged=function(e,t){"value"==e&&(a=Boolean(t)),"on_text"==e&&(r=t),"off_text"==e&&(n=t),l()},this.onDispose=function(){},this.getHeight=function(){return 1},this.onSettingsChanged(e)}function l(e){var r,n,i={};function s(){var e;r&&n&&i.lat&&i.lon&&(e=new google.maps.LatLng(i.lat,i.lon),n.setPosition(e),r.panTo(e))}this.render=function(t){function e(){var e={zoom:13,center:new google.maps.LatLng(37.235,-115.811111),disableDefaultUI:!0,draggable:!1,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#2a2a2a"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]}]};r=new google.maps.Map(t,e),google.maps.event.addDomListener(t,"mouseenter",function(e){e.cancelBubble=!0,r.hover||(r.hover=!0,r.setOptions({zoomControl:!0}))}),google.maps.event.addDomListener(t,"mouseleave",function(e){r.hover&&(r.setOptions({zoomControl:!1}),r.hover=!1)}),n=new google.maps.Marker({map:r}),s()}window.google&&window.google.maps?e():(window.gmap_initialize=e,head.js("https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=gmap_initialize"))},this.onSettingsChanged=function(e){0},this.onCalculatedValueChanged=function(e,t){"lat"==e?i.lat=t:"lon"==e&&(i.lon=t),s()},this.onDispose=function(){},this.getHeight=function(){return 4},this.onSettingsChanged(e)}function f(e){var r=$('<div class="html-widget"></div>'),t=e;this.render=function(e){$(e).append(r)},this.onSettingsChanged=function(e){t=e},this.onCalculatedValueChanged=function(e,t){"html"==e&&r.html(t)},this.onDispose=function(){},this.getHeight=function(){return Number(t.height)},this.onSettingsChanged(e)}var e=freeboard.getStyleString("values"),p=(freeboard.addStyle(".widget-big-text",e+"font-size:75px;"),freeboard.addStyle(".tw-display","width: 100%; height:100%; display:table; table-layout:fixed;"),freeboard.addStyle(".tw-tr","display:table-row;"),freeboard.addStyle(".tw-tg","display:table-row-group;"),freeboard.addStyle(".tw-tc","display:table-caption;"),freeboard.addStyle(".tw-td","display:table-cell;"),freeboard.addStyle(".tw-value",e+"overflow: hidden;display: inline-block;text-overflow: ellipsis;"),freeboard.addStyle(".tw-unit","display: inline-block;padding-left: 10px;padding-bottom: 1.1em;vertical-align: bottom;"),freeboard.addStyle(".tw-value-wrapper","position: relative;vertical-align: middle;height:100%;"),freeboard.addStyle(".tw-sparkline","height:20px;"),freeboard.loadWidgetPlugin({type_name:"text_widget",display_name:"Text",external_scripts:["plugins/thirdparty/jquery.sparkline.min.js"],settings:[{name:"title",display_name:"Title",type:"text"},{name:"size",display_name:"Size",type:"option",options:[{name:"Regular",value:"regular"},{name:"Big",value:"big"}]},{name:"value",display_name:"Value",type:"calculated"},{name:"sparkline",display_name:"Include Sparkline",type:"boolean"},{name:"animate",display_name:"Animate Value Changes",type:"boolean",default_value:!0},{name:"units",display_name:"Units",type:"text"}],newInstance:function(e,t){t(new r(e))}}),0);freeboard.addStyle(".gauge-widget-wrapper","width: 100%;text-align: center;"),freeboard.addStyle(".gauge-widget","width:200px;height:160px;display:inline-block;"),freeboard.loadWidgetPlugin({type_name:"gauge",display_name:"Gauge",external_scripts:["plugins/thirdparty/raphael.2.1.0.min.js","plugins/thirdparty/justgage.1.0.1.js"],settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated"},{name:"units",display_name:"Units",type:"text"},{name:"min_value",display_name:"Minimum",type:"text",default_value:0},{name:"max_value",display_name:"Maximum",type:"text",default_value:100}],newInstance:function(e,t){t(new n(e))}}),freeboard.addStyle(".sparkline","width:100%;height: 75px;"),freeboard.loadWidgetPlugin({type_name:"sparkline",display_name:"Sparkline",external_scripts:["plugins/thirdparty/jquery.sparkline.min.js"],settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated",multi_input:"true"},{name:"include_legend",display_name:"Include Legend",type:"boolean"},{name:"legend",display_name:"Legend",type:"text",description:"Comma-separated for multiple sparklines"}],newInstance:function(e,t){t(new i(e))}}),freeboard.addStyle("div.pointer-value","position:absolute;height:95px;margin: auto;top: 0px;bottom: 0px;width: 100%;text-align:center;"),freeboard.loadWidgetPlugin({type_name:"pointer",display_name:"Pointer",external_scripts:["plugins/thirdparty/raphael.2.1.0.min.js"],settings:[{name:"direction",display_name:"Direction",type:"calculated",description:"In degrees"},{name:"value_text",display_name:"Value Text",type:"calculated"},{name:"units",display_name:"Units",type:"text"}],newInstance:function(e,t){t(new s(e))}}),freeboard.loadWidgetPlugin({type_name:"picture",display_name:"Picture",fill_size:!0,settings:[{name:"src",display_name:"Image URL",type:"calculated"},{type:"number",display_name:"Refresh every",name:"refresh",suffix:"seconds",description:"Leave blank if the image doesn't need to be refreshed"}],newInstance:function(e,t){t(new o(e))}}),freeboard.addStyle(".indicator-light","border-radius:50%;width:22px;height:22px;border:2px solid #3d3d3d;margin-top:5px;float:left;background-color:#222;margin-right:10px;"),freeboard.addStyle(".indicator-light.on","background-color:#FFC773;box-shadow: 0px 0px 15px #FF9900;border-color:#FDF1DF;"),freeboard.addStyle(".indicator-text","margin-top:10px;"),freeboard.loadWidgetPlugin({type_name:"indicator",display_name:"Indicator Light",settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated"},{name:"on_text",display_name:"On Text",type:"calculated"},{name:"off_text",display_name:"Off Text",type:"calculated"}],newInstance:function(e,t){t(new a(e))}}),freeboard.addStyle(".gm-style-cc a","text-shadow:none;"),freeboard.loadWidgetPlugin({type_name:"google_map",display_name:"Google Map",fill_size:!0,settings:[{name:"lat",display_name:"Latitude",type:"calculated"},{name:"lon",display_name:"Longitude",type:"calculated"}],newInstance:function(e,t){t(new l(e))}}),freeboard.addStyle(".html-widget","white-space:normal;width:100%;height:100%");freeboard.loadWidgetPlugin({type_name:"html",display_name:"HTML",fill_size:!0,settings:[{name:"html",display_name:"HTML",type:"calculated",description:"Can be literal HTML, or javascript that outputs HTML."},{name:"height",display_name:"Height Blocks",type:"number",default_value:4,description:"A height block is around 60 pixels"}],newInstance:function(e,t){t(new f(e))}})}(),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).mqtt=e()}(function(){return function n(i,s,o){function a(t,e){if(!s[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=s[t]={exports:{}},i[t][0].call(r.exports,function(e){return a(i[t][1][e]||e)},r,r.exports,n,i,s,o)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(x,C,e){!function(r,k){!function(){"use strict";const n=x("events").EventEmitter,s=x("./store"),o=x("./topic-alias-recv"),i=x("./topic-alias-send"),a=x("mqtt-packet"),l=x("./default-message-id-provider"),h=x("readable-stream").Writable;var e=x("inherits");const t=x("reinterval"),u=x("rfdc/default"),c=x("./validations"),f=x("xtend"),p=x("debug")("mqttjs:client"),d=r?r.nextTick:function(e){setTimeout(e,0)},g=k.setImmediate||function(e){d(e)},m={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},y=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],b={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function v(e,t){let r;if(t.properties&&(r=t.properties.topicAlias),0===t.topic.toString().length){if(void 0===r)return new Error("Unregistered Topic Alias");if(void 0===(e=e.topicAliasSend.getTopicByAlias(r)))return new Error("Unregistered Topic Alias");t.topic=e}r&&delete t.properties.topicAlias}function _(e,t,r){p("sendPacket :: packet: %O",t),p("sendPacket :: emitting `packetsend`"),e.emit("packetsend",t),p("sendPacket :: writing to stream");t=a.writeToStream(t,e.stream,e.options);p("sendPacket :: writeToStream result %s",t),!t&&r&&r!==S?(p("sendPacket :: handle events on `drain` once through callback."),e.stream.once("drain",r)):r&&(p("sendPacket :: invoking cb"),r())}function w(t,r,n,i){p("storeAndSend :: store packet with cmd %s to outgoingStore",r.cmd);let e=r;var s;if("publish"===e.cmd&&(e=u(r),s=v(t,e)))return n&&n(s);t.outgoingStore.put(e,function(e){if(e)return n&&n(e);i(),_(t,r,n)})}function S(e){p("nop ::",e)}function E(e,t){let r;const i=this;if(!(this instanceof E))return new E(e,t);for(r in this.options=t||{},m)void 0===this.options[r]?this.options[r]=m[r]:this.options[r]=t[r];p("MqttClient :: options.protocol",t.protocol),p("MqttClient :: options.protocolVersion",t.protocolVersion),p("MqttClient :: options.username",t.username),p("MqttClient :: options.keepalive",t.keepalive),p("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),p("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),p("MqttClient :: options.topicAliasMaximum",t.topicAliasMaximum),this.options.clientId="string"==typeof t.clientId?t.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),p("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=e,this.messageIdProvider=void 0===this.options.messageIdProvider?new l:this.options.messageIdProvider,this.outgoingStore=t.outgoingStore||new s,this.incomingStore=t.incomingStore||new s,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,0<t.topicAliasMaximum&&(65535<t.topicAliasMaximum?p("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new o(t.topicAliasMaximum)),this.on("connect",function(){const e=this.queue;p("connect :: sending queued packets"),function t(){const r=e.shift();p("deliver :: entry %o",r);var n;if(r){n=r.packet,p("deliver :: call _sendPacket for %o",n);let e=!0;(e=!(n.messageId&&0!==n.messageId&&!i.messageIdProvider.register(n.messageId))&&e)?i._sendPacket(n,function(e){r.cb&&r.cb(e),t()}):(p("messageId: %d has already used. The message is skipped and removed.",n.messageId),t())}else i._resubscribe()}()}),this.on("close",function(){p("close :: connected set to `false`"),this.connected=!1,p("close :: clearing connackTimer"),clearTimeout(this.connackTimer),p("close :: clearing ping timer"),null!==i.pingTimer&&(i.pingTimer.clear(),i.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),p("close :: calling _setupReconnect"),this._setupReconnect()}),n.call(this),p("MqttClient :: setting up stream"),this._setupStream()}e(E,n),E.prototype._setupStream=function(){const r=this;var e=new h;const n=a.parser(this.options);let i=null;const t=[];function s(){var e;t.length?d(o):(e=i,i=null,e())}function o(){p("work :: getting next packet in queue");var e=t.shift();e?(p("work :: packet pulled from queue"),r._handlePacket(e,s)):(p("work :: no packets in queue"),e=i,i=null,p("work :: done flag is %s",!!e),e&&e())}p("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),p("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",function(e){p("parser :: on packet push to packets array."),t.push(e)}),e._write=function(e,t,r){i=r,p("writable stream :: parsing buffer"),n.parse(e),o()},p("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",function(e){p("streamErrorHandler :: error",e.message),y.includes(e.code)?(p("streamErrorHandler :: emitting error"),r.emit("error",e)):S(e)}),this.stream.on("close",function(){var t;p("(%s)stream :: on close",r.options.clientId),(t=r.outgoing)&&(p("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(t).forEach(function(e){t[e].volatile&&"function"==typeof t[e].cb&&(t[e].cb(new Error("Connection closed")),delete t[e])})),p("stream: emit close to MqttClient"),r.emit("close")}),p("_setupStream: sending packet `connect`");e=Object.create(this.options);if(e.cmd="connect",this.topicAliasRecv&&(e.properties||(e.properties={}),this.topicAliasRecv)&&(e.properties.topicAliasMaximum=this.topicAliasRecv.max),_(this,e),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return r.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&_(this,f({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){p("!!connectTimeout hit!! Calling _cleanUp with force `true`"),r._cleanUp(!0)},this.options.connectTimeout)},E.prototype._handlePacket=function(e,t){var r=this.options;if(5===r.protocolVersion&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<e.length)return this.emit("error",new Error("exceeding packets size "+e.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(p("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"auth":this._handleAuth(e),t();break;case"pingresp":this._handlePingresp(e),t();break;case"disconnect":this._handleDisconnect(e),t()}},E.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e&&e!==S?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},E.prototype.publish=function(r,n,i,s){p("publish :: message `%s` to topic `%s`",n,r);const o=this.options;"function"==typeof i&&(s=i,i=null);if(i=f({qos:0,retain:!1,dup:!1},i),!this._checkDisconnecting(s)){const a=this;var e=function(){let e=0;if((1===i.qos||2===i.qos)&&null===(e=a._nextId()))return p("No messageId left"),!1;var t={cmd:"publish",topic:r,payload:n,qos:i.qos,retain:i.retain,messageId:e,dup:i.dup};switch(5===o.protocolVersion&&(t.properties=i.properties),p("publish :: qos",i.qos),i.qos){case 1:case 2:a.outgoing[t.messageId]={volatile:!1,cb:s||S},p("MqttClient:publish: packet cmd: %s",t.cmd),a._sendPacket(t,void 0,i.cbStorePut);break;default:p("MqttClient:publish: packet cmd: %s",t.cmd),a._sendPacket(t,s,i.cbStorePut)}return!0};(this._storeProcessing||0<this._storeProcessingQueue.length||!e())&&this._storeProcessingQueue.push({invoke:e,cbStorePut:i.cbStorePut,callback:s})}return this},E.prototype.subscribe=function(){const n=this;var t=new Array(arguments.length);for(let e=0;e<arguments.length;e++)t[e]=arguments[e];const i=[];let r=t.shift();const s=r.resubscribe;let o=t.pop()||S,a=t.pop();const l=this.options.protocolVersion;delete r.resubscribe,"string"==typeof r&&(r=[r]),"function"!=typeof o&&(a=o,o=S);var e=c.validateTopics(r);return null!==e?g(o,new Error("Invalid topic "+e)):this._checkDisconnecting(o)?p("subscribe: discconecting true"):(e={qos:0},5===l&&(e.nl=!1,e.rap=!1,e.rh=0),a=f(e,a),Array.isArray(r)?r.forEach(function(e){p("subscribe: array topic %s",e),(!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,e)||n._resubscribeTopics[e].qos<a.qos||s)&&(e={topic:e,qos:a.qos},5===l&&(e.nl=a.nl,e.rap=a.rap,e.rh=a.rh,e.properties=a.properties),p("subscribe: pushing topic `%s` and qos `%s` to subs list",e.topic,e.qos),i.push(e))}):Object.keys(r).forEach(function(e){var t;p("subscribe: object topic %s",e),(!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,e)||n._resubscribeTopics[e].qos<r[e].qos||s)&&(t={topic:e,qos:r[e].qos},5===l&&(t.nl=r[e].nl,t.rap=r[e].rap,t.rh=r[e].rh,t.properties=a.properties),p("subscribe: pushing `%s` to subs list",t),i.push(t))}),i.length?(e=function(){var e=n._nextId();if(null===e)return p("No messageId left"),!1;e={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:e};if(a.properties&&(e.properties=a.properties),n.options.resubscribe){p("subscribe :: resubscribe true");const r=[];i.forEach(function(e){var t;0<n.options.reconnectPeriod&&(t={qos:e.qos},5===l&&(t.nl=e.nl||!1,t.rap=e.rap||!1,t.rh=e.rh||0,t.properties=e.properties),n._resubscribeTopics[e.topic]=t,r.push(e.topic))}),n.messageIdToTopic[e.messageId]=r}return n.outgoing[e.messageId]={volatile:!0,cb:function(e,t){if(!e){var r=t.granted;for(let e=0;e<r.length;e+=1)i[e].qos=r[e]}o(e,i)}},p("subscribe :: call _sendPacket"),n._sendPacket(e),!0},(this._storeProcessing||0<this._storeProcessingQueue.length||!e())&&this._storeProcessingQueue.push({invoke:e,callback:o})):o(null,[])),this},E.prototype.unsubscribe=function(){const t=this;var r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];let n=r.shift(),i=r.pop()||S,s=r.pop();"string"==typeof n&&(n=[n]),"function"!=typeof i&&(s=i,i=S);var e=c.validateTopics(n);return null!==e?g(i,new Error("Invalid topic "+e)):!t._checkDisconnecting(i)&&(e=function(){var e=t._nextId();return null===e?(p("No messageId left"),!1):(e={cmd:"unsubscribe",qos:1,messageId:e},"string"==typeof n?e.unsubscriptions=[n]:Array.isArray(n)&&(e.unsubscriptions=n),t.options.resubscribe&&e.unsubscriptions.forEach(function(e){delete t._resubscribeTopics[e]}),"object"==typeof s&&s.properties&&(e.properties=s.properties),t.outgoing[e.messageId]={volatile:!0,cb:i},p("unsubscribe: call _sendPacket"),t._sendPacket(e),!0)},this._storeProcessing||0<this._storeProcessingQueue.length||!e())&&this._storeProcessingQueue.push({invoke:e,callback:i}),this},E.prototype.end=function(e,t,r){const n=this;function i(){p("end :: (%s) :: finish :: calling _cleanUp with force %s",n.options.clientId,e),n._cleanUp(e,()=>{p("end :: finish :: calling process.nextTick on closeStores"),d(function(){p("end :: closeStores: closing incoming and outgoing stores"),n.disconnected=!0,n.incomingStore.close(function(t){n.outgoingStore.close(function(e){p("end :: closeStores: emitting end"),n.emit("end"),r&&(e=t||e,p("end :: closeStores: invoking callback with args"),r(e))})}),n._deferredReconnect&&n._deferredReconnect()}.bind(n))},t)}return p("end :: (%s)",this.options.clientId),null!=e&&"boolean"==typeof e||(r=t||S,t=e,e=!1,"object"!=typeof t&&(r=t,t=null,"function"!=typeof r)&&(r=S)),"object"!=typeof t&&(r=t,t=null),p("end :: cb? %s",!!r),r=r||S,this.disconnecting?r():(this._clearReconnect(),this.disconnecting=!0,!e&&0<Object.keys(this.outgoing).length?(p("end :: (%s) :: calling finish in 10ms once outgoing is empty",n.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(p("end :: (%s) :: immediately calling finish",n.options.clientId),i())),this},E.prototype.removeOutgoingMessage=function(e){const t=this.outgoing[e]?this.outgoing[e].cb:null;return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},E.prototype.reconnect=function(e){p("client reconnect");const t=this;function r(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new s,t.outgoingStore=t.options.outgoingStore||new s,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()}return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this},E.prototype._reconnect=function(){p("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),p("client already connected. disconnecting first.")):(p("_reconnect: calling _setupStream"),this._setupStream())},E.prototype._setupReconnect=function(){const e=this;!e.disconnecting&&!e.reconnectTimer&&0<e.options.reconnectPeriod?(this.reconnecting||(p("_setupReconnect :: emit `offline` state"),this.emit("offline"),p("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),p("_setupReconnect :: setting reconnectTimer for %d ms",e.options.reconnectPeriod),e.reconnectTimer=setInterval(function(){p("reconnectTimer :: reconnect triggered!"),e._reconnect()},e.options.reconnectPeriod)):p("_setupReconnect :: doing nothing...")},E.prototype._clearReconnect=function(){p("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},E.prototype._cleanUp=function(e,t){var r,n=arguments[2];t&&(p("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),p("_cleanUp :: forced? %s",e),e?(0===this.options.reconnectPeriod&&this.options.clean&&(r=this.outgoing)&&(p("flush: queue exists? %b",!!r),Object.keys(r).forEach(function(e){"function"==typeof r[e].cb&&(r[e].cb(new Error("Connection closed")),delete r[e])})),p("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy()):(e=f({cmd:"disconnect"},n),p("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,g.bind(null,this.stream.end.bind(this.stream)))),this.disconnecting||(p("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(p("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(p("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())},E.prototype._sendPacket=function(e,t,r){p("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||S,t=t||S;var n=function(e,t){let r;if(5===e.options.protocolVersion&&"publish"===t.cmd){t.properties&&(r=t.properties.topicAlias);var n=t.topic.toString();if(e.topicAliasSend)if(r){if(0!==n.length&&(p("applyTopicAlias :: register topic: %s - alias: %d",n,r),!e.topicAliasSend.put(n,r)))return p("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,r),new Error("Sending Topic Alias out of range")}else 0!==n.length&&(e.options.autoAssignTopicAlias?(r=e.topicAliasSend.getAliasByTopic(n))?(t.topic="",t.properties={...t.properties,topicAlias:r},p("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",n,r)):(r=e.topicAliasSend.getLruAlias(),e.topicAliasSend.put(n,r),t.properties={...t.properties,topicAlias:r},p("applyTopicAlias :: auto assign topic: %s - alias: %d",n,r)):e.options.autoUseTopicAlias&&(r=e.topicAliasSend.getAliasByTopic(n))&&(t.topic="",t.properties={...t.properties,topicAlias:r},p("applyTopicAlias :: auto use topic: %s - alias: %d",n,r)));else if(r)return p("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,r),new Error("Sending Topic Alias out of range")}}(this,e);if(n)t(n);else{if(!this.connected)return"auth"===e.cmd?(this._shiftPingInterval(),void _(this,e,t)):(p("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void w(this,e,t,r);default:return void _(this,e,t)}switch(e.qos){case 2:case 1:w(this,e,t,r);break;default:_(this,e,t)}p("_sendPacket :: (%s) ::  end",this.options.clientId)}},E.prototype._storePacket=function(e,t,r){p("_storePacket :: packet: %o",e),p("_storePacket :: cb? %s",!!t),r=r||S;let n=e;if("publish"===n.cmd){e=v(this,n=u(e));if(e)return t&&t(e)}0===(n.qos||0)&&this.queueQoSZero||"publish"!==n.cmd?this.queue.push({packet:n,cb:t}):0<n.qos?(t=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,function(e){if(e)return t&&t(e);r()})):t&&t(new Error("No connection to broker"))},E.prototype._setupPingTimer=function(){p("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=t(function(){e._checkPing()},1e3*this.options.keepalive))},E.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},E.prototype._checkPing=function(){p("_checkPing :: checking ping..."),this.pingResp?(p("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(p("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},E.prototype._handlePingresp=function(){this.pingResp=!0},E.prototype._handleConnack=function(e){p("_handleConnack");var t=this.options,r=5===t.protocolVersion?e.reasonCode:e.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,e.properties){if(e.properties.topicAliasMaximum){if(65535<e.properties.topicAliasMaximum)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));0<e.properties.topicAliasMaximum&&(this.topicAliasSend=new i(e.properties.topicAliasMaximum))}e.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=e.properties.serverKeepAlive,this._shiftPingInterval()),e.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=e.properties.maximumPacketSize)}0===r?(this.reconnecting=!1,this._onConnect(e)):0<r&&((t=new Error("Connection refused: "+b[r])).code=r,this.emit("error",t))},E.prototype._handleAuth=function(e){var t=this.options.protocolVersion;const r=5===t?e.reasonCode:e.returnCode;if(5!==t)(t=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+t)).code=r,this.emit("error",t);else{const n=this;this.handleAuth(e,function(e,t){e?n.emit("error",e):24===r?(n.reconnecting=!1,n._sendPacket(t)):(t=new Error("Connection refused: "+b[r]),e.code=r,n.emit("error",t))})}},E.prototype.handleAuth=function(e,t){t()},E.prototype._handlePublish=function(r,n){p("_handlePublish: packet %o",r),n=void 0!==n?n:S;let i=r.topic.toString();const s=r.payload;var e=r.qos;const o=r.messageId,a=this;var t=this.options;const l=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let e;if(void 0!==(e=r.properties?r.properties.topicAlias:e))if(0===i.length){if(!(0<e&&e<=65535))return p("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));var h=this.topicAliasRecv.getTopicByAlias(e);if(!h)return p("_handlePublish :: unregistered topic alias. alias: %d",e),void this.emit("error",new Error("Received unregistered Topic Alias"));i=h,p("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,e)}else{if(!this.topicAliasRecv.put(i,e))return p("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));p("_handlePublish :: registered topic: %s - alias: %d",i,e)}}switch(p("_handlePublish: qos %d",e),e){case 2:t.customHandleAcks(i,s,r,function(e,t){return e instanceof Error||(t=e,e=null),e?a.emit("error",e):-1===l.indexOf(t)?a.emit("error",new Error("Wrong reason code for pubrec")):void(t?a._sendPacket({cmd:"pubrec",messageId:o,reasonCode:t},n):a.incomingStore.put(r,function(){a._sendPacket({cmd:"pubrec",messageId:o},n)}))});break;case 1:t.customHandleAcks(i,s,r,function(e,t){return e instanceof Error||(t=e,e=null),e?a.emit("error",e):-1===l.indexOf(t)?a.emit("error",new Error("Wrong reason code for puback")):(t||a.emit("message",i,s,r),void a.handleMessage(r,function(e){if(e)return n&&n(e);a._sendPacket({cmd:"puback",messageId:o,reasonCode:t},n)}))});break;case 0:this.emit("message",i,s,r),this.handleMessage(r,n);break;default:p("_handlePublish: unknown QoS. Doing nothing.")}},E.prototype.handleMessage=function(e,t){t()},E.prototype._handleAck=function(t){var r,n=t.messageId,e=t.cmd,i=this.outgoing[n]?this.outgoing[n].cb:null;const s=this;let o;if(i){switch(p("_handleAck :: packet type",e),e){case"pubcomp":case"puback":var a=t.reasonCode;a&&0<a&&16!==a&&((o=new Error("Publish error: "+b[a])).code=a,i(o,t)),delete this.outgoing[n],this.outgoingStore.del(t,i),this.messageIdProvider.deallocate(n),this._invokeStoreProcessingQueue();break;case"pubrec":var a={cmd:"pubrel",qos:2,messageId:n},l=t.reasonCode;l&&0<l&&16!==l?((o=new Error("Publish error: "+b[l])).code=l,i(o,t)):this._sendPacket(a);break;case"suback":delete this.outgoing[n],this.messageIdProvider.deallocate(n);for(let e=0;e<t.granted.length;e++)0!=(128&t.granted[e])&&(r=this.messageIdToTopic[n])&&r.forEach(function(e){delete s._resubscribeTopics[e]});this._invokeStoreProcessingQueue(),i(null,t);break;case"unsuback":delete this.outgoing[n],this.messageIdProvider.deallocate(n),this._invokeStoreProcessingQueue(),i(null);break;default:s.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else p("_handleAck :: Server sent an ack in error. Ignoring.")},E.prototype._handlePubrel=function(e,r){p("handling pubrel packet"),r=void 0!==r?r:S;var t=e.messageId;const n=this,i={cmd:"pubcomp",messageId:t};n.incomingStore.get(e,function(e,t){e?n._sendPacket(i,r):(n.emit("message",t.topic,t.payload,t),n.handleMessage(t,function(e){if(e)return r(e);n.incomingStore.del(t,S),n._sendPacket(i,r)}))})},E.prototype._handleDisconnect=function(e){this.emit("disconnect",e)},E.prototype._nextId=function(){return this.messageIdProvider.allocate()},E.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},E.prototype._resubscribe=function(){p("_resubscribe");var t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&0<t.length)if(this.options.resubscribe)if(5===this.options.protocolVersion){p("_resubscribe: protocolVersion 5");for(let e=0;e<t.length;e++){var r={};r[t[e]]=this._resubscribeTopics[t[e]],r.resubscribe=!0,this.subscribe(r,{properties:r[t[e]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},E.prototype._onConnect=function(s){if(this.disconnected)this.emit("connect",s);else{const o=this;this.connackPacket=s,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,!function r(){let t=o.outgoingStore.createStream();function n(){o._storeProcessing=!1,o._packetIdsDuringStoreProcessing={}}function i(){t.destroy(),t=null,o._flushStoreProcessingQueue(),n()}o.once("close",i),t.on("error",function(e){n(),o._flushStoreProcessingQueue(),o.removeListener("close",i),o.emit("error",e)}),t.on("end",function(){let e=!0;for(const t in o._packetIdsDuringStoreProcessing)if(!o._packetIdsDuringStoreProcessing[t]){e=!1;break}e?(n(),o.removeListener("close",i),o._invokeAllStoreProcessingQueue(),o.emit("connect",s)):r()}),function n(){if(t){o._storeProcessing=!0;var e=t.read(1);let r;e?o._packetIdsDuringStoreProcessing[e.messageId]?n():o.disconnecting||o.reconnectTimer?t.destroy&&t.destroy():(r=o.outgoing[e.messageId]?o.outgoing[e.messageId].cb:null,o.outgoing[e.messageId]={volatile:!1,cb:function(e,t){r&&r(e,t),n()}},o._packetIdsDuringStoreProcessing[e.messageId]=!0,o.messageIdProvider.register(e.messageId)?o._sendPacket(e):p("messageId: %d has already used.",e.messageId)):t.once("readable",n)}}()}()}},E.prototype._invokeStoreProcessingQueue=function(){if(0<this._storeProcessingQueue.length){var e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1},E.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},E.prototype._flushStoreProcessingQueue=function(){for(const e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},C.exports=E}.call(this)}.call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:57,debug:18,events:22,inherits:24,"mqtt-packet":47,"readable-stream":76,reinterval:77,"rfdc/default":78,xtend:88}],2:[function(e,t,r){"use strict";const i=e("buffer")["Buffer"],s=e("readable-stream").Transform,o=e("duplexify");let a,l,h,u=!1;t.exports=function(e,t){var r,n;if(t.hostname=t.hostname||t.host,t.hostname)return r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",(n=t).hostname||(n.hostname="localhost"),n.path||(n.path="/"),n.wsOptions||(n.wsOptions={}),n=function(e,t){var r="alis"===e.protocol?"wss":"ws";let n=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(n=r+"://"+e.hostname+":"+e.port+e.path),n="function"==typeof e.transformWsUrl?e.transformWsUrl(n,e,t):n}(t,e),(a=t.my).connectSocket({url:n,protocols:r}),l=((e=new s)._write=function(e,t,r){a.sendSocketMessage({data:e.buffer,success:function(){r()},fail:function(){r(new Error)}})},e._flush=function(e){a.closeSocket({success:function(){e()}})},e),h=o.obj(),u||(u=!0,a.onSocketOpen(function(){h.setReadable(l),h.setWritable(l),h.emit("connect")}),a.onSocketMessage(function(e){if("string"==typeof e.data){var t=i.from(e.data,"base64");l.push(t)}else{const r=new FileReader;r.addEventListener("load",function(){let e=r.result;e=e instanceof ArrayBuffer?i.from(e):i.from(e,"utf8"),l.push(e)}),r.readAsArrayBuffer(e.data)}}),a.onSocketClose(function(){h.end(),h.destroy()}),a.onSocketError(function(e){h.destroy(e)})),h;throw new Error("Could not determine host. Specify host manually.")}},{buffer:17,duplexify:20,"readable-stream":76}],3:[function(e,t,r){"use strict";const n=e("net"),i=e("debug")("mqttjs:tcp");t.exports=function(e,t){t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost";var r=t.port,t=t.hostname;return i("port %d and host %s",r,t),n.createConnection(r,t)}},{debug:18,net:16}],4:[function(e,t,r){"use strict";const i=e("tls"),s=e("net"),o=e("debug")("mqttjs:tls");t.exports=function(t,r){r.port=r.port||8883,r.host=r.hostname||r.host||"localhost",0===s.isIP(r.host)&&(r.servername=r.host),r.rejectUnauthorized=!1!==r.rejectUnauthorized,delete r.path,o("port %d host %s rejectUnauthorized %b",r.port,r.host,r.rejectUnauthorized);const n=i.connect(r);function e(e){r.rejectUnauthorized&&t.emit("error",e),n.end()}return n.on("secureConnect",function(){r.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",e)}),n.on("error",e),n}},{debug:18,net:16,tls:16}],5:[function(s,a,e){!function(i){!function(){"use strict";const g=s("buffer")["Buffer"],o=s("ws"),m=s("debug")("mqttjs:ws"),y=s("duplexify"),b=s("readable-stream").Transform,e=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],n=void 0!==i&&"browser"===i.title||"function"==typeof __webpack_require__;function v(e,t){let r=e.protocol+"://"+e.hostname+":"+e.port+e.path;return r="function"==typeof e.transformWsUrl?e.transformWsUrl(r,e,t):r}function _(t){const r=t;return t.hostname||(r.hostname="localhost"),t.port||("wss"===t.protocol?r.port=443:r.port=80),t.path||(r.path="/"),t.wsOptions||(r.wsOptions={}),n||"wss"!==t.protocol||e.forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,e)&&(r.wsOptions[e]=t[e])}),r}function t(e,t){m("streamBuilder");var r,n,t=_(t),e=v(t,e),i=(r=e,n=t,m("createWebSocket"),m("protocol: "+n.protocolId+" "+n.protocolVersion),i="MQIsdp"===n.protocolId&&3===n.protocolVersion?"mqttv3.1":"mqtt",m("creating new Websocket for url: "+r+" and protocol: "+i),r=new o(r,[i],n.wsOptions));const s=o.createWebSocketStream(i,t.wsOptions);return s.url=e,i.on("close",()=>{s.destroy()}),s}function r(e,t){m("browserStreamBuilder");let r;var n;const i=function(e){if((e=_(e)).hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var t=new URL(document.URL);e.hostname=t.hostname,e.port||(e.port=t.port)}return void 0===e.objectMode&&(e.objectMode=!(!0===e.binary||void 0===e.binary)),e}(t).browserBufferSize||524288,s=t.browserBufferTimeout||1e3,o=!t.objectMode,a=(e=e,n="MQIsdp"===(h=t).protocolId&&3===h.protocolVersion?"mqttv3.1":"mqtt",h=v(h,e),(e=new WebSocket(h,[n])).binaryType="arraybuffer",e),l=function(e,t,r){e=new b({objectModeMode:e.objectMode});return e._write=t,e._flush=r,e}(t,function e(t,r,n){a.bufferedAmount>i&&setTimeout(e,s,t,r,n);o&&"string"==typeof t&&(t=g.from(t,"utf8"));try{a.send(t)}catch(e){return n(e)}n()},function(e){a.close(),e()});t.objectMode||(l._writev=d),l.on("close",()=>{a.close()});var h=void 0!==a.addEventListener;function u(){r.setReadable(l),r.setWritable(l),r.emit("connect")}function c(){r.end(),r.destroy()}function f(e){r.destroy(e)}function p(e){let t=e.data;t=t instanceof ArrayBuffer?g.from(t):g.from(t,"utf8"),l.push(t)}function d(t,e){var r=new Array(t.length);for(let e=0;e<t.length;e++)"string"==typeof t[e].chunk?r[e]=g.from(t[e],"utf8"):r[e]=t[e].chunk;this._write(g.concat(r),"binary",e)}return a.readyState===a.OPEN?r=l:(r=r=y(void 0,void 0,t),t.objectMode||(r._writev=d),h?a.addEventListener("open",u):a.onopen=u),r.socket=a,h?(a.addEventListener("close",c),a.addEventListener("error",f),a.addEventListener("message",p)):(a.onclose=c,a.onerror=f,a.onmessage=p),r}n?a.exports=r:a.exports=t}.call(this)}.call(this,s("_process"))},{_process:57,buffer:17,debug:18,duplexify:20,"readable-stream":76,ws:87}],6:[function(e,t,r){"use strict";const s=e("buffer")["Buffer"],o=e("readable-stream").Transform,a=e("duplexify");let l,h,u;t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",n=((n=t).hostname||(n.hostname="localhost"),n.path||(n.path="/"),n.wsOptions||(n.wsOptions={}),function(e,t){var r="wxs"===e.protocol?"wss":"ws";let n=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(n=r+"://"+e.hostname+":"+e.port+e.path),n="function"==typeof e.transformWsUrl?e.transformWsUrl(n,e,t):n}(t,e));l=wx.connectSocket({url:n,protocols:[r]}),h=((t=new o)._write=function(e,t,r){l.send({data:e.buffer,success:function(){r()},fail:function(e){r(new Error(e))}})},t._flush=function(e){l.close({success:function(){e()}})},t),(u=a.obj())._destroy=function(e,t){l.close({success:function(){t&&t(e)}})};const i=u.destroy;return u.destroy=function(){u.destroy=i;const e=this;setTimeout(function(){l.close({fail:function(){e._destroy(new Error)}})},0)}.bind(u),l.onOpen(function(){u.setReadable(h),u.setWritable(h),u.emit("connect")}),l.onMessage(function(e){let t=e.data;t=t instanceof ArrayBuffer?s.from(t):s.from(t,"utf8"),h.push(t)}),l.onClose(function(){u.end(),u.destroy()}),l.onError(function(e){u.destroy(new Error(e.errMsg))}),u}},{buffer:17,duplexify:20,"readable-stream":76}],7:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}n.prototype.allocate=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},n.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},n.prototype.register=function(e){return!0},n.prototype.deallocate=function(e){},n.prototype.clear=function(){},t.exports=n},{}],8:[function(e,t,r){"use strict";const n=e("xtend"),i=e("readable-stream").Readable,s={objectMode:!0},o={clean:!0};function a(e){if(!(this instanceof a))return new a(e);this.options=e||{},this.options=n(o,e),this._inflights=new Map}a.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},a.prototype.createStream=function(){var e=new i(s);const r=[];let t=!1,n=0;return this._inflights.forEach(function(e,t){r.push(e)}),e._read=function(){!t&&n<r.length?this.push(r[n++]):this.push(null)},e.destroy=function(){if(!t){const e=this;t=!0,setTimeout(function(){e.emit("close")},0)}},e},a.prototype.del=function(e,t){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},a.prototype.get=function(e,t){return(e=this._inflights.get(e.messageId))?t(null,e):t&&t(new Error("missing packet")),this},a.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},t.exports=a},{"readable-stream":76,xtend:88}],9:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.aliasToTopic={},this.max=e}n.prototype.put=function(e,t){return!(0===t||t>this.max||(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,0))},n.prototype.getTopicByAlias=function(e){return this.aliasToTopic[e]},n.prototype.clear=function(){this.aliasToTopic={}},t.exports=n},{}],10:[function(e,t,r){"use strict";const n=e("lru-cache"),i=e("number-allocator").NumberAllocator;function s(e){if(!(this instanceof s))return new s(e);0<e&&(this.aliasToTopic=new n({max:e}),this.topicToAlias={},this.numberAllocator=new i(1,e),this.max=e,this.length=0)}s.prototype.put=function(e,t){var r;return!(0===t||t>this.max||((r=this.aliasToTopic.get(t))&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.length,0))},s.prototype.getTopicByAlias=function(e){return this.aliasToTopic.get(e)},s.prototype.getAliasByTopic=function(e){e=this.topicToAlias[e];return void 0!==e&&this.aliasToTopic.get(e),e},s.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},s.prototype.getLruAlias=function(){var e=this.numberAllocator.firstVacant();return e||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},t.exports=s},{"lru-cache":44,"number-allocator":53}],11:[function(e,t,r){"use strict";t.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!function(e){var t=e.split("/");for(let e=0;e<t.length;e++)if("+"!==t[e]){if("#"===t[e])return e===t.length-1;if(-1!==t[e].indexOf("+")||-1!==t[e].indexOf("#"))return}return 1}(t[e]))return t[e];return null}}},{}],12:[function(n,h,e){!function(r){!function(){"use strict";const i=n("../client");var e=n("../store");const s=n("url"),o=n("xtend"),a=n("debug")("mqttjs"),l={};function t(e,t){if(a("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=null),t=t||{},e){e=s.parse(e,!0);if(null!=e.port&&(e.port=Number(e.port)),null===(t=o(e,t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if((e=t).auth&&((r=e.auth.match(/^(.+):(.+)$/))?(e.username=r[1],e.password=r[2]):e.username=e.auth),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!l[t.protocol]){const n=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(e,t){return(!n||t%2!=0)&&"function"==typeof l[e]})[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);var r=new i(function(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol||t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),a("calling streambuilder for",t.protocol),l[t.protocol](e,t)},t);return r.on("error",function(){}),r}void 0!==r&&"browser"!==r.title||"function"!=typeof __webpack_require__?(l.mqtt=n("./tcp"),l.tcp=n("./tcp"),l.ssl=n("./tls"),l.tls=n("./tls"),l.mqtts=n("./tls")):(l.wx=n("./wx"),l.wxs=n("./wx"),l.ali=n("./ali"),l.alis=n("./ali")),l.ws=n("./ws"),l.wss=n("./ws"),h.exports=t,h.exports.connect=t,h.exports.MqttClient=i,h.exports.Store=e}.call(this)}.call(this,n("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:57,debug:18,url:83,xtend:88}],13:[function(e,t,r){"use strict";r.byteLength=function(e){var e=u(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(e){var t,r,n=u(e),i=n[0],n=n[1],s=new h(function(e,t){return 3*(e+t)/4-t}(i,n)),o=0,a=0<n?i-4:i;for(r=0;r<a;r+=4)t=l[e.charCodeAt(r)]<<18|l[e.charCodeAt(r+1)]<<12|l[e.charCodeAt(r+2)]<<6|l[e.charCodeAt(r+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=255&t;2===n&&(t=l[e.charCodeAt(r)]<<2|l[e.charCodeAt(r+1)]>>4,s[o++]=255&t);1===n&&(t=l[e.charCodeAt(r)]<<10|l[e.charCodeAt(r+1)]<<4|l[e.charCodeAt(r+2)]>>2,s[o++]=t>>8&255,s[o++]=255&t);return s},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],s=0,o=r-n;s<o;s+=16383)i.push(function(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(n));return i.join("")}(e,s,o<s+16383?o:s+16383));1==n?(t=e[r-1],i.push(a[t>>2]+a[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return i.join("")};for(var a=[],l=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)a[i]=n[i],l[n.charCodeAt(i)]=i;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],14:[function(e,t,r){"use strict";const c=e("buffer")["Buffer"],n=Symbol.for("BufferList");function i(e){if(!(this instanceof i))return new i(e);i._init.call(this,e)}i._init=function(e){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},i.prototype._new=function(e){return new i(e)},i.prototype._offset=function(t){if(0===t)return[0,0];let r=0;for(let e=0;e<this._bufs.length;e++){var n=r+this._bufs[e].length;if(t<n||e===this._bufs.length-1)return[e,t-r];r=n}},i.prototype._reverseOffset=function(e){var t=e[0];let r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},i.prototype.get=function(e){if(!(e>this.length||e<0))return e=this._offset(e),this._bufs[e[0]][e[1]]},i.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(t,e,r,n){if(("number"!=typeof n||n>this.length)&&(n=this.length),(r="number"!=typeof r||r<0?0:r)>=this.length)return t||c.alloc(0);if(n<=0)return t||c.alloc(0);var i=!!t,s=this._offset(r),o=n-r;let a=o,l=i&&e||0,h=s[1];if(0===r&&n===this.length){if(!i)return 1===this._bufs.length?this._bufs[0]:c.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,l),l+=this._bufs[e].length;return t}if(a<=this._bufs[s[0]].length-h)return i?this._bufs[s[0]].copy(t,e,h,h+a):this._bufs[s[0]].slice(h,h+a);i||(t=c.allocUnsafe(o));for(let e=s[0];e<this._bufs.length;e++){var u=this._bufs[e].length-h;if(!(a>u)){this._bufs[e].copy(t,l,h,h+a),l+=u;break}this._bufs[e].copy(t,l,h),l+=u,a-=u,h=h&&0}return t.length>l?t.slice(0,l):t},i.prototype.shallowSlice=function(e,t){var r;return t="number"!=typeof t?this.length:t,(e=e||0)<0&&(e+=this.length),t<0&&(t+=this.length),e===t?this._new():(e=this._offset(e),t=this._offset(t),r=this._bufs.slice(e[0],t[0]+1),0===t[1]?r.pop():r[r.length-1]=r[r.length-1].slice(0,t[1]),0!==e[1]&&(r[0]=r[0].slice(e[1])),this._new(r))},i.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},i.prototype.consume=function(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0))for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){var t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},i.prototype.append=function(t){if(null!=t)if(t.buffer)this._appendBuffer(c.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"==typeof t&&(t=t.toString()),this._appendBuffer(c.from(t));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=c.from([e]):"string"==typeof e?e=c.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=c.from(e.buffer,e.byteOffset,e.byteLength):c.isBuffer(e)||(e=c.from(e)),t=Number(t||0),(t=(t=isNaN(t)?0:t)<0?this.length+t:t)<0&&(t=0),0===e.length)return t>this.length?this.length:t;r=this._offset(t);let n=r[0],i=r[1];for(;n<this._bufs.length;n++){for(var s=this._bufs[n];i<s.length;)if(s.length-i>=e.length){var o=s.indexOf(e,i);if(-1!==o)return this._reverseOffset([n,o]);i=s.length-e.length+1}else{o=this._reverseOffset([n,i]);if(this._match(o,e))return o;i++}i=0}return-1},i.prototype._match=function(t,r){if(this.length-t<r.length)return!1;for(let e=0;e<r.length;e++)if(this.get(t+e)!==r[e])return!1;return!0};{const s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const o in s)!function(r){null===s[r]?i.prototype[r]=function(e,t){return this.slice(e,e+t)[r](0,t)}:i.prototype[r]=function(e=0){return this.slice(e,e+s[r])[r](0)}}(o)}i.prototype._isBufferList=function(e){return e instanceof i||i.isBufferList(e)},i.isBufferList=function(e){return null!=e&&e[n]},t.exports=i},{buffer:17}],15:[function(e,t,r){"use strict";const n=e("readable-stream").Duplex;var i=e("inherits");const s=e("./BufferList");function o(e){if(!(this instanceof o))return new o(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}s._init.call(this,e),n.call(this)}i(o,n),Object.assign(o.prototype,s.prototype),o.prototype._new=function(e){return new o(e)},o.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},o.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},o.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},o.prototype._isBufferList=function(e){return e instanceof o||e instanceof s||o.isBufferList(e)},o.isBufferList=s.isBufferList,t.exports=o,t.exports.BufferListStream=o,t.exports.BufferList=s},{"./BufferList":14,inherits:24,"readable-stream":76}],16:[function(e,t,r){},{}],17:[function(B,e,O){!function(e){!function(){"use strict";var k=B("base64-js"),s=B("ieee754"),t=(O.Buffer=c,O.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},O.INSPECT_MAX_BYTES=50,2147483647);function l(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=c.prototype,e}function c(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return o(e)}function n(e,t,r){if("string"==typeof e){var n=e,i=t;if(c.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return s=0|f(n,i),o=l(s),o=(n=o.write(n,i))!==s?o.slice(0,n):o;throw new TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)){var s=e,n=t,o=r;if(n<0||s.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<n+(o||0))throw new RangeError('"length" is outside of buffer bounds');return(s=void 0===n&&void 0===o?new Uint8Array(s):void 0===o?new Uint8Array(s,n):new Uint8Array(s,n,o)).__proto__=c.prototype,s}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return c.from(i,t,r);var a=function(e){{var t,r;if(c.isBuffer(e))return t=0|u(e.length),0!==(r=l(t)).length&&e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||P(e.length)?l(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function o(e){return i(e),l(e<0?0:0|u(e))}function h(e){for(var t=e.length<0?0:0|u(e.length),r=l(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function u(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return I(e).length;default:if(i)return n?-1:C(e).length;t=(""+t).toLowerCase(),i=!0}}function r(e,t,r){var n,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var s=this,o=t,a=r,l=s.length;(!a||a<0||l<a)&&(a=l);for(var h="",u=o=!o||o<0?0:o;u<a;++u)h+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(s[u]);return h;case"utf8":case"utf-8":return x(this,t,r);case"ascii":var c=this,l=t,f=r,p="";f=Math.min(c.length,f);for(var d=l;d<f;++d)p+=String.fromCharCode(127&c[d]);return p;case"latin1":case"binary":var g=this,o=t,m=r,y="";m=Math.min(g.length,m);for(var b=o;b<m;++b)y+=String.fromCharCode(g[b]);return y;case"base64":return v=this,n=r,0===(_=t)&&n===v.length?k.fromByteArray(v):k.fromByteArray(v.slice(_,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,_=r,w=this.slice(v,_),S="",E=0;E<w.length;E+=2)S+=String.fromCharCode(w[E]+256*w[E+1]);return S;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function a(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function p(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=P(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:d(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):d(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function d(e,t,r,n,i){var s=1,o=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o/=s=2,a/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i)for(var h=-1,u=r;u<o;u++)if(l(e,u)===l(t,-1===h?0:u-h)){if(u-(h=-1===h?u:h)+1===a)return h*s}else-1!==h&&(u-=u-h),h=-1;else for(u=r=o<r+a?o-a:r;0<=u;u--){for(var c=!0,f=0;f<a;f++)if(l(e,u+f)!==l(t,f)){c=!1;break}if(c)return u}return-1}function m(e,t,r,n){return T(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function y(e,t,r,n){return T(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i.push(r%256),i.push(n);return i}(t,e.length-r),e,r,n)}function x(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,l,h=e[i],u=null,c=239<h?4:223<h?3:191<h?2:1;if(i+c<=r)switch(c){case 1:h<128&&(u=h);break;case 2:128==(192&(s=e[i+1]))&&127<(l=(31&h)<<6|63&s)&&(u=l);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&2047<(l=(15&h)<<12|(63&s)<<6|63&o)&&(l<55296||57343<l)&&(u=l);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&65535<(l=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)&&l<1114112&&(u=l)}null===u?(u=65533,c=1):65535<u&&(n.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=c}var f=n,p=f.length;if(p<=b)return String.fromCharCode.apply(String,f);for(var d="",g=0;g<p;)d+=String.fromCharCode.apply(String,f.slice(g,g+=b));return d}O.kMaxLength=t,(c.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=n,c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(e,t,r){return t=t,r=r,i(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)},c.allocUnsafe=o,c.allocUnsafeSlow=o,c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(A(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=c.allocUnsafe(t),n=0,i=0;i<e.length;++i){var s=e[i];if(A(s,Uint8Array)&&(s=c.from(s)),!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)a(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)a(this,t,t+3),a(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)a(this,t,t+7),a(this,t+1,t+6),a(this,t+2,t+5),a(this,t+3,t+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):r.apply(this,arguments)},c.prototype.equals=function(e){if(c.isBuffer(e))return this===e||0===c.compare(this,e);throw new TypeError("Argument must be a Buffer")},c.prototype.inspect=function(){var e="",t=O.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,i){if(A(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),l=this.slice(n,i),h=e.slice(t,r),u=0;u<a;++u)if(l[u]!==h[u]){s=l[u],o=h[u];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return p(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return p(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var s,o,a,l=!1;;)switch(n){case"hex":var h=this,u=e,c=t,f=r,p=(c=Number(c)||0,h.length-c);(!f||p<(f=Number(f)))&&(f=p),(p=u.length)/2<f&&(f=p/2);for(var d=0;d<f;++d){var g=parseInt(u.substr(2*d,2),16);if(P(g))return d;h[c+d]=g}return d;case"utf8":case"utf-8":return p=t,a=r,T(C(e,(o=this).length-p),o,p,a);case"ascii":return m(this,e,t,r);case"latin1":case"binary":return m(this,e,t,r);case"base64":return o=this,a=t,s=r,T(I(e),o,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),l=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function g(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,r,n,i,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function _(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function w(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,4),s.write(e,t,r,n,23,4),r+4}function S(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,8),s.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=c.prototype,r},c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return e>>>=0,t||g(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||g(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||g(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||g(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||g(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=t,i=1,s=this[e+--n];0<n&&(i*=256);)s+=this[e+--n]*i;return(i*=128)<=s&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return e>>>=0,t||g(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||g(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},c.prototype.readInt16BE=function(e,t){e>>>=0,t||g(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||g(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||g(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return e>>>=0,t||g(e,4,this.length),s.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||g(e,4,this.length),s.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||g(e,8,this.length),s.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||g(e,8,this.length),s.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;0<=--i&&(s*=256);)this[t+i]=e/s&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,s=1,o=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=i-1;0<=s;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===e.length&&(i=e.charCodeAt(0),"utf8"===n&&i<128||"latin1"===n)&&(e=i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");var s;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(s=t;s<r;++s)this[s]=e;else{var o=c.isBuffer(e)?e:c.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var E=/[^+/0-9A-Za-z-_]/g;function C(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],o=0;o<n;++o){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&s.push(239,191,189);continue}if(o+1===n){-1<(t-=3)&&s.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,r<128){if(--t<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function I(e){return k.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function P(e){return e!=e}}.call(this)}.call(this,B("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(r,i,n){!function(t){!function(){n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");let t=0,r=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(t++,"%c"===e)&&(r=t)}),e.splice(r,0,n)}},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),i.exports=r("./common")(n);var e=i.exports["formatters"];e.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}.call(this)}.call(this,r("_process"))},{"./common":19,_process:57}],19:[function(e,t,r){t.exports=function(t){function a(e){let r,t=null,n,i;function o(...i){if(o.enabled){const s=o;var e=Number(new Date),t=e-(r||e);s.diff=t,s.prev=r,s.curr=e,r=e,i[0]=a.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let n=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(e,t)=>{if("%%"===e)return"%";n++;var r,t=a.formatters[t];return"function"==typeof t&&(r=i[n],e=t.call(s,r),i.splice(n,1),n--),e}),a.formatArgs.call(s,i),(s.log||a.log).apply(s,i)}}return o.namespace=e,o.useColors=a.useColors(),o.color=a.selectColor(e),o.extend=s,o.destroy=a.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==t?t:(n!==a.namespaces&&(n=a.namespaces,i=a.enabled(e)),i),set:e=>{t=e}}),"function"==typeof a.init&&a.init(o),o}function s(e,t){t=a(this.namespace+(void 0===t?":":t)+e);return t.log=this.log,t}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((a.debug=a).default=a).coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},a.disable=function(){var e=[...a.names.map(r),...a.skips.map(r).map(e=>"-"+e)].join(",");return a.enable(""),e},a.enable=function(e){a.save(e),a.namespaces=e,a.names=[],a.skips=[];let t;var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.slice(1)+"$")):a.names.push(new RegExp("^"+e+"$")))},a.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=a.skips.length;t<r;t++)if(a.skips[t].test(e))return!1;for(t=0,r=a.names.length;t<r;t++)if(a.names[t].test(e))return!0;return!1},a.humanize=e("ms"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{a[e]=t[e]}),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return a.colors[Math.abs(r)%a.colors.length]},a.enable(a.load()),a}},{ms:52}],20:[function(c,f,e){!function(u,r){!function(){function i(e,t){e._corked?e.once("uncork",t):t()}function s(r,n){return function(e){var t;e?(t=r,e="premature close"===e.message?null:e,t._autoDestroy&&t.destroy(e)):n&&!r._ended&&r.end()}}function n(){}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);a.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)}var a=c("readable-stream"),l=c("end-of-stream"),e=c("inherits"),t=c("stream-shift"),h=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]);e(o,a.Duplex),o.obj=function(e,t,r){return(r=r||{}).objectMode=!0,r.highWaterMark=16,new o(e,t,r)},o.prototype.cork=function(){1==++this._corked&&this.emit("cork")},o.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},o.prototype.setWritable=function(e){var t,r,n;this._unwrite&&this._unwrite(),this.destroyed?e&&e.destroy&&e.destroy():null===e||!1===e?this.end():(r=l(e,{writable:!0,readable:!1},s(t=this,this._forwardEnd)),n=function(){var e=t._ondrain;t._ondrain=null,e&&e()},this._unwrite&&u.nextTick(n),this._writable=e,this._writable.on("drain",n),this._unwrite=function(){t._writable.removeListener("drain",n),r()},this.uncork())},o.prototype.setReadable=function(e){var t,r,n,i;this._unread&&this._unread(),this.destroyed?e&&e.destroy&&e.destroy():null===e||!1===e?(this.push(null),this.resume()):(r=l(e,{writable:!1,readable:!0},s(t=this)),n=function(){t._forward()},i=function(){t.push(null)},this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(e=e,new a.Readable({objectMode:!0,highWaterMark:16}).wrap(e)),this._readable2.on("readable",n),this._readable2.on("end",i),this._unread=function(){t._readable2.removeListener("readable",n),t._readable2.removeListener("end",i),r()},this._forward())},o.prototype._read=function(){this._drained=!0,this._forward()},o.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=t(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},o.prototype.destroy=function(e,t){if(t=t||n,this.destroyed)return t(null);this.destroyed=!0;var r=this;u.nextTick(function(){r._destroy(e),t(null)})},o.prototype._destroy=function(e){var t;e&&(t=this._ondrain,this._ondrain=null,t?t(e):this.emit("error",e)),this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable)&&this._writable.destroy&&this._writable.destroy(),this.emit("close")},o.prototype._write=function(e,t,r){if(!this.destroyed)return this._corked?i(this,this._write.bind(this,e,t,r)):e===h?this._finish(r):this._writable?void(!1===this._writable.write(e)?this._ondrain=r:this.destroyed||r()):r()},o.prototype._finish=function(r){var n=this;this.emit("preend"),i(this,function(){var e,t;e=n._forwardEnd&&n._writable,t=function(){!1===n._writableState.prefinished&&(n._writableState.prefinished=!0),n.emit("prefinish"),i(n,r)},!e||e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),t())})},o.prototype.end=function(e,t,r){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this._writableState.destroyed||this.write(h),a.Writable.prototype.end.call(this,r))},f.exports=o}.call(this)}.call(this,c("_process"),c("buffer").Buffer)},{_process:57,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":76,"stream-shift":81}],21:[function(e,t,r){!function(_){!function(){function y(){}function b(t,e,r){if("function"==typeof e)return b(t,null,e);function n(){t.writable||i()}function i(){g=!1,d||r.call(t)}function s(){d=!1,g||r.call(t)}function o(e){r.call(t,e?new Error("exited with error code: "+e):null)}function a(e){r.call(t,e)}function l(){_.nextTick(h)}function h(){return m||(!d||p&&p.ended&&!p.destroyed)&&(!g||f&&f.ended&&!f.destroyed)?void 0:r.call(t,new Error("premature close"))}function u(){t.req.on("finish",i)}e=e||{},r=v(r||y);var c,f=t._writableState,p=t._readableState,d=e.readable||!1!==e.readable&&t.readable,g=e.writable||!1!==e.writable&&t.writable,m=!1;return(c=t).setHeader&&"function"==typeof c.abort?(t.on("complete",i),t.on("abort",l),t.req?u():t.on("request",u)):g&&!f&&(t.on("end",n),t.on("close",n)),(c=t).stdio&&Array.isArray(c.stdio)&&3===c.stdio.length&&t.on("exit",o),t.on("end",s),t.on("finish",i),!1!==e.error&&t.on("error",a),t.on("close",l),function(){m=!0,t.removeListener("complete",i),t.removeListener("abort",l),t.removeListener("request",u),t.req&&t.req.removeListener("finish",i),t.removeListener("end",n),t.removeListener("close",n),t.removeListener("finish",i),t.removeListener("exit",o),t.removeListener("end",s),t.removeListener("error",a),t.removeListener("close",l)}}var v=e("once");t.exports=b}.call(this)}.call(this,e("_process"))},{_process:57,once:55}],22:[function(e,t,r){var c=Object.create||function(e){function t(){}return t.prototype=e,new t},o=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return t},n=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0;var s,a=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),s=0===l.x}catch(e){s=!1}function h(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');return(i=e._events)?(i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),s=i[t]):(i=e._events=c(null),e._eventsCount=0),s?("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),s.warned||(n=h(e))&&0<n&&s.length>n&&(s.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=s.length,"object"==typeof console)&&console.warn&&console.warn("%s: %s",n.name,n.message)):(s=i[t]=r,++e._eventsCount),e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=n.call(f,e);return t.listener=r,e.wrapFn=t}function d(e,t,r){e=e._events;if(!e)return[];e=e[t];if(!e)return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,i=new Array(n.length),s=0;s<i.length;++s)i[s]=n[s].listener||n[s];return i}return V(e,e.length)}function g(e){var t=this._events;if(t){t=t[e];if("function"==typeof t)return 1;if(t)return t.length}return 0}function V(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}s?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');a=e}}):i.defaultMaxListeners=a,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return h(this)},i.prototype.emit=function(e){var t,r,n,i,s="error"===e,o=this._events;if(o)s=s&&null==o.error;else if(!s)return!1;if(s)throw(t=1<arguments.length?arguments[1]:t)instanceof Error?t:((s=new Error('Unhandled "error" event. ('+t+")")).context=t,s);if(!(r=o[e]))return!1;var a,l="function"==typeof r;switch(a=arguments.length){case 1:var h=r,u=l,c=this;if(u)h.call(c);else for(var f=h.length,L=V(h,f),p=0;p<f;++p)L[p].call(c);break;case 2:var u=r,h=l,d=this,g=arguments[1];if(h)u.call(d,g);else for(var m=u.length,N=V(u,m),y=0;y<m;++y)N[y].call(d,g);break;case 3:var b=r,v=l,_=this,w=arguments[1],S=arguments[2];if(v)b.call(_,w,S);else for(var E=b.length,j=V(b,E),k=0;k<E;++k)j[k].call(_,w,S);break;case 4:var v=r,b=l,x=this,C=arguments[1],I=arguments[2],T=arguments[3];if(b)v.call(x,C,I,T);else for(var A=v.length,U=V(v,A),P=0;P<A;++P)U[P].call(x,C,I,T);break;default:for(n=new Array(a-1),i=1;i<a;i++)n[i-1]=arguments[i];var B=r,q=l,O=this,R=n;if(q)B.apply(O,R);else for(var D=B.length,F=V(B,D),M=0;M<D;++M)F[M].apply(O,R)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,i,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if((n=this._events)&&(r=n[e]))if(r===t||r.listener===t)0==--this._eventsCount?this._events=c(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;0<=s;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;if(0===i)r.shift();else{for(var a=r,l=i,h=l+1,u=a.length;h<u;l+=1,h+=1)a[l]=a[h];a.pop()}1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.removeAllListeners=function(e){var t,r=this._events;if(r)if(r.removeListener){if(0===arguments.length){for(var n,i=o(r),s=0;s<i.length;++s)"removeListener"!==(n=i[s])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=c(null),this._eventsCount=0}else if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(s=t.length-1;0<=s;s--)this.removeListener(e,t[s])}else 0===arguments.length?(this._events=c(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=c(null):delete r[e]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},i.prototype.listenerCount=g,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],23:[function(e,t,r){r.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,h=l>>1,u=-7,c=r?i-1:0,f=r?-1:1,i=e[t+c];for(c+=f,s=i&(1<<-u)-1,i>>=-u,u+=a;0<u;s=256*s+e[t+c],c+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;0<u;o=256*o+e[t+c],c+=f,u-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(i?-1:1);o+=Math.pow(2,n),s-=h}return(i?-1:1)*o*Math.pow(2,s-n)},r.write=function(e,t,r,n,i,s){var o,a,l=8*s-i-1,h=(1<<l)-1,u=h>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,s=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-o))<1&&(o--,n*=2),2<=(t+=1<=o+u?c/n:c*Math.pow(2,1-u))*n&&(o++,n/=2),h<=o+u?(a=0,o=h):1<=o+u?(a=(t*n-1)*Math.pow(2,i),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));8<=i;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;0<l;e[r+f]=255&o,f+=p,o/=256,l-=8);e[r+f-p]|=128*s}},{}],24:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Container=r.Base=r.ContainerIterator=void 0;class n{constructor(e=n.NORMAL){this.iteratorType=e}}(r.ContainerIterator=n).NORMAL=!1,n.REVERSE=!0;class i{constructor(){this.length=0}size(){return this.length}empty(){return 0===this.length}}r.Base=i;r.Container=class extends i{}},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class n extends e("../../ContainerBase/index").Base{constructor(e=16,t=e=>{let t,r=0;var n=(t="string"!=typeof e?JSON.stringify(e):e).length;for(let e=0;e<n;e++){var i=t.charCodeAt(e);r=(r<<5)-r+i,r|=0}return r>>>0}){if(super(),e<16||0!=(e&e-1))throw new RangeError("InitBucketNum range error");this.bucketNum=this.initBucketNum=e,this.hashFunc=t}clear(){this.length=0,this.bucketNum=this.initBucketNum,this.hashTable=[]}}n.sigma=.75,n.treeifyThreshold=8,n.untreeifyThreshold=6,n.minTreeifySize=64,n.maxBucketNum=1<<30,r.default=n},{"../../ContainerBase/index":25}],27:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const u=n(e("./Base/index")),c=n(e("../SequentialContainer/Vector")),f=n(e("../TreeContainer/OrderedMap"));class o extends u.default{constructor(e=[],t,r){super(t,r),this.hashTable=[],e.forEach(e=>this.setElement(e[0],e[1]))}reAllocate(){if(!(this.bucketNum>=u.default.maxBucketNum)){var t=[];const a=this.bucketNum;this.bucketNum<<=1;var r=Object.keys(this.hashTable),n=r.length;for(let e=0;e<n;++e){var i=parseInt(r[e]),s=this.hashTable[i],o=s.size();if(0!==o)if(1===o){o=s.front();t[this.hashFunc(o[0])&this.bucketNum-1]=new c.default([o],!1)}else{const l=[],h=[];s.forEach(e=>{(0==(this.hashFunc(e[0])&a)?l:h).push(e)}),s instanceof f.default?(l.length>u.default.untreeifyThreshold?t[i]=new f.default(l):l.length&&(t[i]=new c.default(l,!1)),h.length>u.default.untreeifyThreshold?t[i+a]=new f.default(h):h.length&&(t[i+a]=new c.default(h,!1))):(l.length>=u.default.treeifyThreshold?t[i]=new f.default(l):l.length&&(t[i]=new c.default(l,!1)),h.length>=u.default.treeifyThreshold?t[i+a]=new f.default(h):h.length&&(t[i+a]=new c.default(h,!1)))}}this.hashTable=t}}forEach(t){var r=Object.values(this.hashTable),n=r.length;let i=0;for(let e=0;e<n;++e)r[e].forEach(e=>t(e,i++))}setElement(e,t){var r=this.hashFunc(e)&this.bucketNum-1,n=this.hashTable[r];if(n){var i=n.size();if(n instanceof c.default){for(const s of n)if(s[0]===e)return void(s[1]=t);if(n.pushBack([e,t]),i+1>=o.treeifyThreshold){if(this.bucketNum<=o.minTreeifySize)return this.length+=1,void this.reAllocate();this.hashTable[r]=new f.default(this.hashTable[r])}this.length+=1}else{n.setElement(e,t);n=n.size();this.length+=n-i}}else this.length+=1,this.hashTable[r]=new c.default([[e,t]],!1);this.length>this.bucketNum*o.sigma&&this.reAllocate()}getElementByKey(e){var t=this.hashFunc(e)&this.bucketNum-1,t=this.hashTable[t];if(t){if(t instanceof f.default)return t.getElementByKey(e);for(const r of t)if(r[0]===e)return r[1]}}eraseElementByKey(t){var e=this.hashFunc(t)&this.bucketNum-1,r=this.hashTable[e];if(r)if(r instanceof c.default){let e=0;for(const s of r){if(s[0]===t)return r.eraseElementByPos(e),void--this.length;e+=1}}else{var n=r.size(),i=(r.eraseElementByKey(t),r.size());this.length+=i-n,i<=u.default.untreeifyThreshold&&(this.hashTable[e]=new c.default(r))}}find(e){var t=this.hashFunc(e)&this.bucketNum-1,t=this.hashTable[t];if(t){if(t instanceof f.default)return!t.find(e).equals(t.end());for(const r of t)if(r[0]===e)return!0}return!1}[Symbol.iterator](){return function*(){var t=Object.values(this.hashTable),r=t.length;for(let e=0;e<r;++e)for(const n of t[e])yield n}.bind(this)()}}r.default=o},{"../SequentialContainer/Vector":36,"../TreeContainer/OrderedMap":40,"./Base/index":26}],28:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const u=n(e("./Base/index")),c=n(e("../SequentialContainer/Vector")),f=n(e("../TreeContainer/OrderedSet"));class i extends u.default{constructor(e=[],t,r){super(t,r),this.hashTable=[],e.forEach(e=>this.insert(e))}reAllocate(){if(!(this.bucketNum>=u.default.maxBucketNum)){var t=[];const a=this.bucketNum;this.bucketNum<<=1;var r=Object.keys(this.hashTable),n=r.length;for(let e=0;e<n;++e){var i=parseInt(r[e]),s=this.hashTable[i],o=s.size();if(0!==o)if(1===o){o=s.front();t[this.hashFunc(o)&this.bucketNum-1]=new c.default([o],!1)}else{const l=[],h=[];s.forEach(e=>{(0==(this.hashFunc(e)&a)?l:h).push(e)}),s instanceof f.default?(l.length>u.default.untreeifyThreshold?t[i]=new f.default(l):l.length&&(t[i]=new c.default(l,!1)),h.length>u.default.untreeifyThreshold?t[i+a]=new f.default(h):h.length&&(t[i+a]=new c.default(h,!1))):(l.length>=u.default.treeifyThreshold?t[i]=new f.default(l):l.length&&(t[i]=new c.default(l,!1)),h.length>=u.default.treeifyThreshold?t[i+a]=new f.default(h):h.length&&(t[i+a]=new c.default(h,!1)))}}this.hashTable=t}}forEach(t){var r=Object.values(this.hashTable),n=r.length;let i=0;for(let e=0;e<n;++e)r[e].forEach(e=>t(e,i++))}insert(e){var t=this.hashFunc(e)&this.bucketNum-1,r=this.hashTable[t];if(r){var n=r.size();if(r instanceof c.default){if(!r.find(e).equals(r.end()))return;if(r.pushBack(e),n+1>=u.default.treeifyThreshold){if(this.bucketNum<=u.default.minTreeifySize)return this.length+=1,void this.reAllocate();this.hashTable[t]=new f.default(r)}this.length+=1}else{r.insert(e);r=r.size();this.length+=r-n}}else this.hashTable[t]=new c.default([e],!1),this.length+=1;this.length>this.bucketNum*u.default.sigma&&this.reAllocate()}eraseElementByKey(e){var t,r,n=this.hashFunc(e)&this.bucketNum-1,i=this.hashTable[n];i&&0!==(t=i.size())&&(i instanceof c.default?(i.eraseElementByValue(e),r=i.size(),this.length+=r-t):(i.eraseElementByKey(e),r=i.size(),this.length+=r-t,r<=u.default.untreeifyThreshold&&(this.hashTable[n]=new c.default(i))))}find(e){var t=this.hashFunc(e)&this.bucketNum-1,t=this.hashTable[t];return!!t&&!t.find(e).equals(t.end())}[Symbol.iterator](){return function*(){var t=Object.values(this.hashTable),r=t.length;for(let e=0;e<r;++e)for(const n of t[e])yield n}.bind(this)()}}r.default=i},{"../SequentialContainer/Vector":36,"../TreeContainer/OrderedSet":41,"./Base/index":26}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class n extends e("../ContainerBase/index").Base{constructor(e=[],t=(e,t)=>t<e?-1:e<t?1:0,r=!0){super(),this.cmp=t,Array.isArray(e)?this.priorityQueue=r?[...e]:e:(this.priorityQueue=[],e.forEach(e=>this.priorityQueue.push(e))),this.length=this.priorityQueue.length;for(let e=this.length-1>>1;0<=e;--e){let t=e,r=t<<1|1;for(;r<this.length;){var n=r,i=n+1;let e=n;if(i<this.length&&0<this.cmp(this.priorityQueue[n],this.priorityQueue[i])&&(e=i),this.cmp(this.priorityQueue[t],this.priorityQueue[e])<=0)break;[this.priorityQueue[t],this.priorityQueue[e]]=[this.priorityQueue[e],this.priorityQueue[t]],t=e,r=t<<1|1}}}adjust(e){var t=e<<1|1,r=2+(e<<1);t<this.length&&0<this.cmp(this.priorityQueue[e],this.priorityQueue[t])&&([this.priorityQueue[e],this.priorityQueue[t]]=[this.priorityQueue[t],this.priorityQueue[e]]),r<this.length&&0<this.cmp(this.priorityQueue[e],this.priorityQueue[r])&&([this.priorityQueue[e],this.priorityQueue[r]]=[this.priorityQueue[r],this.priorityQueue[e]])}clear(){this.length=0,this.priorityQueue.length=0}push(t){if(this.priorityQueue.push(t),this.length+=1,1!==this.length){let e=this.length-1;for(;0<e;){var r=e-1>>1;if(this.cmp(this.priorityQueue[r],t)<=0)break;this.adjust(r),e=r}}}pop(){if(this.length){var r=this.priorityQueue[this.length-1];--this.length;let t=0;for(;t<this.length;){var n=t<<1|1,i=2+(t<<1);if(n>=this.length)break;let e=n;if(i<this.length&&0<this.cmp(this.priorityQueue[n],this.priorityQueue[i])&&(e=i),0<=this.cmp(this.priorityQueue[e],r))break;this.priorityQueue[t]=this.priorityQueue[e],t=e}this.priorityQueue[t]=r,this.priorityQueue.pop()}}top(){return this.priorityQueue[0]}}r.default=n},{"../ContainerBase/index":25}],30:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e("../SequentialContainer/Deque"));class s extends e("../ContainerBase/index").Base{constructor(e=[]){super(),this.queue=new i.default(e),this.length=this.queue.size()}clear(){this.queue.clear(),this.length=0}push(e){this.queue.pushBack(e),this.length+=1}pop(){this.queue.popFront(),this.length&&--this.length}front(){return this.queue.front()}}r.default=s},{"../ContainerBase/index":25,"../SequentialContainer/Deque":34}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class n extends e("../ContainerBase/index").Base{constructor(e=[]){super(),this.stack=[],e.forEach(e=>this.push(e))}clear(){this.length=0,this.stack.length=0}push(e){this.stack.push(e),this.length+=1}pop(){this.stack.pop(),0<this.length&&--this.length}top(){return this.stack[this.length-1]}}r.default=n},{"../ContainerBase/index":25}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RandomIterator=void 0;const n=e("../../../utils/checkParams"),s=e("../../ContainerBase/index");class i extends s.ContainerIterator{constructor(e,t,r,n,i){super(i),this.node=e,this.size=t,this.getElementByPos=r,this.setElementByPos=n,this.iteratorType===s.ContainerIterator.NORMAL?(this.pre=function(){if(0===this.node)throw new RangeError("Deque iterator access denied!");return--this.node,this},this.next=function(){if(this.node===this.size())throw new RangeError("Deque Iterator access denied!");return this.node+=1,this}):(this.pre=function(){if(this.node===this.size()-1)throw new RangeError("Deque iterator access denied!");return this.node+=1,this},this.next=function(){if(-1===this.node)throw new RangeError("Deque iterator access denied!");return--this.node,this})}get pointer(){return(0,n.checkWithinAccessParams)(this.node,0,this.size()-1),this.getElementByPos(this.node)}set pointer(e){(0,n.checkWithinAccessParams)(this.node,0,this.size()-1),this.setElementByPos(this.node,e)}equals(e){return this.node===e.node}}r.RandomIterator=i},{"../../../utils/checkParams":43,"../../ContainerBase/index":25}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class n extends e("../../ContainerBase/index").Container{}r.default=n},{"../../ContainerBase/index":25}],34:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.DequeIterator=void 0,n(e("./Base/index")));const s=e("../../utils/checkParams"),i=e("../ContainerBase/index");class o extends e("./Base/RandomIterator").RandomIterator{copy(){return new o(this.node,this.size,this.getElementByPos,this.setElementByPos,this.iteratorType)}}r.DequeIterator=o;class a extends n.default{constructor(e=[],t=4096){super(),this.first=0,this.curFirst=0,this.last=0,this.curLast=0,this.bucketNum=0,this.map=[];let r;if("size"in e)r="number"==typeof e.size?e.size:e.size();else{if(!("length"in e))throw new RangeError("Can't get container's size!");r=e.length}this.bucketSize=t,this.bucketNum=Math.max(Math.ceil(r/this.bucketSize),1);for(let e=0;e<this.bucketNum;++e)this.map.push(new Array(this.bucketSize));t=Math.ceil(r/this.bucketSize);this.first=this.last=(this.bucketNum>>1)-(t>>1),this.curFirst=this.curLast=this.bucketSize-r%this.bucketSize>>1,e.forEach(e=>this.pushBack(e)),this.size=this.size.bind(this),this.getElementByPos=this.getElementByPos.bind(this),this.setElementByPos=this.setElementByPos.bind(this)}reAllocate(){var t=[],r=Math.max(this.bucketNum>>1,1);for(let e=0;e<r;++e)t[e]=new Array(this.bucketSize);for(let e=this.first;e<this.bucketNum;++e)t[t.length]=this.map[e];for(let e=0;e<this.last;++e)t[t.length]=this.map[e];t[t.length]=[...this.map[this.last]],this.first=r,this.last=t.length-1;for(let e=0;e<r;++e)t[t.length]=new Array(this.bucketSize);this.map=t,this.bucketNum=t.length}getElementIndex(e){var e=this.curFirst+e+1,t=e%this.bucketSize;let r=t-1,n=this.first+(e-t)/this.bucketSize;return 0==t&&--n,n%=this.bucketNum,r<0&&(r+=this.bucketSize),{curNodeBucketIndex:n,curNodePointerIndex:r}}clear(){this.map=[[]],this.bucketNum=1,this.first=this.last=this.length=0,this.curFirst=this.curLast=this.bucketSize>>1}front(){return this.map[this.first][this.curFirst]}back(){return this.map[this.last][this.curLast]}begin(){return new o(0,this.size,this.getElementByPos,this.setElementByPos)}end(){return new o(this.length,this.size,this.getElementByPos,this.setElementByPos)}rBegin(){return new o(this.length-1,this.size,this.getElementByPos,this.setElementByPos,i.ContainerIterator.REVERSE)}rEnd(){return new o(-1,this.size,this.getElementByPos,this.setElementByPos,i.ContainerIterator.REVERSE)}pushBack(e){this.length&&(this.curLast<this.bucketSize-1?this.curLast+=1:(this.last<this.bucketNum-1?this.last+=1:this.last=0,this.curLast=0),this.last===this.first)&&this.curLast===this.curFirst&&this.reAllocate(),this.length+=1,this.map[this.last][this.curLast]=e}popBack(){this.length&&(this.map[this.last][this.curLast]=void 0,1!==this.length&&(0<this.curLast?--this.curLast:(0<this.last?--this.last:this.last=this.bucketNum-1,this.curLast=this.bucketSize-1)),--this.length)}pushFront(e){this.length&&(0<this.curFirst?--this.curFirst:(0<this.first?--this.first:this.first=this.bucketNum-1,this.curFirst=this.bucketSize-1),this.first===this.last)&&this.curFirst===this.curLast&&this.reAllocate(),this.length+=1,this.map[this.first][this.curFirst]=e}popFront(){this.length&&(this.map[this.first][this.curFirst]=void 0,1!==this.length&&(this.curFirst<this.bucketSize-1?this.curFirst+=1:(this.first<this.bucketNum-1?this.first+=1:this.first=0,this.curFirst=0)),--this.length)}forEach(t){for(let e=0;e<this.length;++e)t(this.getElementByPos(e),e)}getElementByPos(e){(0,s.checkWithinAccessParams)(e,0,this.length-1);var{curNodeBucketIndex:e,curNodePointerIndex:t}=this.getElementIndex(e);return this.map[e][t]}setElementByPos(e,t){(0,s.checkWithinAccessParams)(e,0,this.length-1);var{curNodeBucketIndex:e,curNodePointerIndex:r}=this.getElementIndex(e);this.map[e][r]=t}insert(t,r,n=1){if((0,s.checkWithinAccessParams)(t,0,this.length),0===t)for(;n--;)this.pushFront(r);else if(t===this.length)for(;n--;)this.pushBack(r);else{var i=[];for(let e=t;e<this.length;++e)i.push(this.getElementByPos(e));this.cut(t-1);for(let e=0;e<n;++e)this.pushBack(r);for(let e=0;e<i.length;++e)this.pushBack(i[e])}}cut(e){var t,r;e<0?this.clear():({curNodeBucketIndex:t,curNodePointerIndex:r}=this.getElementIndex(e),this.last=t,this.curLast=r,this.length=e+1)}eraseElementByPos(t){if((0,s.checkWithinAccessParams)(t,0,this.length-1),0===t)this.popFront();else if(t===this.length-1)this.popBack();else{var r=[];for(let e=t+1;e<this.length;++e)r.push(this.getElementByPos(e));this.cut(t),this.popBack(),r.forEach(e=>this.pushBack(e))}}eraseElementByValue(t){if(this.length){var r=[];for(let e=0;e<this.length;++e){var n=this.getElementByPos(e);n!==t&&r.push(n)}var i=r.length;for(let e=0;e<i;++e)this.setElementByPos(e,r[e]);this.cut(i-1)}}eraseElementByIterator(e){var t=e.node;return this.eraseElementByPos(t),e=e.next()}find(t){for(let e=0;e<this.length;++e)if(this.getElementByPos(e)===t)return new o(e,this.size,this.getElementByPos,this.setElementByPos);return this.end()}reverse(){let e=0,t=this.length-1;for(;e<t;){var r=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,r),e+=1,--t}}unique(){if(!(this.length<=1)){let t=1,r=this.getElementByPos(0);for(let e=1;e<this.length;++e){var n=this.getElementByPos(e);n!==r&&(r=n,this.setElementByPos(t++,n))}for(;this.length>t;)this.popBack()}}sort(e){var t=[];for(let e=0;e<this.length;++e)t.push(this.getElementByPos(e));t.sort(e);for(let e=0;e<this.length;++e)this.setElementByPos(e,t[e])}shrinkToFit(){if(this.length){const t=[];this.forEach(e=>t.push(e)),this.bucketNum=Math.max(Math.ceil(this.length/this.bucketSize),1),this.length=this.first=this.last=this.curFirst=this.curLast=0,this.map=[];for(let e=0;e<this.bucketNum;++e)this.map.push(new Array(this.bucketSize));for(let e=0;e<t.length;++e)this.pushBack(t[e])}}[Symbol.iterator](){return function*(){for(let e=0;e<this.length;++e)yield this.getElementByPos(e)}.bind(this)()}}r.default=a},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/RandomIterator":32,"./Base/index":33}],35:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.LinkListIterator=r.LinkNode=void 0,n(e("./Base/index")));const s=e("../../utils/checkParams"),i=e("../ContainerBase/index");class o{constructor(e){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=e}}r.LinkNode=o;class a extends i.ContainerIterator{constructor(e,t,r){super(r),this.node=e,this.header=t,this.iteratorType===i.ContainerIterator.NORMAL?(this.pre=function(){if(this.node.pre===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre,this},this.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next,this}):(this.pre=function(){if(this.node.next===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next,this},this.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre,this})}get pointer(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node.value}set pointer(e){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");this.node.value=e}equals(e){return this.node===e.node}copy(){return new a(this.node,this.header,this.iteratorType)}}r.LinkListIterator=a;class l extends n.default{constructor(e=[]){super(),this.header=new o,this.head=void 0,this.tail=void 0,e.forEach(e=>this.pushBack(e))}clear(){this.length=0,this.head=this.tail=void 0,this.header.pre=this.header.next=void 0}begin(){return new a(this.head||this.header,this.header)}end(){return new a(this.header,this.header)}rBegin(){return new a(this.tail||this.header,this.header,i.ContainerIterator.REVERSE)}rEnd(){return new a(this.header,this.header,i.ContainerIterator.REVERSE)}front(){return this.head?this.head.value:void 0}back(){return this.tail?this.tail.value:void 0}forEach(r){if(this.length){let e=this.head,t=0;for(;e!==this.header;)r(e.value,t++),e=e.next}}getElementByPos(e){(0,s.checkWithinAccessParams)(e,0,this.length-1);let t=this.head;for(;e--;)t=t.next;return t.value}eraseElementByPos(t){if((0,s.checkWithinAccessParams)(t,0,this.length-1),0===t)this.popFront();else if(t===this.length-1)this.popBack();else{let e=this.head;for(;t--;)e=e.next;var r=(e=e).pre,n=e.next;(n.pre=r).next=n,--this.length}}eraseElementByValue(t){for(;this.head&&this.head.value===t;)this.popFront();for(;this.tail&&this.tail.value===t;)this.popBack();if(this.head){let e=this.head;for(;e!==this.header;){var r,n;e.value===t&&(r=e.pre,(n=e.next)&&(n.pre=r),r&&(r.next=n),--this.length),e=e.next}}}eraseElementByIterator(e){var t,r=e.node;if(r===this.header)throw new RangeError("Invalid iterator");return e=e.next(),this.head===r?this.popFront():this.tail===r?this.popBack():(t=r.pre,(r=r.next)&&(r.pre=t),t&&(t.next=r),--this.length),e}pushBack(e){this.length+=1;e=new o(e);this.tail?((this.tail.next=e).pre=this.tail,this.tail=e):(this.head=this.tail=e,this.header.next=this.head,this.head.pre=this.header),this.tail.next=this.header,this.header.pre=this.tail}popBack(){this.tail&&(--this.length,this.head===this.tail?(this.head=this.tail=void 0,this.header.next=void 0):(this.tail=this.tail.pre,this.tail&&(this.tail.next=void 0)),this.header.pre=this.tail,this.tail)&&(this.tail.next=this.header)}setElementByPos(e,t){(0,s.checkWithinAccessParams)(e,0,this.length-1);let r=this.head;for(;e--;)r=r.next;r.value=t}insert(r,e,n=1){if((0,s.checkWithinAccessParams)(r,0,this.length),!(n<=0))if(0===r)for(;n--;)this.pushFront(e);else if(r===this.length)for(;n--;)this.pushBack(e);else{let t=this.head;for(let e=1;e<r;++e)t=t.next;var i=t.next;for(this.length+=n;n--;)t.next=new o(e),t=(t.next.pre=t).next;(t.next=i)&&(i.pre=t)}}find(t){if(this.head){let e=this.head;for(;e!==this.header;){if(e.value===t)return new a(e,this.header);e=e.next}}return this.end()}reverse(){if(!(this.length<=1)){let e=this.head,t=this.tail,r=0;for(;r<<1<this.length;){var n=e.value;e.value=t.value,t.value=n,e=e.next,t=t.pre,r+=1}}}unique(){if(!(this.length<=1)){let t=this.head;for(;t!==this.header;){let e=t;for(;e.next&&e.value===e.next.value;)e=e.next,--this.length;t.next=e.next,t.next&&(t.next.pre=t),t=t.next}}}sort(e){if(!(this.length<=1)){const r=[];this.forEach(e=>r.push(e)),r.sort(e);let t=this.head;r.forEach(e=>{t.value=e,t=t.next})}}pushFront(e){this.length+=1;e=new o(e);this.head?(e.next=this.head,this.head.pre=e,this.head=e):(this.head=this.tail=e,this.tail.next=this.header,this.header.pre=this.tail),this.header.next=this.head,this.head.pre=this.header}popFront(){this.head&&(--this.length,this.head===this.tail?(this.head=this.tail=void 0,this.header.pre=this.tail):(this.head=this.head.next,this.head&&(this.head.pre=this.header)),this.header.next=this.head)}merge(e){if(this.head){let r=this.head;e.forEach(e=>{for(;r&&r!==this.header&&r.value<=e;)r=r.next;var t;r===this.header?(this.pushBack(e),r=this.tail):r===this.head?(this.pushFront(e),r=this.head):(this.length+=1,(t=r.pre).next=new o(e),((t.next.pre=t).next.next=r).pre=t.next)})}else e.forEach(e=>this.pushBack(e))}[Symbol.iterator](){return function*(){if(this.head){let e=this.head;for(;e!==this.header;)yield e.value,e=e.next}}.bind(this)()}}r.default=l},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/index":33}],36:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.VectorIterator=void 0,n(e("./Base/index")));const i=e("../../utils/checkParams"),s=e("../ContainerBase/index");class o extends e("./Base/RandomIterator").RandomIterator{copy(){return new o(this.node,this.size,this.getElementByPos,this.setElementByPos,this.iteratorType)}}r.VectorIterator=o;class a extends n.default{constructor(e=[],t=!0){super(),Array.isArray(e)?(this.vector=t?[...e]:e,this.length=e.length):(this.vector=[],e.forEach(e=>this.pushBack(e))),this.size=this.size.bind(this),this.getElementByPos=this.getElementByPos.bind(this),this.setElementByPos=this.setElementByPos.bind(this)}clear(){this.length=0,this.vector.length=0}begin(){return new o(0,this.size,this.getElementByPos,this.setElementByPos)}end(){return new o(this.length,this.size,this.getElementByPos,this.setElementByPos)}rBegin(){return new o(this.length-1,this.size,this.getElementByPos,this.setElementByPos,s.ContainerIterator.REVERSE)}rEnd(){return new o(-1,this.size,this.getElementByPos,this.setElementByPos,s.ContainerIterator.REVERSE)}front(){return this.vector[0]}back(){return this.vector[this.length-1]}forEach(t){for(let e=0;e<this.length;++e)t(this.vector[e],e)}getElementByPos(e){return(0,i.checkWithinAccessParams)(e,0,this.length-1),this.vector[e]}eraseElementByPos(e){(0,i.checkWithinAccessParams)(e,0,this.length-1),this.vector.splice(e,1),--this.length}eraseElementByValue(t){let r=0;for(let e=0;e<this.length;++e)this.vector[e]!==t&&(this.vector[r++]=this.vector[e]);this.length=this.vector.length=r}eraseElementByIterator(e){var t=e.node;return e=e.next(),this.eraseElementByPos(t),e}pushBack(e){this.vector.push(e),this.length+=1}popBack(){this.length&&(this.vector.pop(),--this.length)}setElementByPos(e,t){(0,i.checkWithinAccessParams)(e,0,this.length-1),this.vector[e]=t}insert(e,t,r=1){(0,i.checkWithinAccessParams)(e,0,this.length),this.vector.splice(e,0,...new Array(r).fill(t)),this.length+=r}find(t){for(let e=0;e<this.length;++e)if(this.vector[e]===t)return new o(e,this.size,this.getElementByPos,this.getElementByPos);return this.end()}reverse(){this.vector.reverse()}unique(){let t=1;for(let e=1;e<this.length;++e)this.vector[e]!==this.vector[e-1]&&(this.vector[t++]=this.vector[e]);this.length=this.vector.length=t}sort(e){this.vector.sort(e)}[Symbol.iterator](){return function*(){return yield*this.vector}.bind(this)()}}r.default=a},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/RandomIterator":32,"./Base/index":33}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../ContainerBase/index");class i extends n.ContainerIterator{constructor(e,t,r){super(r),this.node=e,this.header=t,this.iteratorType===n.ContainerIterator.NORMAL?(this.pre=function(){if(this.node===this.header.left)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre(),this},this.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next(),this}):(this.pre=function(){if(this.node===this.header.right)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next(),this},this.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre(),this})}equals(e){return this.node===e.node}}r.default=i},{"../../ContainerBase/index":25}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class n{constructor(e,t){this.color=!0,this.key=void 0,this.value=void 0,this.left=void 0,this.right=void 0,this.parent=void 0,this.key=e,this.value=t}pre(){let t=this;if(t.color===n.RED&&t.parent.parent===t)t=t.right;else if(t.left)for(t=t.left;t.right;)t=t.right;else{let e=t.parent;for(;e.left===t;)e=(t=e).parent;t=e}return t}next(){let t=this;if(t.right)for(t=t.right;t.left;)t=t.left;else{let e=t.parent;for(;e.right===t;)e=(t=e).parent;t.right!==e&&(t=e)}return t}rotateLeft(){var e=this.parent,t=this.right,r=t.left;return e.parent===this?e.parent=t:e.left===this?e.left=t:e.right=t,t.parent=e,(t.left=this).parent=t,(this.right=r)&&(r.parent=this),t}rotateRight(){var e=this.parent,t=this.left,r=t.right;return e.parent===this?e.parent=t:e.left===this?e.left=t:e.right=t,t.parent=e,(t.right=this).parent=t,(this.left=r)&&(r.parent=this),t}remove(){var e=this.parent;this===e.left?e.left=void 0:e.right=void 0}}n.RED=!0,n.BLACK=!1,r.default=n},{}],39:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const a=n(e("./TreeNode"));n=e("../../ContainerBase/index");const i=e("../../../utils/checkParams");class s extends n.Container{constructor(e=(e,t)=>e<t?-1:t<e?1:0){super(),this.root=void 0,this.header=new a.default,this.inOrderTraversal=(e,t)=>{return void 0!==e&&(!!this.inOrderTraversal(e.left,t)||!!t(e)||this.inOrderTraversal(e.right,t))},this.cmp=e}_lowerBound(e,t){let r;for(;e;){var n=this.cmp(e.key,t);if(n<0)e=e.right;else{if(!(0<n))return e;e=(r=e).left}}return void 0===r?this.header:r}_upperBound(e,t){let r;for(;e;){var n=this.cmp(e.key,t);n<=0?e=e.right:0<n&&(e=(r=e).left)}return void 0===r?this.header:r}_reverseLowerBound(e,t){let r;for(;e;){var n=this.cmp(e.key,t);if(n<0)e=(r=e).right;else{if(!(0<n))return e;e=e.left}}return void 0===r?this.header:r}_reverseUpperBound(e,t){let r;for(;e;){var n=this.cmp(e.key,t);n<0?e=(r=e).right:0<=n&&(e=e.left)}return void 0===r?this.header:r}eraseNodeSelfBalance(e){for(;;){var t=e.parent;if(t===this.header)return;if(e.color===a.default.RED)return void(e.color=a.default.BLACK);if(e===t.left){var r=t.right;if(r.color===a.default.RED)r.color=a.default.BLACK,t.color=a.default.RED,t===this.root?this.root=t.rotateLeft():t.rotateLeft();else if(r.color===a.default.BLACK){if(r.right&&r.right.color===a.default.RED)return r.color=t.color,t.color=a.default.BLACK,r.right.color=a.default.BLACK,void(t===this.root?this.root=t.rotateLeft():t.rotateLeft());r.left&&r.left.color===a.default.RED?(r.color=a.default.RED,r.left.color=a.default.BLACK,r.rotateRight()):(r.color=a.default.RED,e=t)}}else{r=t.left;if(r.color===a.default.RED)r.color=a.default.BLACK,t.color=a.default.RED,t===this.root?this.root=t.rotateRight():t.rotateRight();else{if(r.left&&r.left.color===a.default.RED)return r.color=t.color,t.color=a.default.BLACK,r.left.color=a.default.BLACK,void(t===this.root?this.root=t.rotateRight():t.rotateRight());r.right&&r.right.color===a.default.RED?(r.color=a.default.RED,r.right.color=a.default.BLACK,r.rotateLeft()):(r.color=a.default.RED,e=t)}}}}eraseNode(t){if(1===this.length)this.clear();else{let e=t;for(;e.left||e.right;){if(e.right)for(e=e.right;e.left;)e=e.left;else e.left&&(e=e.left);[t.key,e.key]=[e.key,t.key],[t.value,e.value]=[e.value,t.value],t=e}this.header.left===e?this.header.left=e.parent:this.header.right===e&&(this.header.right=e.parent),this.eraseNodeSelfBalance(e),e.remove(),--this.length,this.root.color=a.default.BLACK}}insertNodeSelfBalance(e){for(;;){var t=e.parent;if(t.color===a.default.BLACK)return;var r=t.parent;if(t===r.left){var n=r.right;if(n&&n.color===a.default.RED){if(n.color=t.color=a.default.BLACK,r===this.root)return;r.color=a.default.RED,e=r;continue}e===t.right?(e.color=a.default.BLACK,e.left&&(e.left.parent=t),e.right&&(e.right.parent=r),t.right=e.left,r.left=e.right,e.left=t,(e.right=r)===this.root?(this.root=e,this.header.parent=e):(n=r.parent).left===r?n.left=e:n.right=e,e.parent=r.parent,t.parent=e,r.parent=e):(t.color=a.default.BLACK,r===this.root?this.root=r.rotateRight():r.rotateRight())}else{var i,n=r.left;if(n&&n.color===a.default.RED){if(n.color=t.color=a.default.BLACK,r===this.root)return;r.color=a.default.RED,e=r;continue}e===t.left?(e.color=a.default.BLACK,e.left&&(e.left.parent=r),e.right&&(e.right.parent=t),r.right=e.left,t.left=e.right,e.left=r,e.right=t,r===this.root?(this.root=e,this.header.parent=e):(i=r.parent).left===r?i.left=e:i.right=e,e.parent=r.parent,t.parent=e,r.parent=e):(t.color=a.default.BLACK,r===this.root?this.root=r.rotateLeft():r.rotateLeft())}return void(r.color=a.default.RED)}}findElementNode(e,t){for(;e;){var r=this.cmp(e.key,t);if(r<0)e=e.right;else{if(!(0<r))return e;e=e.left}}return e}set(t,r,n){if(void 0===this.root)this.length+=1,this.root=new a.default(t,r),this.root.color=a.default.BLACK,this.root.parent=this.header,this.header.parent=this.root,this.header.left=this.root,this.header.right=this.root;else{let e;var i=this.header.left,s=this.cmp(i.key,t);if(0===s)i.value=r;else{if(0<s)i.left=new a.default(t,r),i.left.parent=i,e=i.left,this.header.left=e;else{s=this.header.right,i=this.cmp(s.key,t);if(0===i)return void(s.value=r);if(i<0)s.right=new a.default(t,r),s.right.parent=s,e=s.right,this.header.right=e;else{if(void 0!==n){i=n.node;if(i!==this.header){s=this.cmp(i.key,t);if(0===s)return void(i.value=r);if(0<s){n=i.pre(),s=this.cmp(n.key,t);if(0===s)return void(n.value=r);s<0&&(e=new a.default(t,r),void 0===n.right?(n.right=e).parent=n:(i.left=e).parent=i)}}}if(void 0===e)for(e=this.root;;){var o=this.cmp(e.key,t);if(0<o){if(void 0===e.left){e.left=new a.default(t,r),e=(e.left.parent=e).left;break}e=e.left}else{if(!(o<0))return void(e.value=r);if(void 0===e.right){e.right=new a.default(t,r),e=(e.right.parent=e).right;break}e=e.right}}}}this.length+=1,this.insertNodeSelfBalance(e)}}}clear(){this.length=0,this.root=void 0,this.header.parent=void 0,this.header.left=this.header.right=void 0}updateKeyByIterator(e,t){e=e.node;if(e===this.header)throw new TypeError("Invalid iterator!");if(1!==this.length){if(e===this.header.left)return 0<this.cmp(e.next().key,t)&&(e.key=t,!0);if(e===this.header.right)return this.cmp(e.pre().key,t)<0&&(e.key=t,!0);var r=e.pre().key;if(0<=this.cmp(r,t))return!1;if(r=e.next().key,this.cmp(r,t)<=0)return!1}return e.key=t,!0}eraseElementByPos(t){(0,i.checkWithinAccessParams)(t,0,this.length-1);let r=0;this.inOrderTraversal(this.root,e=>t===r?(this.eraseNode(e),!0):(r+=1,!1))}eraseElementByKey(e){this.length&&void 0!==(e=this.findElementNode(this.root,e))&&this.eraseNode(e)}eraseElementByIterator(e){var t=e.node;if(t===this.header)throw new RangeError("Invalid iterator");return void 0===t.right&&(e=e.next()),this.eraseNode(t),e}getHeight(){if(!this.length)return 0;const t=e=>e?Math.max(t(e.left),t(e.right))+1:0;return t(this.root)}}r.default=s},{"../../../utils/checkParams":43,"../../ContainerBase/index":25,"./TreeNode":38}],40:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.OrderedMapIterator=void 0;const i=e("../ContainerBase/index"),s=e("../../utils/checkParams");var o=n(e("./Base/index"));class a extends n(e("./Base/TreeIterator")).default{get pointer(){if(this.node===this.header)throw new RangeError("OrderedMap iterator access denied");return new Proxy([],{get:(e,t)=>"0"===t?this.node.key:"1"===t?this.node.value:void 0,set:(e,t,r)=>{if("1"!==t)throw new TypeError("props must be 1");return this.node.value=r,!0}})}copy(){return new a(this.node,this.header,this.iteratorType)}}r.OrderedMapIterator=a;class l extends o.default{constructor(e=[],t){super(t),this.iterationFunc=function*(e){void 0!==e&&(yield*this.iterationFunc(e.left),yield[e.key,e.value],yield*this.iterationFunc(e.right))},this.iterationFunc=this.iterationFunc.bind(this),e.forEach(([e,t])=>this.setElement(e,t))}begin(){return new a(this.header.left||this.header,this.header)}end(){return new a(this.header,this.header)}rBegin(){return new a(this.header.right||this.header,this.header,i.ContainerIterator.REVERSE)}rEnd(){return new a(this.header,this.header,i.ContainerIterator.REVERSE)}front(){var e;if(this.length)return[(e=this.header.left).key,e.value]}back(){var e;if(this.length)return[(e=this.header.right).key,e.value]}forEach(e){let t=0;for(const r of this)e(r,t++)}lowerBound(e){e=this._lowerBound(this.root,e);return new a(e,this.header)}upperBound(e){e=this._upperBound(this.root,e);return new a(e,this.header)}reverseLowerBound(e){e=this._reverseLowerBound(this.root,e);return new a(e,this.header)}reverseUpperBound(e){e=this._reverseUpperBound(this.root,e);return new a(e,this.header)}setElement(e,t,r){this.set(e,t,r)}find(e){e=this.findElementNode(this.root,e);return void 0!==e?new a(e,this.header):this.end()}getElementByKey(e){e=this.findElementNode(this.root,e);return e?e.value:void 0}getElementByPos(e){(0,s.checkWithinAccessParams)(e,0,this.length-1);let t,r=0;for(const n of this){if(r===e){t=n;break}r+=1}return t}union(e){e.forEach(([e,t])=>this.setElement(e,t))}[Symbol.iterator](){return this.iterationFunc(this.root)}}r.default=l},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/TreeIterator":37,"./Base/index":39}],41:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(r,"__esModule",{value:!0}),r.OrderedSetIterator=void 0,n(e("./Base/index")));const s=e("../ContainerBase/index"),o=e("../../utils/checkParams");class a extends n(e("./Base/TreeIterator")).default{get pointer(){if(this.node===this.header)throw new RangeError("OrderedSet iterator access denied!");return this.node.key}copy(){return new a(this.node,this.header,this.iteratorType)}}r.OrderedSetIterator=a;class l extends i.default{constructor(e=[],t){super(t),this.iterationFunc=function*(e){void 0!==e&&(yield*this.iterationFunc(e.left),yield e.key,yield*this.iterationFunc(e.right))},e.forEach(e=>this.insert(e)),this.iterationFunc=this.iterationFunc.bind(this)}begin(){return new a(this.header.left||this.header,this.header)}end(){return new a(this.header,this.header)}rBegin(){return new a(this.header.right||this.header,this.header,s.ContainerIterator.REVERSE)}rEnd(){return new a(this.header,this.header,s.ContainerIterator.REVERSE)}front(){return this.header.left?this.header.left.key:void 0}back(){return this.header.right?this.header.right.key:void 0}forEach(e){let t=0;for(const r of this)e(r,t++)}getElementByPos(e){(0,o.checkWithinAccessParams)(e,0,this.length-1);let t,r=0;for(const n of this)r===e&&(t=n),r+=1;return t}insert(e,t){this.set(e,void 0,t)}find(e){e=this.findElementNode(this.root,e);return void 0!==e?new a(e,this.header):this.end()}lowerBound(e){e=this._lowerBound(this.root,e);return new a(e,this.header)}upperBound(e){e=this._upperBound(this.root,e);return new a(e,this.header)}reverseLowerBound(e){e=this._reverseLowerBound(this.root,e);return new a(e,this.header)}reverseUpperBound(e){e=this._reverseUpperBound(this.root,e);return new a(e,this.header)}union(e){e.forEach(e=>this.insert(e))}[Symbol.iterator](){return this.iterationFunc(this.root)}}r.default=l},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/TreeIterator":37,"./Base/index":39}],42:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(r,"__esModule",{value:!0}),r.HashContainer=r.TreeContainer=r.SequentialContainer=r.ContainerIterator=r.Container=r.HashMap=r.HashSet=r.OrderedMapIterator=r.OrderedMap=r.OrderedSetIterator=r.OrderedSet=r.DequeIterator=r.Deque=r.LinkListIterator=r.LinkList=r.VectorIterator=r.Vector=r.PriorityQueue=r.Queue=r.Stack=void 0,e("./container/OtherContainer/Stack")),s=(Object.defineProperty(r,"Stack",{enumerable:!0,get:function(){return n(i).default}}),e("./container/OtherContainer/Queue")),o=(Object.defineProperty(r,"Queue",{enumerable:!0,get:function(){return n(s).default}}),e("./container/OtherContainer/PriorityQueue")),a=(Object.defineProperty(r,"PriorityQueue",{enumerable:!0,get:function(){return n(o).default}}),e("./container/SequentialContainer/Vector")),l=(Object.defineProperty(r,"Vector",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(r,"VectorIterator",{enumerable:!0,get:function(){return a.VectorIterator}}),e("./container/SequentialContainer/LinkList")),h=(Object.defineProperty(r,"LinkList",{enumerable:!0,get:function(){return n(l).default}}),Object.defineProperty(r,"LinkListIterator",{enumerable:!0,get:function(){return l.LinkListIterator}}),e("./container/SequentialContainer/Deque")),u=(Object.defineProperty(r,"Deque",{enumerable:!0,get:function(){return n(h).default}}),Object.defineProperty(r,"DequeIterator",{enumerable:!0,get:function(){return h.DequeIterator}}),e("./container/TreeContainer/OrderedSet")),c=(Object.defineProperty(r,"OrderedSet",{enumerable:!0,get:function(){return n(u).default}}),Object.defineProperty(r,"OrderedSetIterator",{enumerable:!0,get:function(){return u.OrderedSetIterator}}),e("./container/TreeContainer/OrderedMap")),f=(Object.defineProperty(r,"OrderedMap",{enumerable:!0,get:function(){return n(c).default}}),Object.defineProperty(r,"OrderedMapIterator",{enumerable:!0,get:function(){return c.OrderedMapIterator}}),e("./container/HashContainer/HashSet")),p=(Object.defineProperty(r,"HashSet",{enumerable:!0,get:function(){return n(f).default}}),e("./container/HashContainer/HashMap")),d=(Object.defineProperty(r,"HashMap",{enumerable:!0,get:function(){return n(p).default}}),e("./container/ContainerBase/index")),g=(Object.defineProperty(r,"Container",{enumerable:!0,get:function(){return d.Container}}),Object.defineProperty(r,"ContainerIterator",{enumerable:!0,get:function(){return d.ContainerIterator}}),e("./container/SequentialContainer/Base/index")),m=(Object.defineProperty(r,"SequentialContainer",{enumerable:!0,get:function(){return n(g).default}}),e("./container/TreeContainer/Base/index")),y=(Object.defineProperty(r,"TreeContainer",{enumerable:!0,get:function(){return n(m).default}}),e("./container/HashContainer/Base/index"));Object.defineProperty(r,"HashContainer",{enumerable:!0,get:function(){return n(y).default}})},{"./container/ContainerBase/index":25,"./container/HashContainer/Base/index":26,"./container/HashContainer/HashMap":27,"./container/HashContainer/HashSet":28,"./container/OtherContainer/PriorityQueue":29,"./container/OtherContainer/Queue":30,"./container/OtherContainer/Stack":31,"./container/SequentialContainer/Base/index":33,"./container/SequentialContainer/Deque":34,"./container/SequentialContainer/LinkList":35,"./container/SequentialContainer/Vector":36,"./container/TreeContainer/Base/index":39,"./container/TreeContainer/OrderedMap":40,"./container/TreeContainer/OrderedSet":41}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkWithinAccessParams=void 0,r.checkWithinAccessParams=function(e,t,r){if(e<t||r<e)throw new RangeError}},{}],44:[function(e,t,r){"use strict";const n=e("yallist"),o=Symbol("max"),a=Symbol("length"),l=Symbol("lengthCalculator"),s=Symbol("allowStale"),h=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),f=Symbol("lruList"),p=Symbol("cache"),i=Symbol("updateAgeOnGet"),d=()=>1;const g=(e,t,r)=>{t=e[p].get(t);if(t){var n=t.value;if(m(e,n)){if(b(e,t),!e[s])return}else r&&(e[i]&&(t.value.now=Date.now()),e[f].unshiftNode(t));return n.value}},m=(e,t)=>{var r;return!(!t||!t.maxAge&&!e[h])&&(r=Date.now()-t.now,t.maxAge?r>t.maxAge:e[h]&&r>e[h])},y=t=>{if(t[a]>t[o])for(let e=t[f].tail;t[a]>t[o]&&null!==e;){var r=e.prev;b(t,e),e=r}},b=(e,t)=>{var r;t&&(r=t.value,e[u]&&e[u](r.key,r.value),e[a]-=r.length,e[p].delete(r.key),e[f].removeNode(t))};class v{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const _=(e,t,r,n)=>{let i=r.value;m(e,i)&&(b(e,r),e[s]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};t.exports=class{constructor(e){if((e=(e="number"==typeof e?{max:e}:e)||{}).max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;var t=e.length||d;if(this[l]="function"!=typeof t?d:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[h]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[i]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,y(this)}get max(){return this[o]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[h]=e,y(this)}get maxAge(){return this[h]}set lengthCalculator(e){(e="function"!=typeof e?d:e)!==this[l]&&(this[l]=e,this[a]=0,this[f].forEach(e=>{e.length=this[l](e.value,e.key),this[a]+=e.length})),y(this)}get lengthCalculator(){return this[l]}get length(){return this[a]}get itemCount(){return this[f].length}rforEach(t,r){r=r||this;for(let e=this[f].tail;null!==e;){var n=e.prev;_(this,t,e,r),e=n}}forEach(t,r){r=r||this;for(let e=this[f].head;null!==e;){var n=e.next;_(this,t,e,r),e=n}}keys(){return this[f].toArray().map(e=>e.key)}values(){return this[f].toArray().map(e=>e.value)}reset(){this[u]&&this[f]&&this[f].length&&this[f].forEach(e=>this[u](e.key,e.value)),this[p]=new Map,this[f]=new n,this[a]=0}dump(){return this[f].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[f]}set(e,t,r){if((r=r||this[h])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var n,i=r?Date.now():0,s=this[l](t,e);return this[p].has(e)?s>this[o]?(b(this,this[p].get(e)),!1):(n=this[p].get(e).value,this[u]&&!this[c]&&this[u](e,n.value),n.now=i,n.maxAge=r,n.value=t,this[a]+=s-n.length,n.length=s,this.get(e),y(this),!0):(n=new v(e,t,s,i,r)).length>this[o]?(this[u]&&this[u](e,t),!1):(this[a]+=n.length,this[f].unshift(n),this[p].set(e,this[f].head),y(this),!0)}has(e){return!!this[p].has(e)&&(e=this[p].get(e).value,!m(this,e))}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){var e=this[f].tail;return e?(b(this,e),e.value):null}del(e){b(this,this[p].get(e))}load(t){this.reset();var r=Date.now();for(let e=t.length-1;0<=e;e--){var n=t[e],i=n.e||0;0===i?this.set(n.k,n.v):0<(i=i-r)&&this.set(n.k,n.v,i)}}prune(){this[p].forEach((e,t)=>g(this,t,!1))}}},{yallist:90}],45:[function(e,a,t){!function(o){!function(){const s=a.exports;s.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},s.codes={};for(const n in s.types){var e=s.types[n];s.codes[e]=n}s.CMD_SHIFT=4,s.CMD_MASK=240,s.DUP_MASK=8,s.QOS_MASK=3,s.QOS_SHIFT=1,s.RETAIN_MASK=1,s.VARBYTEINT_MASK=127,s.VARBYTEINT_FIN_MASK=128,s.VARBYTEINT_MAX=268435455,s.SESSIONPRESENT_MASK=1,s.SESSIONPRESENT_HEADER=o.from([s.SESSIONPRESENT_MASK]),s.CONNACK_HEADER=o.from([s.codes.connack<<s.CMD_SHIFT]),s.USERNAME_MASK=128,s.PASSWORD_MASK=64,s.WILL_RETAIN_MASK=32,s.WILL_QOS_MASK=24,s.WILL_QOS_SHIFT=3,s.WILL_FLAG_MASK=4,s.CLEAN_SESSION_MASK=2,s.CONNECT_HEADER=o.from([s.codes.connect<<s.CMD_SHIFT]),s.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},s.propertiesCodes={};for(const i in s.properties){var t=s.properties[i];s.propertiesCodes[t]=i}function r(i){return[0,1,2].map(n=>[0,1].map(r=>[0,1].map(e=>{var t=o.alloc(1);return t.writeUInt8(s.codes[i]<<s.CMD_SHIFT|(r?s.DUP_MASK:0)|n<<s.QOS_SHIFT|e,0,!0),t})))}s.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},s.PUBLISH_HEADER=r("publish"),s.SUBSCRIBE_HEADER=r("subscribe"),s.SUBSCRIBE_OPTIONS_QOS_MASK=3,s.SUBSCRIBE_OPTIONS_NL_MASK=1,s.SUBSCRIBE_OPTIONS_NL_SHIFT=2,s.SUBSCRIBE_OPTIONS_RAP_MASK=1,s.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,s.SUBSCRIBE_OPTIONS_RH_MASK=3,s.SUBSCRIBE_OPTIONS_RH_SHIFT=4,s.SUBSCRIBE_OPTIONS_RH=[0,16,32],s.SUBSCRIBE_OPTIONS_NL=4,s.SUBSCRIBE_OPTIONS_RAP=8,s.SUBSCRIBE_OPTIONS_QOS=[0,1,2],s.UNSUBSCRIBE_HEADER=r("unsubscribe"),s.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},s.SUBACK_HEADER=o.from([s.codes.suback<<s.CMD_SHIFT]),s.VERSION3=o.from([3]),s.VERSION4=o.from([4]),s.VERSION5=o.from([5]),s.VERSION131=o.from([131]),s.VERSION132=o.from([132]),s.QOS=[0,1,2].map(e=>o.from([e])),s.EMPTY={pingreq:o.from([s.codes.pingreq<<4,0]),pingresp:o.from([s.codes.pingresp<<4,0]),disconnect:o.from([s.codes.disconnect<<4,0])}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:17}],46:[function(t,r,e){!function(o){!function(){const n=t("./writeToStream");var e=t("events");class i extends e{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;var t=new Array(this._array.length),r=this._array;let n=0,i;for(i=0;i<r.length&&void 0!==r[i];i++)"string"!=typeof r[i]?t[i]=r[i].length:t[i]=o.byteLength(r[i]),e+=t[i];var s=o.allocUnsafe(e);for(i=0;i<r.length&&void 0!==r[i];i++)"string"!=typeof r[i]?r[i].copy(s,n):s.write(r[i],n),n+=t[i];return s}}r.exports=function(e,t){var r=new i;return n(e,r,t),r.concat()}}.call(this)}.call(this,t("buffer").Buffer)},{"./writeToStream":51,buffer:17,events:22}],47:[function(e,t,r){r.parser=e("./parser").parser,r.generate=e("./generate"),r.writeToStream=e("./writeToStream")},{"./generate":46,"./parser":50,"./writeToStream":51}],48:[function(e,n,t){!function(s){!function(){const t={},i=s.isBuffer(s.from([1,2]).subarray(0,1));function r(e){var t=s.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}n.exports={cache:t,generateCache:function(){for(let e=0;e<65536;e++)t[e]=r(e)},generateNumber:r,genBufVariableByteInt:function(e){let t=0,r=0;for(var n=s.allocUnsafe(4);t=e%128|0,0<(e=e/128|0)&&(t|=128),n.writeUInt8(t,r++),0<e&&r<4;);return 0<e&&(r=0),i?n.subarray(0,r):n.slice(0,r)},generate4ByteBuffer:function(e){var t=s.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:17}],49:[function(e,t,r){t.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],50:[function(e,t,r){const n=e("bl");var i=e("events");const s=e("./packet"),a=e("./constants"),l=e("debug")("mqtt-packet:parser");class o extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof o?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new o).parser(e)}_resetState(){l("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new s,this.error=null,this._list=n(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),l("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||0<this._list.length)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,l("parse: state complete. _stateCounter is now: %d",this._stateCounter),l("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return l("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){var e=this._list.readUInt8(0);return this.packet.cmd=a.types[e>>a.CMD_SHIFT],this.packet.retain=0!=(e&a.RETAIN_MASK),this.packet.qos=e>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(e&a.DUP_MASK),l("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){var e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),l("_parseLength %d",e.value),!!e}_parsePayload(){l("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return l("_parsePayload complete result: %s",e),e}_parseConnect(){l("_parseConnect");var e={},t=this.packet,r=this._parseString();if(null===r)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==r&&"MQIsdp"!==r)return this._emitError(new Error("Invalid protocolId"));if(t.protocolId=r,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(t.protocolVersion=this._list.readUInt8(this._pos),128<=t.protocolVersion&&(t.bridgeMode=!0,t.protocolVersion=t.protocolVersion-128),3!==t.protocolVersion&&4!==t.protocolVersion&&5!==t.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(e.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,e.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,e.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,e.will&&(t.will={},t.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),t.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),t.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,t.keepalive=this._parseNum(),-1===t.keepalive)return this._emitError(new Error("Packet too short"));5===t.protocolVersion&&(r=this._parseProperties(),Object.getOwnPropertyNames(r).length)&&(t.properties=r);var r=this._parseString();if(null===r)return this._emitError(new Error("Packet too short"));if(t.clientId=r,l("_parseConnect: packet.clientId: %s",t.clientId),e.will){if(5===t.protocolVersion&&(r=this._parseProperties(),Object.getOwnPropertyNames(r).length)&&(t.will.properties=r),null===(r=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(t.will.topic=r,l("_parseConnect: packet.will.topic: %s",t.will.topic),null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));t.will.payload=r,l("_parseConnect: packet.will.paylaod: %s",t.will.payload)}if(e.username){if(null===(r=this._parseString()))return this._emitError(new Error("Cannot parse username"));t.username=r,l("_parseConnect: packet.username: %s",t.username)}if(e.password){if(null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));t.password=r}return this.settings=t,l("_parseConnect: complete"),t}_parseConnack(){l("_parseConnack");var e,t=this.packet;if(this._list.length<1)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)2<=this._list.length?t.reasonCode=this._list.readUInt8(this._pos++):t.reasonCode=0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(-1===t.returnCode||-1===t.reasonCode)return this._emitError(new Error("Cannot parse return code"));5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e),l("_parseConnack: complete")}_parsePublish(){l("_parsePublish");var e,t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));0<t.qos&&!this._parseMessageId()||(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e),t.payload=this._list.slice(this._pos,t.length),l("_parsePublish: payload from buffer list: %o",t.payload))}_parseSubscribe(){l("_parseSubscribe");var e,t,r,n,i,s,o=this.packet;if(1!==o.qos)return this._emitError(new Error("Wrong subscribe header"));if(o.subscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(s=this._parseProperties(),Object.getOwnPropertyNames(s).length)&&(o.properties=s);this._pos<o.length;){if(null===(i=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=o.length)return this._emitError(new Error("Malformed Subscribe Payload"));e=(t=this._parseByte())&a.SUBSCRIBE_OPTIONS_QOS_MASK,n=0!=(t>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK),r=0!=(t>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK),t=t>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:i,qos:e},5===this.settings.protocolVersion?(i.nl=n,i.rap=r,i.rh=t):this.settings.bridgeMode&&(i.rh=0,i.rap=!0,i.nl=!0),l("_parseSubscribe: push subscription `%s` to subscription",i),o.subscriptions.push(i)}}_parseSuback(){l("_parseSuback");var e,t=this.packet;if(this.packet.granted=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e);this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}_parseUnsubscribe(){l("_parseUnsubscribe");var e,t=this.packet;if(t.unsubscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e);this._pos<t.length;){var r=this._parseString();if(null===r)return this._emitError(new Error("Cannot parse topic"));l("_parseUnsubscribe: push topic `%s` to unsubscriptions",r),t.unsubscriptions.push(r)}}_parseUnsuback(){l("_parseUnsuback");var e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){var t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){l("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);var e,t=this.packet;return this._parseMessageId(),5===this.settings.protocolVersion&&(2<t.length?(t.reasonCode=this._parseByte(),l("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)):t.reasonCode=0,3<t.length)&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e),!0}_parseDisconnect(){var e,t=this.packet;return l("_parseDisconnect"),5===this.settings.protocolVersion&&(0<this._list.length?t.reasonCode=this._parseByte():t.reasonCode=0,e=this._parseProperties(),Object.getOwnPropertyNames(e).length)&&(t.properties=e),l("_parseDisconnect result: true"),!0}_parseAuth(){l("_parseAuth");var e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();var t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),l("_parseAuth: result: true"),!0}_parseMessageId(){var e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(l("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){var t=this._parseNum(),r=t+this._pos;return-1===t||r>this._list.length||r>this.packet.length?null:(r=this._list.toString("utf8",this._pos,r),this._pos+=t,l("_parseString: result: %s",r),r)}_parseStringPair(){return l("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){var e=this._parseNum(),t=e+this._pos;return-1===e||t>this._list.length||t>this.packet.length?null:(t=this._list.slice(this._pos,t),this._pos+=e,l("_parseBuffer: result: %o",t),t)}_parseNum(){var e;return this._list.length-this._pos<2?-1:(e=this._list.readUInt16BE(this._pos),this._pos+=2,l("_parseNum: result: %s",e),e)}_parse4ByteNum(){var e;return this._list.length-this._pos<4?-1:(e=this._list.readUInt32BE(this._pos),this._pos+=4,l("_parse4ByteNum: result: %s",e),e)}_parseVarByteNum(e){l("_parseVarByteNum");var t;let r=0,n=1,i=0,s=!1;for(var o=this._pos||0;r<4&&o+r<this._list.length;){if(t=this._list.readUInt8(o+r++),i+=n*(t&a.VARBYTEINT_MASK),n*=128,0==(t&a.VARBYTEINT_FIN_MASK)){s=!0;break}if(this._list.length<=r)break}return!s&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),o&&(this._pos+=r),s=!!s&&(e?{bytes:r,value:i}:i),l("_parseVarByteNum: result: %o",s),s}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),l("_parseByte: result: %o",e),e}_parseByType(e){switch(l("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){l("_parseProperties");for(var e=this._parseVarByteNum(),t=this._pos+e,r={};this._pos<t;){var n=this._parseByte();if(!n)return this._emitError(new Error("Cannot parse property code type")),!1;var i,s,n=a.propertiesCodes[n];if(!n)return this._emitError(new Error("Unknown property")),!1;"userProperties"===n?(r[n]||(r[n]=Object.create(null)),i=this._parseByType(a.propertiesTypes[n]),r[n][i.name]?(Array.isArray(r[n][i.name])||(s=r[n][i.name],r[n][i.name]=[s]),r[n][i.name].push(i.value)):r[n][i.name]=i.value):r[n]?(Array.isArray(r[n])||(r[n]=[r[n]]),r[n].push(this._parseByType(a.propertiesTypes[n]))):r[n]=this._parseByType(a.propertiesTypes[n])}return r}_newPacket(){return l("_newPacket"),this.packet&&(this._list.consume(this.packet.length),l("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),l("_newPacket: new packet"),this.packet=new s,!(this._pos=0)}_emitError(e){l("_emitError"),this.error=e,this.emit("error",e)}}t.exports=o},{"./constants":45,"./packet":49,bl:15,debug:18,events:22}],51:[function(f,p,e){!function(ge){!function(){const X=f("./constants"),ee=ge.allocUnsafe(0),te=ge.from([0]);var e=f("./numbers");const re=f("process-nextick-args").nextTick,ne=f("debug")("mqtt-packet:writeToStream"),r=e.cache,n=e.generateNumber,ie=e.generateCache,a=e.genBufVariableByteInt,s=e.generate4ByteBuffer;let se=l,oe=!0;function t(i,s,n){switch(ne("generate called"),s.cork&&(s.cork(),re(ae,s)),oe&&(oe=!1,ie()),ne("generate: packet.cmd: %s",i.cmd),i.cmd){case"connect":{var o=i;var a=s;var o=o||{},l=o.protocolId||"MQTT";let e=o.protocolVersion||4;var h=o.will;let t=o.clean;var u=o.keepalive||0,c=o.clientId||"",f=o.username,p=o.password,d=o.properties;void 0===t&&(t=!0);let r=0;{if(!l||"string"!=typeof l&&!ge.isBuffer(l))return a.emit("error",new Error("Invalid protocolId")),!1;r+=l.length+2}{if(3!==e&&4!==e&&5!==e)return a.emit("error",new Error("Invalid protocol version")),!1;r+=1}if(("string"==typeof c||ge.isBuffer(c))&&(c||4<=e)&&(c||t))r+=ge.byteLength(c)+2;else{if(e<4)return a.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(0==+t)return a.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}{if("number"!=typeof u||u<0||65535<u||u%1!=0)return a.emit("error",new Error("Invalid keepalive")),!1;r+=2}if(r+=1,5===e){var j=ce(a,d);if(!j)return!1;r+=j.length}if(h){if("object"!=typeof h)return a.emit("error",new Error("Invalid will")),!1;if(!h.topic||"string"!=typeof h.topic)return a.emit("error",new Error("Invalid will topic")),!1;if(r=r+(ge.byteLength(h.topic)+2)+2,h.payload){if(!(0<=h.payload.length))return a.emit("error",new Error("Invalid will payload")),!1;"string"==typeof h.payload?r+=ge.byteLength(h.payload):r+=h.payload.length}var g={};if(5===e){if(!(g=ce(a,h.properties)))return!1;r+=g.length}}let n=!1;if(null!=f){if(!de(f))return a.emit("error",new Error("Invalid username")),!1;n=!0,r+=ge.byteLength(f)+2}if(null!=p){if(!n)return a.emit("error",new Error("Username is required to use password")),!1;if(!de(p))return a.emit("error",new Error("Invalid password")),!1;r+=pe(p)+2}a.write(X.CONNECT_HEADER),le(a,r),ue(a,l),o.bridgeMode&&(e+=128);a.write(131===e?X.VERSION131:132===e?X.VERSION132:4===e?X.VERSION4:5===e?X.VERSION5:X.VERSION3);d=0;d=(d=(d=(d=(d=(d|=null!=f?X.USERNAME_MASK:0)|(null!=p?X.PASSWORD_MASK:0))|(h&&h.retain?X.WILL_RETAIN_MASK:0))|(h&&h.qos?h.qos<<X.WILL_QOS_SHIFT:0))|(h?X.WILL_FLAG_MASK:0))|(t?X.CLEAN_SESSION_MASK:0),a.write(ge.from([d])),se(a,u),5===e&&j.write();ue(a,c),h&&(5===e&&g.write(),he(a,h.topic),ue(a,h.payload));null!=f&&ue(a,f);null!=p&&ue(a,p);return!0;return}case"connack":{l=i;o=s;d=n;d=d?d.protocolVersion:4,l=l||{},u=5===d?l.reasonCode:l.returnCode,j=l.properties;let e=2;if("number"!=typeof u)return o.emit("error",new Error("Invalid return code")),!1;let t=null;if(5===d){if(!(t=ce(o,j)))return!1;e+=t.length}o.write(X.CONNACK_HEADER),le(o,e),o.write(l.sessionPresent?X.SESSIONPRESENT_HEADER:te),o.write(ge.from([u])),null!=t&&t.write();return!0;return}case"publish":{c=i;g=s;h=n;ne("publish: packet: %o",c);var h=h?h.protocolVersion:4,c=c||{},f=c.qos||0,a=c.retain?X.RETAIN_MASK:0,p=c.topic,m=c.payload||ee,y=c.messageId,b=c.properties;let e=0;if("string"==typeof p)e+=ge.byteLength(p)+2;else{if(!ge.isBuffer(p))return g.emit("error",new Error("Invalid topic")),!1;e+=p.length+2}ge.isBuffer(m)?e+=m.length:e+=ge.byteLength(m);{if(f&&"number"!=typeof y)return g.emit("error",new Error("Invalid messageId")),!1;f&&(e+=2)}let t=null;if(5===h){if(!(t=ce(g,b)))return!1;e+=t.length}g.write(X.PUBLISH_HEADER[f][c.dup?1:0][a?1:0]),le(g,e),se(g,pe(p)),g.write(p),0<f&&se(g,y);null!=t&&t.write();return ne("publish: payload: %o",m),g.write(m);return}case"puback":case"pubrec":case"pubrel":case"pubcomp":{b=i;y=s;m=n;var v=m?m.protocolVersion:4,b=b||{},_=b.cmd||"puback",U=b.messageId,w=b.dup&&"pubrel"===_?X.DUP_MASK:0;let e=0;var q=b.reasonCode,b=b.properties;let t=5===v?3:2;"pubrel"===_&&(e=1);if("number"!=typeof U)return y.emit("error",new Error("Invalid messageId")),!1;let r=null;if(5===v&&"object"==typeof b){if(!(r=fe(y,b,m,t)))return!1;t+=r.length}y.write(X.ACKS[_][e][w][0]),le(y,t),se(y,U),5===v&&y.write(ge.from([q]));null!==r&&r.write();return!0;return}case"subscribe":{_=i;var S=s;w=n;ne("subscribe: packet: ");var D=w?w.protocolVersion:4,w=_||{},_=w.dup?X.DUP_MASK:0,U=w.messageId,E=w.subscriptions,w=w.properties;let t=0;{if("number"!=typeof U)return S.emit("error",new Error("Invalid messageId")),!1;t+=2}let e=null;if(5===D){if(!(e=ce(S,w)))return!1;t+=e.length}{if("object"!=typeof E||!E.length)return S.emit("error",new Error("Invalid subscriptions")),!1;for(let e=0;e<E.length;e+=1){var F=E[e].topic,V=E[e].qos;if("string"!=typeof F)return S.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof V)return S.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===D){if("boolean"!=typeof(E[e].nl||!1))return S.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(E[e].rap||!1))return S.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;V=E[e].rh||0;if("number"!=typeof V||2<V)return S.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}t+=ge.byteLength(F)+2+1}}ne("subscribe: writing to stream: %o",X.SUBSCRIBE_HEADER),S.write(X.SUBSCRIBE_HEADER[1][_?1:0][0]),le(S,t),se(S,U),null!==e&&e.write();let r=!0;for(const N of E){var z=N.topic,W=N.qos,H=+N.nl,Q=+N.rap,K=N.rh;let e;he(S,z),e=X.SUBSCRIBE_OPTIONS_QOS[W],5===D&&(e=(e=(e|=H?X.SUBSCRIBE_OPTIONS_NL:0)|(Q?X.SUBSCRIBE_OPTIONS_RAP:0))|(K?X.SUBSCRIBE_OPTIONS_RH[K]:0)),r=S.write(ge.from([e]))}return r;return}case"suback":{v=i;var r=s;q=n;var k=q?q.protocolVersion:4,v=v||{},x=v.messageId,$=v.granted,v=v.properties;let t=0;{if("number"!=typeof x)return r.emit("error",new Error("Invalid messageId")),!1;t+=2}{if("object"!=typeof $||!$.length)return r.emit("error",new Error("Invalid qos vector")),!1;for(let e=0;e<$.length;e+=1){if("number"!=typeof $[e])return r.emit("error",new Error("Invalid qos vector")),!1;t+=1}}let e=null;if(5===k){if(!(e=fe(r,v,q,t)))return!1;t+=e.length}r.write(X.SUBACK_HEADER),le(r,t),se(r,x),null!==e&&e.write();return r.write(ge.from($));return}case"unsubscribe":{k=i;var C=s;x=n;var x=x?x.protocolVersion:4,k=k||{},I=k.messageId,T=k.dup?X.DUP_MASK:0,A=k.unsubscriptions,k=k.properties;let t=0;{if("number"!=typeof I)return C.emit("error",new Error("Invalid messageId")),!1;t+=2}{if("object"!=typeof A||!A.length)return C.emit("error",new Error("Invalid unsubscriptions")),!1;for(let e=0;e<A.length;e+=1){if("string"!=typeof A[e])return C.emit("error",new Error("Invalid unsubscriptions")),!1;t+=ge.byteLength(A[e])+2}}let e=null;if(5===x){if(!(e=ce(C,k)))return!1;t+=e.length}C.write(X.UNSUBSCRIBE_HEADER[1][T?1:0][0]),le(C,t),se(C,I),null!==e&&e.write();let r=!0;for(let e=0;e<A.length;e++)r=he(C,A[e]);return r;return}case"unsuback":{T=i;var P=s;I=n;var B=I?I.protocolVersion:4,T=T||{},O=T.messageId,R=T.dup?X.DUP_MASK:0,Y=T.granted,J=T.properties,T=T.cmd;let t=2;if("number"!=typeof O)return P.emit("error",new Error("Invalid messageId")),!1;if(5===B){if("object"!=typeof Y||!Y.length)return P.emit("error",new Error("Invalid qos vector")),!1;for(let e=0;e<Y.length;e+=1){if("number"!=typeof Y[e])return P.emit("error",new Error("Invalid qos vector")),!1;t+=1}}let e=null;if(5===B){if(!(e=fe(P,J,I,t)))return!1;t+=e.length}P.write(X.ACKS[T][0][R][0]),le(P,t),se(P,O),null!==e&&e.write();5===B&&P.write(ge.from(Y));return!0;return}case"pingreq":case"pingresp":return J=i,s.write(X.EMPTY[J.cmd]);case"disconnect":{R=i;O=s;B=n;var M=B?B.protocolVersion:4,R=R||{},L=R.reasonCode,R=R.properties;let e=5===M?1:0,t=null;if(5===M){if(!(t=fe(O,R,B,e)))return!1;e+=t.length}O.write(ge.from([X.codes.disconnect<<4])),le(O,e),5===M&&O.write(ge.from([L]));null!==t&&t.write();return!0;return}case"auth":var M=i,L=s,t=n,e=t?t.protocolVersion:4,G=(M=M||{}).reasonCode,M=M.properties,Z=5===e?1:0;return(5!==e&&L.emit("error",new Error("Invalid mqtt version for auth packet")),e=fe(L,M,t,Z))?(Z+=e.length,L.write(ge.from([X.codes.auth<<4])),le(L,Z),L.write(ge.from([G])),null!==e&&e.write(),!0):!1;default:return s.emit("error",new Error("Unknown command")),!1}}function ae(e){e.uncork()}Object.defineProperty(t,"cacheNumbers",{get(){return se===l},set(e){se=e?(r&&0!==Object.keys(r).length||(oe=!0),l):(oe=!1,h)}});const i={};function le(t,r){if(r>X.VARBYTEINT_MAX)t.emit("error",new Error("Invalid variable byte integer: "+r));else{let e=i[r];e||(e=a(r),r<16384&&(i[r]=e)),ne("writeVarByteInt: writing to stream: %o",e),t.write(e)}}function he(e,t){var r=ge.byteLength(t);return se(e,r),ne("writeString: %s",t),e.write(t,"utf8")}function o(e,t,r){he(e,t),he(e,r)}function l(e,t){return ne("writeNumberCached: number: %d",t),ne("writeNumberCached: %o",r[t]),e.write(r[t])}function h(e,t){t=n(t);return ne("writeNumberGenerated: %o",t),e.write(t)}function ue(e,t){"string"==typeof t?he(e,t):t?(se(e,t.length),e.write(t)):se(e,0)}function ce(r,e){if("object"!=typeof e||null!=e.length)return{length:1,write(){c(r,{},0)}};let n=0;function i(e,n){let t=0;switch(X.propertiesTypes[e]){case"byte":if("boolean"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=2;break;case"int8":if("number"!=typeof n||n<0||255<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=2;break;case"binary":if(n&&null===n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=1+ge.byteLength(n)+2;break;case"int16":if("number"!=typeof n||n<0||65535<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=3;break;case"int32":if("number"!=typeof n||n<0||4294967295<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=5;break;case"var":if("number"!=typeof n||n<0||268435455<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=1+ge.byteLength(a(n));break;case"string":if("string"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=3+ge.byteLength(n.toString());break;case"pair":if("object"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=Object.getOwnPropertyNames(n).reduce((e,r)=>{var t=n[r];return Array.isArray(t)?e+=t.reduce((e,t)=>e+=3+ge.byteLength(r.toString())+2+ge.byteLength(t.toString()),0):e+=3+ge.byteLength(r.toString())+2+ge.byteLength(n[r].toString()),e},0);break;default:return r.emit("error",new Error(`Invalid property ${e}: `+n)),!1}return t}if(e)for(const o in e){let t=0,r=0;var s=e[o];if(Array.isArray(s))for(let e=0;e<s.length;e++){if(!(r=i(o,s[e])))return!1;t+=r}else{if(!(r=i(o,s)))return!1;t=r}if(!t)return!1;n+=t}return{length:ge.byteLength(a(n))+n,write(){c(r,e,n)}}}function fe(e,t,r,n){var i=["reasonString","userProperties"],s=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let o=ce(e,t);if(s)for(;n+o.length>s;){var a=i.shift();if(!a||!t[a])return!1;delete t[a],o=ce(e,t)}return o}function u(r,n,i){var e,t;switch(X.propertiesTypes[n]){case"byte":r.write(ge.from([X.properties[n]])),r.write(ge.from([+i]));break;case"int8":r.write(ge.from([X.properties[n]])),r.write(ge.from([i]));break;case"binary":r.write(ge.from([X.properties[n]])),ue(r,i);break;case"int16":r.write(ge.from([X.properties[n]])),se(r,i);break;case"int32":r.write(ge.from([X.properties[n]])),e=r,t=i,t=s(t),ne("write4ByteNumber: %o",t),e.write(t);break;case"var":r.write(ge.from([X.properties[n]])),le(r,i);break;case"string":r.write(ge.from([X.properties[n]])),he(r,i);break;case"pair":Object.getOwnPropertyNames(i).forEach(t=>{var e=i[t];Array.isArray(e)?e.forEach(e=>{r.write(ge.from([X.properties[n]])),o(r,t.toString(),e.toString())}):(r.write(ge.from([X.properties[n]])),o(r,t.toString(),e.toString()))});break;default:r.emit("error",new Error(`Invalid property ${n} value: `+i))}}function c(t,e,r){le(t,r);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&null!==e[i]){var n=e[i];if(Array.isArray(n))for(let e=0;e<n.length;e++)u(t,i,n[e]);else u(t,i,n)}}function pe(e){return e?e instanceof ge?e.length:ge.byteLength(e):0}function de(e){return"string"==typeof e||e instanceof ge}p.exports=t}.call(this)}.call(this,f("buffer").Buffer)},{"./constants":45,"./numbers":48,buffer:17,debug:18,"process-nextick-args":56}],52:[function(e,t,r){var i=36e5,s=864e5;function o(e,t,r,n){t=1.5*r<=t;return Math.round(e/r)+" "+n+(t?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if(!("string"==r&&0<e.length)){if("number"==r&&isFinite(e))return(t.long?function(e){var t=Math.abs(e);if(s<=t)return o(e,t,s,"day");if(i<=t)return o(e,t,i,"hour");if(6e4<=t)return o(e,t,6e4,"minute");if(1e3<=t)return o(e,t,1e3,"second");return e+" ms"}:function(e){var t=Math.abs(e);if(s<=t)return Math.round(e/s)+"d";if(i<=t)return Math.round(e/i)+"h";if(6e4<=t)return Math.round(e/6e4)+"m";if(1e3<=t)return Math.round(e/1e3)+"s";return e+"ms"})(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}r=e;if(!(100<(r=String(r)).length)){r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(r){var n=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}},{}],53:[function(e,t,r){e=e("./lib/number-allocator.js");t.exports.NumberAllocator=e},{"./lib/number-allocator.js":54}],54:[function(e,t,r){"use strict";const n=e("js-sdsl").OrderedSet,a=e("debug")("number-allocator:trace"),l=e("debug")("number-allocator:error");function h(e,t){this.low=e,this.high=t}function i(e,t){if(!(this instanceof i))return new i(e,t);this.min=e,this.max=t,this.ss=new n([],(e,t)=>e.compare(t)),a("Create"),this.clear()}h.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},h.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},i.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},i.prototype.alloc=function(){var e,t,r,n;return 0===this.ss.size()?(a("alloc():empty"),null):((n=t=(e=this.ss.begin()).pointer.low)+1<=(r=e.pointer.high)?this.ss.updateKeyByIterator(e,new h(t+1,r)):this.ss.eraseElementByPos(0),a("alloc():"+n),n)},i.prototype.use=function(e){var t=new h(e,e),r=this.ss.lowerBound(t);if(r.equals(this.ss.end()))return a("use():failed"),!1;var n=r.pointer.low,i=r.pointer.high;if(r.pointer.equals(t))this.ss.eraseElementByIterator(r);else{if(e<n)return!1;n===e?this.ss.updateKeyByIterator(r,new h(n+1,i)):i===e?this.ss.updateKeyByIterator(r,new h(n,i-1)):(this.ss.updateKeyByIterator(r,new h(e+1,i)),this.ss.insert(new h(n,e-1)))}return a("use():"+e),!0},i.prototype.free=function(e){if(e<this.min||e>this.max)l("free():"+e+" is out of range");else{var t,r,n,i=new h(e,e),s=this.ss.upperBound(i);if(s.equals(this.ss.end())){if(s.equals(this.ss.begin()))return void this.ss.insert(i);s.pre();var o=s.pointer.high;s.pointer.high+1===e?this.ss.updateKeyByIterator(s,new h(o,e)):this.ss.insert(i)}else s.equals(this.ss.begin())?e+1===s.pointer.low?(o=s.pointer.high-1,t=s.pointer.high,this.ss.updateKeyByIterator(s,new h(o,t))):this.ss.insert(i):(o=s.pointer.low,t=s.pointer.high,s.pre(),r=s.pointer.low,s.pointer.high+1===e?e+1===o?(this.ss.eraseElementByIterator(s),n=s.pointer.high,this.ss.updateKeyByIterator(s,new h(r,n))):this.ss.updateKeyByIterator(s,new h(r,e)):e+1===o?(this.ss.eraseElementByIterator(s.next()),this.ss.insert(new h(e,t))):this.ss.insert(i));a("free():"+e)}},i.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new h(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(const e of this.ss)console.log(e)},t.exports=i},{debug:18,"js-sdsl":42}],55:[function(e,t,r){e=e("wrappy");function n(e){function t(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))}return t.called=!1,t}function i(e){function t(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)}var r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}t.exports=e(n),t.exports.strict=e(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},{wrappy:86}],56:[function(e,t,r){!function(a){!function(){"use strict";void 0===a||!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return a.nextTick(e);case 2:return a.nextTick(function(){e.call(null,t)});case 3:return a.nextTick(function(){e.call(null,t,r)});case 4:return a.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return a.nextTick(function(){e.apply(null,i)})}}}:t.exports=a}.call(this)}.call(this,e("_process"))},{_process:57}],57:[function(e,t,r){var n,i,t=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var l,h=[],u=!1,c=-1;function f(){u&&l&&(u=!1,l.length?h=l.concat(h):c=-1,h.length)&&p()}function p(){if(!u){for(var e=a(f),t=(u=!0,h.length);t;){for(l=h,h=[];++c<t;)l&&l[c].run();c=-1,t=h.length}l=null,u=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new d(e,t)),1!==h.length||u||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],58:[function(e,T,A){!function(I){!function(){var e=this,t="object"==typeof A&&A&&!A.nodeType&&A,r="object"==typeof T&&T&&!T.nodeType&&T,n="object"==typeof I&&I;n.global!==n&&n.window!==n&&n.self!==n||(e=n);var i,s,m=2147483647,y=36,b=26,o=38,a=700,l=/^xn--/,h=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=y-1,v=Math.floor,_=String.fromCharCode;function w(e){throw new RangeError(c[e])}function p(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function d(e,t){var r=e.split("@"),n="",r=(1<r.length&&(n=r[0]+"@",e=r[1]),(e=e.replace(u,".")).split("."));return n+p(r,t).join(".")}function S(e){for(var t,r,n=[],i=0,s=e.length;i<s;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<s?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function g(e){return p(e,function(e){var t="";return 65535<e&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=_(e)}).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,r){var n=0;for(e=r?v(e/a):e>>1,e+=v(e/t);f*b>>1<e;n+=y)e=v(e/f);return v(n+(f+1)*e/(e+o))}function x(e){var t,r,n,i,s,o,a,l=[],h=e.length,u=0,c=128,f=72,p=e.lastIndexOf("-");for(p<0&&(p=0),r=0;r<p;++r)128<=e.charCodeAt(r)&&w("not-basic"),l.push(e.charCodeAt(r));for(n=0<p?p+1:0;n<h;){for(i=u,s=1,o=y;h<=n&&w("invalid-input"),a=e.charCodeAt(n++),(y<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:y)||a>v((m-u)/s))&&w("overflow"),u+=a*s,!(a<(a=o<=f?1:f+b<=o?b:o-f));o+=y)s>v(m/(a=y-a))&&w("overflow"),s*=a;f=k(u-i,t=l.length+1,0==i),v(u/t)>m-c&&w("overflow"),c+=v(u/t),u%=t,l.splice(u++,0,c)}return g(l)}function C(e){for(var t,r,n,i,s,o,a,l,h,u,c=[],f=(e=S(e)).length,p=128,d=72,g=t=0;g<f;++g)(a=e[g])<128&&c.push(_(a));for(r=n=c.length,n&&c.push("-");r<f;){for(i=m,g=0;g<f;++g)p<=(a=e[g])&&a<i&&(i=a);for(i-p>v((m-t)/(l=r+1))&&w("overflow"),t+=(i-p)*l,p=i,g=0;g<f;++g)if((a=e[g])<p&&++t>m&&w("overflow"),a==p){for(s=t,o=y;!(s<(h=o<=d?1:d+b<=o?b:o-d));o+=y)c.push(_(E(h+(u=s-h)%(h=y-h),0))),s=v(u/h);c.push(_(E(s,0))),d=k(t,l,r==n),t=0,++r}++t,++p}return c.join("")}if(i={version:"1.4.1",ucs2:{decode:S,encode:g},decode:x,encode:C,toASCII:function(e){return d(e,function(e){return h.test(e)?"xn--"+C(e):e})},toUnicode:function(e){return d(e,function(e){return l.test(e)?x(e.slice(4).toLowerCase()):e})}},t&&r)if(T.exports==t)r.exports=i;else for(s in i)i.hasOwnProperty(s)&&(t[s]=i[s]);else e.punycode=i}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"==typeof e&&0!==e.length){var s=/\+/g,t=(e=e.split(t),1e3),o=(n&&"number"==typeof n.maxKeys&&(t=n.maxKeys),e.length);0<t&&t<o&&(o=t);for(var a=0;a<o;++a){var l,h=e[a].replace(s,"%20"),u=h.indexOf(r),u=0<=u?(l=h.substr(0,u),h.substr(u+1)):(l=h,""),h=decodeURIComponent(l),u=decodeURIComponent(u);Object.prototype.hasOwnProperty.call(i,h)?c(i[h])?i[h].push(u):i[h]=[i[h],u]:i[h]=u}}return i};var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],60:[function(e,t,r){"use strict";function s(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(r,n,i,e){return n=n||"&",i=i||"=","object"==typeof(r=null===r?void 0:r)?a(l(r),function(e){var t=encodeURIComponent(s(e))+i;return o(r[e])?a(r[e],function(e){return t+encodeURIComponent(s(e))}).join(n):t+encodeURIComponent(s(r[e]))}).join(n):e?encodeURIComponent(s(e))+i+encodeURIComponent(s(r)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var l=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}},{}],61:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":59,"./encode":60}],62:[function(e,t,r){"use strict";var n={};function i(e,i,t){var r=function(n){var e,t;function r(e,t,r){return n.call(this,(e=e,t=t,r=r,"string"==typeof i?i:i(e,t,r)))||this}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(t=t||Error);r.prototype.name=t.name,r.prototype.code=e,n[e]=r}function l(e,t){var r;return Array.isArray(e)?(r=e.length,e=e.map(function(e){return String(e)}),2<r?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,r){var n,i,s,o,a;return"string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",s=e,o=" argument",(void 0===a||a>s.length)&&(a=s.length),s=(s.substring(a-o.length,a)===o?"The ".concat(e," "):(a=(i="number"!=typeof i?0:i)+(s=".").length>(a=e).length||-1===a.indexOf(s,i)?"argument":"property",'The "'.concat(e,'" ').concat(a," "))).concat(n," ").concat(l(t,"type")),s+=". Received type ".concat(typeof r)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},{}],63:[function(u,c,e){!function(h){!function(){"use strict";var e=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},t=(c.exports=o,u("./_stream_readable")),r=u("./_stream_writable");u("inherits")(o,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",a))}function a(){this._writableState.ended||h.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}.call(this)}.call(this,u("_process"))},{"./_stream_readable":65,"./_stream_writable":67,_process:57,inherits:24}],64:[function(e,t,r){"use strict";t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":66,inherits:24}],65:[function(q,D,e){!function(j,U){!function(){"use strict";function d(e,t){return e.listeners(t).length}(D.exports=_).ReadableState=v,q("events").EventEmitter;var n,i=q("./internal/streams/stream"),u=q("buffer").Buffer,c=U.Uint8Array||function(){};var s,e,r,t=q("util"),g=t&&t.debuglog?t.debuglog("stream"):function(){},o=q("./internal/streams/buffer_list"),t=q("./internal/streams/destroy"),a=q("./internal/streams/state").getHighWaterMark,l=q("../errors").codes,f=l.ERR_INVALID_ARG_TYPE,p=l.ERR_STREAM_PUSH_AFTER_EOF,h=l.ERR_METHOD_NOT_IMPLEMENTED,m=l.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y=(q("inherits")(_,i),t.errorOrDestroy),b=["error","close","destroy","pause","resume"];function v(e,t,r){n=n||q("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=t instanceof n),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=a(this,e,"readableHighWaterMark",r),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s=s||q("string_decoder/").StringDecoder,this.decoder=new s(e.encoding),this.encoding=e.encoding)}function _(e){if(n=n||q("./_stream_duplex"),!(this instanceof _))return new _(e);var t=this instanceof n;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy)&&(this._destroy=e.destroy),i.call(this)}function w(e,t,r,n,i){g("readableAddChunk",t);var s,o,a,l,h=e._readableState;if(null===t)h.reading=!1,o=e,a=h,g("onEofChunk"),a.ended||(a.decoder&&(l=a.decoder.end())&&l.length&&(a.buffer.push(l),a.length+=a.objectMode?1:l.length),a.ended=!0,a.sync?x(o):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,C(o))));else if(s=i?s:function(e,t){var r;!function(e){return u.isBuffer(e)||e instanceof c}(t)&&"string"!=typeof t&&void 0!==t&&!e.objectMode&&(r=new f("chunk",["string","Buffer","Uint8Array"],t));return r}(h,t))y(e,s);else if(h.objectMode||t&&0<t.length)if("string"==typeof t||h.objectMode||Object.getPrototypeOf(t)===u.prototype||(l=t,t=u.from(l)),n)h.endEmitted?y(e,new m):S(e,h,t,!0);else if(h.ended)y(e,new p);else{if(h.destroyed)return!1;h.reading=!1,!h.decoder||r||(t=h.decoder.write(t),h.objectMode)||0!==t.length?S(e,h,t,!1):I(e,h)}else n||(h.reading=!1,I(e,h));return!h.ended&&(h.length<h.highWaterMark||0===h.length)}function S(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&x(e)),I(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=t.destroy,_.prototype._undestroy=t.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),w(this,e,t,!1,r)},_.prototype.unshift=function(e){return w(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){for(var t=new(s=s||q("string_decoder/").StringDecoder)(e),r=(this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var E=1073741824;function k(e,t){var r;return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(E<=(r=e)?r=E:(r--,r=(r=(r=(r=(r|=r>>>1)|r>>>2)|r>>>4)|r>>>8)|r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;g("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(g("emitReadable",t.flowing),t.emittedReadable=!0,j.nextTick(C,e))}function C(e){var t=e._readableState;g("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,O(e)}function I(e,t){t.readingMore||(t.readingMore=!0,j.nextTick(T,e,t))}function T(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(g("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function A(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function P(e){g("readable nexttick read 0"),e.read(0)}function B(e,t){g("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(g("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function M(e){var t=e._readableState;g("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,j.nextTick(N,t,e))}function N(e,t){g("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy())}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}_.prototype.read=function(e){g("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;return 0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:0<r.length)||r.ended)?(g("read: emitReadable",r.length,r.ended),(0===r.length&&r.ended?M:x)(this),null):0===(e=k(e,r))&&r.ended?(0===r.length&&M(this),null):(t=r.needReadable,g("need readable",t),(0===r.length||r.length-e<r.highWaterMark)&&g("length less than watermark",t=!0),r.ended||r.reading?g("reading or ended",t=!1):t&&(g("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=k(n,r))),null===(t=0<e?R(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e)&&r.ended&&M(this),null!==t&&this.emit("data",t),t)},_.prototype._read=function(e){y(this,new h("_read()"))},_.prototype.pipe=function(r,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r)}i.pipesCount+=1,g("pipe count=%d opts=%j",i.pipesCount,e);e=(!e||!1!==e.end)&&r!==j.stdout&&r!==j.stderr?o:p;function s(e,t){g("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,g("cleanup"),r.removeListener("close",c),r.removeListener("finish",f),r.removeListener("drain",a),r.removeListener("error",u),r.removeListener("unpipe",s),n.removeListener("end",o),n.removeListener("end",p),n.removeListener("data",h),l=!0,!i.awaitDrain||r._writableState&&!r._writableState.needDrain||a())}function o(){g("onend"),r.end()}i.endEmitted?j.nextTick(e):n.once("end",e),r.on("unpipe",s);t=n;var t,a=function(){var e=t._readableState;g("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&d(t,"data")&&(e.flowing=!0,O(t))},l=(r.on("drain",a),!1);function h(e){g("ondata");e=r.write(e);g("dest.write",e),!1===e&&((1===i.pipesCount&&i.pipes===r||1<i.pipesCount&&-1!==L(i.pipes,r))&&!l&&(g("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function u(e){g("onerror",e),p(),r.removeListener("error",u),0===d(r,"error")&&y(r,e)}function c(){r.removeListener("finish",f),p()}function f(){g("onfinish"),r.removeListener("close",c),p()}function p(){g("unpipe"),n.unpipe(r)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(r,"error",u),r.once("close",c),r.once("finish",f),r.emit("pipe",n),i.flowing||(g("pipe resume"),n.resume()),r},_.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0!==t.pipesCount)if(1===t.pipesCount)e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r));else if(e){var n=L(t.pipes,e);-1!==n&&(t.pipes.splice(n,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r))}else{var i=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<s;o++)i[o].emit("unpipe",this,{hasUnpiped:!1})}return this},_.prototype.addListener=_.prototype.on=function(e,t){var t=i.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"!==e||r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,g("on readable",r.length,r.reading),r.length?x(this):r.reading||j.nextTick(P,this)),t},_.prototype.removeListener=function(e,t){t=i.prototype.removeListener.call(this,e,t);return"readable"===e&&j.nextTick(A,this),t},_.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||j.nextTick(A,this),t},_.prototype.resume=function(){var e,t,r=this._readableState;return r.flowing||(g("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled)||(t.resumeScheduled=!0,j.nextTick(B,e,t)),r.paused=!1,this},_.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(t){var e,r=this,n=this._readableState,i=!1;for(e in t.on("end",function(){var e;g("wrapped end"),n.decoder&&!n.ended&&(e=n.decoder.end())&&e.length&&r.push(e),r.push(null)}),t.on("data",function(e){g("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&!r.push(e)&&(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var s=0;s<b.length;s++)t.on(b[s],this.emit.bind(this,b[s]));return this._read=function(e){g("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return(e=void 0===e?q("./internal/streams/async_iterator"):e)(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=R,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(e,t){return(r=void 0===r?q("./internal/streams/from"):r)(_,e,t)})}.call(this)}.call(this,q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":62,"./_stream_duplex":63,"./internal/streams/async_iterator":68,"./internal/streams/buffer_list":69,"./internal/streams/destroy":70,"./internal/streams/from":72,"./internal/streams/state":74,"./internal/streams/stream":75,_process:57,buffer:17,events:22,inherits:24,"string_decoder/":82,util:16}],66:[function(e,t,r){"use strict";t.exports=l;var t=e("../errors").codes,n=t.ERR_METHOD_NOT_IMPLEMENTED,i=t.ERR_MULTIPLE_CALLBACK,s=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=t.ERR_TRANSFORM_WITH_LENGTH_0,a=e("./_stream_duplex");function l(e){if(!(this instanceof l))return new l(e);a.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState,n=(r.transforming=!1,r.writecb);if(null===n)return this.emit("error",new i);r.writechunk=null,(r.writecb=null)!=t&&this.push(t),n(e),(r=this._readableState).reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush)&&(this._flush=e.flush),this.on("prefinish",h)}function h(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush(function(e,t){u(r,e,t)})}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new o;if(e._transformState.transforming)throw new s;e.push(null)}e("inherits")(l,a),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new n("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming&&(r=this._readableState,n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){a.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":62,"./_stream_duplex":63,inherits:24}],67:[function(P,B,e){!function(T,A){!function(){"use strict";function c(s){var o=this;this.next=null,this.entry=null,this.finish=function(){var e=o,t=s,r=void 0,n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}}(B.exports=w).WritableState=_;var r,e={deprecate:P("util-deprecate")},n=P("./internal/streams/stream"),h=P("buffer").Buffer,u=A.Uint8Array||function(){};var i,t=P("./internal/streams/destroy"),s=P("./internal/streams/state").getHighWaterMark,o=P("../errors").codes,f=o.ERR_INVALID_ARG_TYPE,a=o.ERR_METHOD_NOT_IMPLEMENTED,p=o.ERR_MULTIPLE_CALLBACK,l=o.ERR_STREAM_CANNOT_PIPE,d=o.ERR_STREAM_DESTROYED,g=o.ERR_STREAM_NULL_VALUES,m=o.ERR_STREAM_WRITE_AFTER_END,y=o.ERR_UNKNOWN_ENCODING,b=t.errorOrDestroy;function v(){}function _(e,u,t){r=r||P("./_stream_duplex"),e=e||{},"boolean"!=typeof t&&(t=u instanceof r),this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=s(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t=u,r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new p;var s,o,a,l,h=r;h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0,e?(h=t,o=n,a=e,l=i,--(s=r).pendingcb,o?(T.nextTick(l,a),T.nextTick(I,h,s),h._writableState.errorEmitted=!0,b(h,a)):(l(a),h._writableState.errorEmitted=!0,b(h,a),I(h,s))):((e=x(r)||t.destroyed)||r.corked||r.bufferProcessing||!r.bufferedRequest||k(t,r),n?T.nextTick(E,t,r,e,i):E(t,r,e,i))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}P("inherits")(w,n),_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(_.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function w(e){var t=this instanceof(r=r||P("./_stream_duplex"));if(!t&&!i.call(w,this))return new w(e);this._writableState=new _(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final)&&(this._final=e.final),n.call(this)}function S(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new d("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function E(e,t,r,n){var i;r||(r=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,r.emit("drain"))),t.pendingcb--,n(),I(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){for(var n=t.bufferedRequestCount,i=new Array(n),n=t.corkedRequestsFree,s=(n.entry=r,0),o=!0;r;)(i[s]=r).isBuf||(o=!1),r=r.next,s+=1;i.allBuffers=o,S(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new c(t),t.bufferedRequestCount=0}else{for(;r;){var a=r.chunk,l=r.encoding,h=r.callback;if(S(e,t,!1,t.objectMode?1:a.length,a,l,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(t,r){t._final(function(e){r.pendingcb--,e&&b(t,e),r.prefinished=!0,t.emit("prefinish"),I(t,r)})}function I(e,t){var r,n,i=x(t);return i&&(r=e,(n=t).prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,T.nextTick(C,r,n))),0===t.pendingcb)&&(t.finished=!0,e.emit("finish"),t.autoDestroy)&&(!(r=e._readableState)||r.autoDestroy&&r.endEmitted)&&e.destroy(),i}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===w&&e&&e._writableState instanceof _}})):i=function(e){return e instanceof this},w.prototype.pipe=function(){b(this,new l)},w.prototype.write=function(e,t,r){var n,i,s,o=this._writableState,a=!1,l=!o.objectMode&&(l=e,h.isBuffer(l)||l instanceof u);return l&&!h.isBuffer(e)&&(n=e,e=h.from(n)),"function"==typeof t&&(r=t,t=null),t=l?"buffer":t||o.defaultEncoding,"function"!=typeof r&&(r=v),o.ending?(n=this,i=r,s=new m,b(n,s),T.nextTick(i,s)):(l||function(e,t,r,n){var i;if(null===r?i=new g:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i)return 1;b(e,i),T.nextTick(n,i)}(this,o,e,r))&&(o.pendingcb++,a=function(e,t,r,n,i,s){r||(o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,r));return t}(t,n,i),n!==o&&(r=!0,i="buffer",n=o));var o=t.objectMode?1:n.length,a=(t.length+=o,t.length<t.highWaterMark);a||(t.needDrain=!0);{var l;t.writing||t.corked?(l=t.lastBufferedRequest,t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):S(e,t,!1,o,n,i,s)}return a}(this,o,l,e,t,r)),a},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},w.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new y(e)},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(e,t,r){r(new a("_write()"))},w.prototype._writev=null,w.prototype.end=function(e,t,r){var n=this._writableState;if("function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending){e=this,t=n,n=r;t.ending=!0,I(e,t),n&&(t.finished?T.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}return this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),w.prototype.destroy=t.destroy,w.prototype._undestroy=t.undestroy,w.prototype._destroy=function(e,t){t(e)}}.call(this)}.call(this,P("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":62,"./_stream_duplex":63,"./internal/streams/destroy":70,"./internal/streams/state":74,"./internal/streams/stream":75,_process:57,buffer:17,inherits:24,"util-deprecate":85}],68:[function(n,m,e){!function(g){!function(){"use strict";var e;function r(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var i=n("./end-of-stream"),s=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),u=Symbol("handlePromise"),c=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t,r=e[s];null!==r&&null!==(t=e[c].read())&&(e[h]=null,e[s]=null,e[o]=null,r(f(t,!1)))}var t=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((r(e={get stream(){return this[c]},next:function(){var r=this,e=this[a];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(f(void 0,!0));if(this[c].destroyed)return new Promise(function(e,t){g.nextTick(function(){r[a]?t(r[a]):e(f(void 0,!0))})});var t,n,i,e=this[h];if(e)t=new Promise((n=e,i=this,function(e,t){n.then(function(){i[l]?e(f(void 0,!0)):i[u](e,t)},t)}));else{e=this[c].read();if(null!==e)return Promise.resolve(f(e,!1));t=new Promise(this[u])}return this[h]=t}},Symbol.asyncIterator,function(){return this}),r(e,"return",function(){var e=this;return new Promise(function(t,r){e[c].destroy(null,function(e){e?r(e):t(f(void 0,!0))})})}),e),t);m.exports=function(e){var t,n=Object.create(d,(r(t={},c,{value:e,writable:!0}),r(t,s,{value:null,writable:!0}),r(t,o,{value:null,writable:!0}),r(t,a,{value:null,writable:!0}),r(t,l,{value:e._readableState.endEmitted,writable:!0}),r(t,u,{value:function(e,t){var r=n[c].read();r?(n[h]=null,n[s]=null,n[o]=null,e(f(r,!1))):(n[s]=e,n[o]=t)},writable:!0}),t));return n[h]=null,i(e,function(e){var t;e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code?(null!==(t=n[o])&&(n[h]=null,n[s]=null,n[o]=null,t(e)),n[a]=e):(null!==(t=n[s])&&(n[h]=null,n[s]=null,t(f(void 0,!(n[o]=null)))),n[l]=!0)}),e.on("readable",function(e){g.nextTick(p,e)}.bind(null,n)),n}}.call(this)}.call(this,n("_process"))},{"./end-of-stream":71,_process:57}],69:[function(e,t,r){"use strict";function s(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function i(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=e("buffer").Buffer,l=e("util").inspect,h=l&&l.custom||"inspect";t.exports=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n=a.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=i.data,r=s,a.prototype.copy.call(t,n,r),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=i.slice(s);break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0===(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r).data=i.slice(s);break}++n}return this.length-=n,t}},{key:h,value:function(e,t){return l(this,i({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,r),n&&o(t,n),e}()},{buffer:17,util:16}],70:[function(e,t,r){!function(l){!function(){"use strict";function s(e,t){a(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(a,this,e)):l.nextTick(a,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?l.nextTick(o,r):(r._writableState.errorEmitted=!0,l.nextTick(s,r,e)):l.nextTick(s,r,e):t?(l.nextTick(o,r),t(e)):l.nextTick(o,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}.call(this)}.call(this,e("_process"))},{_process:57}],71:[function(e,t,r){"use strict";var y=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function b(){}t.exports=function e(t,r,n){var i,s,o,a,l,h,u,c,f,p,d,g,m;return"function"==typeof r?e(t,null,r):(i=n||b,s=!1,n=function(){if(!s){s=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.apply(this,t)}},o=(r=r||{}).readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||u()},h=t._writableState&&t._writableState.finished,u=function(){h=!(a=!1),o||n.call(t)},c=t._readableState&&t._readableState.endEmitted,f=function(){c=!(o=!1),a||n.call(t)},p=function(e){n.call(t,e)},d=function(){var e;return o&&!c?(t._readableState&&t._readableState.ended||(e=new y),n.call(t,e)):a&&!h?(t._writableState&&t._writableState.ended||(e=new y),n.call(t,e)):void 0},g=function(){t.req.on("finish",u)},(m=t).setHeader&&"function"==typeof m.abort?(t.on("complete",u),t.on("abort",d),t.req?g():t.on("request",g)):a&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",f),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",d),function(){t.removeListener("complete",u),t.removeListener("abort",d),t.removeListener("request",g),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",f),t.removeListener("error",p),t.removeListener("close",d)})}},{"../../../errors":62}],72:[function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],73:[function(l,e,t){"use strict";var h;var r=l("../../../errors").codes,a=r.ERR_MISSING_ARGS,u=r.ERR_STREAM_DESTROYED;function c(e){if(e)throw e}function f(r,e,t,n){i=n,s=!1;var i,s,o=!(n=function(){s||(s=!0,i.apply(void 0,arguments))}),a=(r.on("close",function(){o=!0}),(h=void 0===h?l("./end-of-stream"):h)(r,{readable:e,writable:t},function(e){if(e)return n(e);o=!0,n()}),!1);return function(e){var t;if(!o&&!a)return a=!0,(t=r).setHeader&&"function"==typeof t.abort?r.abort():"function"==typeof r.destroy?r.destroy():void n(e||new u("pipe"))}}function p(e){e()}function d(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r,i,s=!(r=n).length||"function"!=typeof r[r.length-1]?c:r.pop();if((n=Array.isArray(n[0])?n[0]:n).length<2)throw new a("streams");var o=n.map(function(e,t){var r=t<n.length-1;return f(e,r,0<t,function(e){i=i||e,e&&o.forEach(p),r||(o.forEach(p),s(i))})});return n.reduce(d)}},{"../../../errors":62,"./end-of-stream":71}],74:[function(e,t,r){"use strict";var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,n){s=n,i=r;var i,s=null!=(t=t).highWaterMark?t.highWaterMark:s?t[i]:null;if(null==s)return e.objectMode?16:16384;if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new o(n?r:"highWaterMark",s);return Math.floor(s)}}},{"../../../errors":62}],75:[function(e,t,r){t.exports=e("events").EventEmitter},{events:22}],76:[function(e,t,r){(((r=t.exports=e("./lib/_stream_readable.js")).Stream=r).Readable=r).Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":63,"./lib/_stream_passthrough.js":64,"./lib/_stream_readable.js":65,"./lib/_stream_transform.js":66,"./lib/_stream_writable.js":67,"./lib/internal/streams/end-of-stream.js":71,"./lib/internal/streams/pipeline.js":73}],77:[function(e,t,r){"use strict";function n(e,t,r){var n=this;this._callback=e,this._args=r,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e=e||n._interval,n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,e,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");if(0<arguments.length)for(var e=new Array(arguments.length-2),t=0;t<e.length;t++)e[t]=arguments[t+2];return new n(arguments[0],arguments[1],e)}},{}],78:[function(e,t,r){"use strict";t.exports=e("./index.js")()},{"./index.js":79}],79:[function(e,r,t){!function(t){!function(){"use strict";function u(e){return e instanceof t?t.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}r.exports=function(e){var l,h;if((e=e||{}).circles)return l=[],h=[],e.proto?function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return o(t,e);if(t instanceof Map)return new Map(o(Array.from(t),e));if(t instanceof Set)return new Set(o(Array.from(t),e));var r={};l.push(t);h.push(r);for(var n in t){var i,s=t[n];"object"!=typeof s||null===s?r[n]=s:s instanceof Date?r[n]=new Date(s):s instanceof Map?r[n]=new Map(o(Array.from(s),e)):s instanceof Set?r[n]=new Set(o(Array.from(s),e)):ArrayBuffer.isView(s)?r[n]=u(s):(i=l.indexOf(s),r[n]=-1!==i?h[i]:e(s))}l.pop();h.pop();return r}:function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return o(t,e);if(t instanceof Map)return new Map(o(Array.from(t),e));if(t instanceof Set)return new Set(o(Array.from(t),e));var r={};l.push(t);h.push(r);for(var n in t){var i,s;!1!==Object.hasOwnProperty.call(t,n)&&("object"!=typeof(i=t[n])||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(o(Array.from(i),e)):i instanceof Set?r[n]=new Set(o(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=u(i):(s=l.indexOf(i),r[n]=-1!==s?h[s]:e(i)))}l.pop();h.pop();return r};return e.proto?function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return s(t,e);if(t instanceof Map)return new Map(s(Array.from(t),e));if(t instanceof Set)return new Set(s(Array.from(t),e));var r={};for(var n in t){var i=t[n];"object"!=typeof i||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(s(Array.from(i),e)):i instanceof Set?r[n]=new Set(s(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=u(i):r[n]=e(i)}return r}:function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return s(t,e);if(t instanceof Map)return new Map(s(Array.from(t),e));if(t instanceof Set)return new Set(s(Array.from(t),e));var r={};for(var n in t){var i;!1!==Object.hasOwnProperty.call(t,n)&&("object"!=typeof(i=t[n])||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(s(Array.from(i),e)):i instanceof Set?r[n]=new Set(s(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=u(i):r[n]=e(i))}return r};function o(e,t){for(var r=Object.keys(e),n=new Array(r.length),i=0;i<r.length;i++){var s,o=r[i],a=e[o];"object"!=typeof a||null===a?n[o]=a:a instanceof Date?n[o]=new Date(a):ArrayBuffer.isView(a)?n[o]=u(a):(s=l.indexOf(a),n[o]=-1!==s?h[s]:t(a))}return n}function s(e,t){for(var r=Object.keys(e),n=new Array(r.length),i=0;i<r.length;i++){var s=r[i],o=e[s];"object"!=typeof o||null===o?n[s]=o:o instanceof Date?n[s]=new Date(o):ArrayBuffer.isView(o)?n[s]=u(o):n[s]=t(o)}return n}}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:17}],80:[function(e,t,r){var n=e("buffer"),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,r),r.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:17}],81:[function(e,t,r){t.exports=function(e){var t=e._readableState;return t?t.objectMode||"number"==typeof e._duplexState?e.read():e.read(function(e){if(e.buffer.length)return(e.buffer.head?e.buffer.head.data:e.buffer[0]).length;return e.length}(t)):null}},{}],82:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||n.isEncoding!==i&&i(e))return t||e;throw new Error("Unknown encoding: "+e)}function o(e){var t;switch(this.encoding=s(e),this.encoding){case"utf16le":this.text=h,this.end=u,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function h(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function u(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function c(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(r.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(!(n<r)){var i=a(t[n]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(!(--n<r||-2===i)){if(0<=(i=a(t[n])))return 0<i&&(e.lastNeed=i-2),i;if(!(--n<r||-2===i)&&0<=(i=a(t[n])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i}}return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":80}],83:[function(e,t,r){"use strict";var E=e("punycode"),k=e("./util");function w(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=i,r.resolve=function(e,t){return i(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},r.format=function(e){k.isString(e)&&(e=i(e));return e instanceof w?e.format():w.prototype.format.call(e)},r.Url=w;var x=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,C=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),I=["'"].concat(r),T=["%","/","?",";","#"].concat(I),A=["/","?","#"],P=/^[+a-z0-9A-Z_-]{0,63}$/,B=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,O={javascript:!0,"javascript:":!0},R={javascript:!0,"javascript:":!0},M={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},L=e("querystring");function i(e,t,r){var n;return e&&k.isObject(e)&&e instanceof w?e:((n=new w).parse(e,t,r),n)}w.prototype.parse=function(e,t,r){if(!k.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),n=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(n);i[0]=i[0].replace(/\\/g,"/");var s=(s=e=i.join(n)).trim();if(!r&&1===e.split("#").length){i=C.exec(s);if(i)return this.path=s,this.href=s,this.pathname=i[1],i[2]?(this.search=i[2],this.query=t?L.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var o,n=x.exec(s);if(n&&(o=(n=n[0]).toLowerCase(),this.protocol=o,s=s.substr(n.length)),!(r||n||s.match(/^\/\/[^@\/]+@[^@\/]+/))||!(_="//"===s.substr(0,2))||n&&R[n]||(s=s.substr(2),this.slashes=!0),!R[n]&&(_||n&&!M[n])){for(var a=-1,l=0;l<A.length;l++)-1!==(h=s.indexOf(A[l]))&&(-1===a||h<a)&&(a=h);-1!==(e=-1===a?s.lastIndexOf("@"):s.lastIndexOf("@",a))&&(i=s.slice(0,e),s=s.slice(e+1),this.auth=decodeURIComponent(i));for(var h,a=-1,l=0;l<T.length;l++)-1!==(h=s.indexOf(T[l]))&&(-1===a||h<a)&&(a=h);-1===a&&(a=s.length),this.host=s.slice(0,a),s=s.slice(a),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var u=this.hostname.split(/\./),l=0,c=u.length;l<c;l++){var f=u[l];if(f&&!f.match(P)){for(var p="",d=0,g=f.length;d<g;d++)127<f.charCodeAt(d)?p+="x":p+=f[d];if(!p.match(P)){var m=u.slice(0,l),y=u.slice(l+1),b=f.match(B);b&&(m.push(b[1]),y.unshift(b[2])),y.length&&(s="/"+y.join(".")+s),this.hostname=m.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=E.toASCII(this.hostname));var v=this.port?":"+this.port:"",_=this.hostname||"";this.host=_+v,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0])&&(s="/"+s)}if(!O[o])for(l=0,c=I.length;l<c;l++){var w,S=I[l];-1!==s.indexOf(S)&&((w=encodeURIComponent(S))===S&&(w=escape(S)),s=s.split(S).join(w))}n=s.indexOf("#"),-1!==n&&(this.hash=s.substr(n),s=s.slice(0,n)),e=s.indexOf("?");return-1!==e?(this.search=s.substr(e),this.query=s.substr(e+1),t&&(this.query=L.parse(this.query)),s=s.slice(0,e)):t&&(this.search="",this.query={}),s&&(this.pathname=s),M[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(v=this.pathname||"",i=this.search||"",this.path=v+i),this.href=this.format(),this},w.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",i=!1,s="",e=(this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(i+=":"+this.port),this.query&&k.isObject(this.query)&&Object.keys(this.query).length&&(s=L.stringify(this.query)),this.search||s&&"?"+s||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||M[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i=i||"",n&&"#"!==n.charAt(0)&&(n="#"+n),e&&"?"!==e.charAt(0)&&(e="?"+e),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+n},w.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},w.prototype.resolveObject=function(e){k.isString(e)&&((f=new w).parse(e,!1,!0),e=f);for(var t=new w,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];t[i]=this[i]}if(t.hash=e.hash,""!==e.href)if(e.slashes&&!e.protocol){for(var s=Object.keys(e),o=0;o<s.length;o++){var a=s[o];"protocol"!==a&&(t[a]=e[a])}M[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/")}else if(e.protocol&&e.protocol!==t.protocol)if(M[e.protocol]){if(t.protocol=e.protocol,e.host||R[e.protocol])t.pathname=e.pathname;else{for(var l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==l[0]&&l.unshift(""),l.length<2&&l.unshift(""),t.pathname=l.join("/")}t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(f=t.pathname||"",p=t.search||"",t.path=f+p),t.slashes=t.slashes||e.slashes}else for(var h=Object.keys(e),u=0;u<h.length;u++){var c=h[u];t[c]=e[c]}else{var f=t.pathname&&"/"===t.pathname.charAt(0),p=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=p||f||t.host&&e.pathname,d=f,g=t.pathname&&t.pathname.split("/")||[],l=e.pathname&&e.pathname.split("/")||[],m=t.protocol&&!M[t.protocol];if(m&&(t.hostname="",t.port=null,t.host&&(""===g[0]?g[0]=t.host:g.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===l[0]?l[0]=e.host:l.unshift(e.host)),e.host=null),f=f&&(""===l[0]||""===g[0])),p)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,g=l;else if(l.length)(g=g||[]).pop(),g=g.concat(l),t.search=e.search,t.query=e.query;else if(!k.isNullOrUndefined(e.search))return m&&(t.hostname=t.host=g.shift(),_=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=_.shift(),t.host=t.hostname=_.shift()),t.search=e.search,t.query=e.query,k.isNull(t.pathname)&&k.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(g.length){for(var y=g.slice(-1)[0],p=(t.host||e.host||1<g.length)&&("."===y||".."===y)||""===y,b=0,v=g.length;0<=v;v--)"."===(y=g[v])?g.splice(v,1):".."===y?(g.splice(v,1),b++):b&&(g.splice(v,1),b--);if(!f&&!d)for(;b--;)g.unshift("..");!f||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),p&&"/"!==g.join("/").substr(-1)&&g.push("");var _,d=""===g[0]||g[0]&&"/"===g[0].charAt(0);m&&(t.hostname=t.host=!d&&g.length?g.shift():"",_=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=_.shift(),t.host=t.hostname=_.shift()),(f=f||t.host&&g.length)&&!d&&g.unshift(""),g.length?t.pathname=g.join("/"):(t.pathname=null,t.path=null),k.isNull(t.pathname)&&k.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes}else t.pathname=null,t.search?t.path="/"+t.search:t.path=null}return t.href=t.format(),t},w.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":84,punycode:58,querystring:61}],84:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],85:[function(e,r,t){!function(t){!function(){function n(e){try{if(!t.localStorage)return}catch(e){return}e=t.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}r.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],86:[function(e,t,r){t.exports=function e(i,t){if(i&&t)return e(i)(t);if("function"!=typeof i)throw new TypeError("need wrapper function");Object.keys(i).forEach(function(e){r[e]=i[e]});return r;function r(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];var r=i.apply(this,e),n=e[e.length-1];return"function"==typeof r&&r!==n&&Object.keys(n).forEach(function(e){r[e]=n[e]}),r}}},{}],87:[function(e,t,r){"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],88:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r,n=arguments[t];for(r in n)i.call(n,r)&&(e[r]=n[r])}return e};var i=Object.prototype.hasOwnProperty},{}],89:[function(e,t,r){"use strict";t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},{}],90:[function(e,t,r){"use strict";function s(e){var t=this;if((t=t instanceof s?t:new s).tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(0<arguments.length)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function o(e,t,r,n){if(!(this instanceof o))return new o(e,t,r,n);this.list=n,this.value=e,t?(t.next=this).prev=t:this.prev=null,r?(r.prev=this).next=r:this.next=null}(t.exports=s).Node=o,(s.create=s).prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},s.prototype.unshiftNode=function(e){var t;e!==this.head&&(e.list&&e.list.removeNode(e),t=this.head,e.list=this,(e.next=t)&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++)},s.prototype.pushNode=function(e){var t;e!==this.tail&&(e.list&&e.list.removeNode(e),t=this.tail,e.list=this,(e.prev=t)&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++)},s.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){n=r=void 0;var r=this,n=arguments[e];r.tail=new o(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++}return this.length},s.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){n=r=void 0;var r=this,n=arguments[e];r.head=new o(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++}return this.length},s.prototype.pop=function(){var e;if(this.tail)return e=this.tail.value,this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e},s.prototype.shift=function(){var e;if(this.head)return e=this.head.value,this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e},s.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},s.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},s.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},s.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},s.prototype.map=function(e,t){t=t||this;for(var r=new s,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},s.prototype.mapReverse=function(e,t){t=t||this;for(var r=new s,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},s.prototype.reduce=function(e,t){var r,n=this.head;if(1<arguments.length)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},s.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(1<arguments.length)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},s.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},s.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},s.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new s;if(!(t<e||t<0)){e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value)}return r},s.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new s;if(!(t<e||t<0)){e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&t<n;n--)i=i.prev;for(;null!==i&&e<n;n--,i=i.prev)r.push(i.value)}return r},s.prototype.splice=function(e,t,...r){(e=e>this.length?this.length-1:e)<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(var s=[],n=0;i&&n<t;n++)s.push(i.value),i=this.removeNode(i);(i=null===i?this.tail:i)!==this.head&&i!==this.tail&&(i=i.prev);for(n=0;n<r.length;n++)i=function(e,t,r){r=t===e.head?new o(r,null,t,e):new o(r,t,t.next,e);null===r.next&&(e.tail=r);null===r.prev&&(e.head=r);return e.length++,r}(this,i,r[n]);return s},s.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{e("./iterator.js")(s)}catch(e){}},{"./iterator.js":89}]},{},[12])(12)}),"undefined"==typeof cyblion&&(cyblion={}),freeboard.loadDatasourcePlugin({type_name:"cyblion_datasource",display_name:"Cyblion",external_scripts:[""],settings:[{name:"deviceid",display_name:"Device ID",type:"text",description:"",required:!0},{name:"devicetoken",display_name:"Device Token",type:"text",description:"",required:!0}],newInstance:function(e,t,r,n){t(new myDatasourcePlugin(e,r,n))}}),myDatasourcePlugin=function(e,n,t){let i=this;this.store={msg:{},cmsg:{},cstore:{}},this.cyblionmqtt=new CyblionMQTT({deviceid:e.deviceid,devicetoken:e.devicetoken}),cyblion[e.name]={publish:i.cyblionmqtt.publish.bind(i.cyblionmqtt)},n(i.store),this.onSettingsChanged=function(e){},this.updateNow=function(){},this.onDispose=function(){i.cyblionmqtt.disconnect(),delete i.cyblionmqtt},this.cyblionmqtt.on("msg",(e,t)=>{console.log(`@msg : ${e} ==> `+t);var r={};r[e.replace("@msg/","")]=t,i.store={...i.store,msg:r},n(i.store)}),this.cyblionmqtt.on("cmsg",(e,t)=>{console.log(`@cmsg : ${e} ==> `+t);var r={};r[e.replace("@msg/","")]=cyblion_decrypt(t),i.store={...i.store,cmsg:r},n(i.store)}),this.cyblionmqtt.on("cstore",(e,t)=>{console.log(`@cstore : ${e} ==> `+t);var r={};r[e.replace("@cstore/data/updated/","")]=cyblion_decrypt(t),i.store={...i.store,cstore:r},n(i.store)}),this.cyblionmqtt.on("connected",()=>{console.log("connected"),this.cyblionmqtt.subscribe("@private/#"),this.cyblionmqtt.subscribe("@cprivate/#"),this.cyblionmqtt.subscribe("@msg/#"),this.cyblionmqtt.subscribe("@cmsg/#"),this.cyblionmqtt.subscribe("@cstore/data/updated/#")}),this.cyblionmqtt.on("disconnected",()=>{console.log("disconnected")}),this.cyblionmqtt.connect()};const NETPIE_MQTT_HOST="ws://mqtt.netpie.io:80/mqtt",NETPIE_MQTTS_HOST="wss://mqtt.netpie.io:443/mqtt",NETPIE_CYBLION_MQTT_HOST="ws://fhe.netpie.io:8083/mqtt",NETPIE_CYBLION_MQTTS_HOST="wss://fhe.netpie.io:8084/mqtt";class CyblionMQTT{constructor(e){let h=this;this.deviceid=e.deviceid,this.devicetoken=e.devicetoken,this.option=e,this.option.secure?(this.netpie_broker_uri=NETPIE_MQTTS_HOST,this.cyblion_broker_uri=NETPIE_CYBLION_MQTTS_HOST):(this.netpie_broker_uri=NETPIE_MQTT_HOST,this.cyblion_broker_uri=NETPIE_CYBLION_MQTT_HOST),this.eventhandler={},this.eventhandler_once={},this.emitter={on(e,t){h.eventhandler[e]||(h.eventhandler[e]=[]);for(var r of h.eventhandler[e])if(r===t)return;h.eventhandler[e].push(t)},once(e,t){h.eventhandler_once[e]||(h.eventhandler_once[e]=[]);for(var r of h.eventhandler_once[e])if(r===t)return;h.eventhandler_once[e].push(t)},emit(e,t,r,n,i){if(h.eventhandler[e])for(var s of h.eventhandler[e])"function"==typeof s&&s(t,r,n,i);if(h.eventhandler_once[e])for(var o of h.eventhandler_once[e]){"function"==typeof o&&o(t,r,n,i);var a,l=h.eventhandler_once[e];for(a in l)if(l[a]===o)return void l.splice(a,1)}},removeListener(e,t){let r;for(var n in r=h.eventhandler[e])if(r[n]===t)return void r.splice(n,1);for(var i in r=h.eventhandler_once[e])if(r[i]===t)return void r.splice(i,1)}},this.on=function(...e){h.emitter.on(...e)},this.once=function(...e){h.emitter.once(...e)},this.removeListener=function(...e){h.emitter.removeListener(...e)}}_connect_netpie(){let n=this;this.netpie_client&&this.netpie_client.connected||(this.netpie_client=mqtt.connect(n.netpie_broker_uri,{keepalive:30,clientId:n.deviceid,username:n.devicetoken,password:"",clean:!0,reconnectPeriod:1e3,connectTimeout:3e4,rejectUnauthorized:!1}),this.netpie_client.on("connect",()=>{this._connect_cyblion()}),this.netpie_client.on("close",()=>{this._disconnect_cyblion()}),this.netpie_client.on("disconnect",()=>{this._disconnect_cyblion()}),this.netpie_client.on("message",(e,r)=>{if(e.startsWith("@msg/")){try{r=r.toString()}catch(e){r=null}n.emitter.emit("msg",e,r)}else if(e.startsWith("@shadow/data/updated")){let t;try{t=JSON.parse(r.toString())}catch(e){t={}}n.emitter.emit("shadow_updated",t)}}))}_disconnect_netpie(){this.netpie_client&&this.netpie_client.connected&&this.netpie_client.end()}_connect_cyblion(){let n=this;this.cyblion_client&&this.cyblion_client.connected||(this.cyblion_client=mqtt.connect(n.cyblion_broker_uri,{keepalive:30,clientId:n.deviceid,username:n.devicetoken,password:"",clean:!0,reconnectPeriod:1e3,connectTimeout:3e4,rejectUnauthorized:!1}),this.cyblion_client.on("connect",()=>{n.emitter.emit("connected"),n.cyblion_client.subscribe("@cstore/data/updated/#")}),this.cyblion_client.on("message",(e,r)=>{if(e.startsWith("@cmsg")){try{r=r.toString()}catch(e){r=null}n.emitter.emit("cmsg",e,r)}else if(e.startsWith("@cstore")){e=e.split("/").slice(3).join("/");let t;try{t=r.toString()}catch(e){t=null}n.emitter.emit("cstore",e,t)}}))}_disconnect_cyblion(){this.cyblion_client&&this.cyblion_client.connected&&this.cyblion_client.end()}connect(){this._connect_netpie()}disconnect(){this.netpie_client.end(!0),this.cyblion_client.end(!0)}publish(e,t){let r;e.startsWith("@msg/")||e.startsWith("@shadow/")?(r="object"==typeof t?JSON.stringify(t):String(t),this.netpie_client.publish(e,r)):(e.startsWith("@cmsg/")||e.startsWith("@cstore/"))&&(r="object"==typeof t?JSON.stringify(t):String(t),this.cyblion_client.publish(e,r))}subscribe(e){e.startsWith("@msg/")||e.startsWith("@shadow/")?this.netpie_client.subscribe(e):(e.startsWith("@cmsg/")||e.startsWith("@cstore/"))&&this.cyblion_client.subscribe(e)}writeShadow(t,r){if("string"==typeof t){let e;e="object"==typeof r?JSON.stringify(r):String(r);var n={data:{}},r=(n.data[t]=r,JSON.stringify(n));this.netpie_client.publish("@shadow/data/update",r)}else"object"==typeof t&&(n=JSON.stringify({data:t}),this.netpie_client.publish("@shadow/data/update",n))}writeCStore(e,t){this.cyblion_client.publish("@cstore/data/update/"+e,t)}publishMsg(e,t){this.netpie_client.publish("@msg/"+e,t)}publishPrivateMsg(e,t){this.netpie_client.publish("@private/"+e,t)}}